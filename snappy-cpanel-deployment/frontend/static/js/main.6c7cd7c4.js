/*! For license information please see main.6c7cd7c4.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},66:(e,t,n)=>{n.d(t,{A:()=>c,O:()=>l});var r=n(43),s=n(216),i=n(291),a=n(579);const o=(0,r.createContext)(void 0);function l(e){let{children:t}=e;const[n,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!0),m=(0,s.zy)();(0,r.useEffect)(()=>{h(!0);const e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t?(d(!0),l(JSON.parse(t))):(d(!1),l(null)),h(!1)},[m]);const p=async(e,t)=>{try{const n=await i.authApi.login(e,t);localStorage.setItem("token",n.token),d(!0);const r=n.user||n,s={id:r.id||r._id,username:r.username,email:r.email,profilePicture:r.profilePicture||"",isAdmin:r.isAdmin||!1};return l(s),localStorage.setItem("user",JSON.stringify(s)),{user:s,token:n.token}}catch(n){throw n}};return(0,a.jsx)(o.Provider,{value:{user:n,login:p,register:async(e,t,n)=>{try{await i.authApi.register(e,t,n),await p(t,n)}catch(r){throw r}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),l(null),d(!1)},isAuthenticated:c,isAuthLoading:u},children:t})}function c(){const e=(0,r.useContext)(o);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}},141:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(43),s=n(216),i=n(579);const a=()=>{const{token:e}=(0,s.g)(),[t,n]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1);return(0,i.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Set New Password"}),(0,i.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),c(!0),o("");const r=await fetch("/api/auth/reset-password/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})}),s=await r.json();o(s.message||"Password reset successful."),c(!1)},className:"space-y-4",children:[(0,i.jsx)("input",{type:"password",placeholder:"New password",value:t,onChange:e=>n(e.target.value),required:!0,className:"border rounded px-3 py-2 w-full"}),(0,i.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded w-full",disabled:l,children:l?"Resetting...":"Reset Password"})]}),a&&(0,i.jsx)("div",{className:"mt-4 text-green-600",children:a})]})}},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var v=b.prototype=new y;v.constructor=b,f(v,x.prototype),v.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,s)&&!k.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+A(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),P(a,t,s,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+A(o=e[c],c);l+=P(o,t,s,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,s,d=i+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,n){if(null==e)return e;var r=[],s=0;return P(e,r,"","",function(e){return t.call(n,e,s++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},T={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:T,ReactCurrentOwner:N};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,n){E(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},216:(e,t,n)=>{var r;n.d(t,{$P:()=>m,BV:()=>I,C5:()=>L,Ix:()=>R,V8:()=>T,Zp:()=>x,g:()=>y,jb:()=>c,qh:()=>D,x$:()=>b,zy:()=>f});var s=n(43),i=n(387);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const o=s.createContext(null);const l=s.createContext(null);const c=s.createContext(null);const d=s.createContext(null);const u=s.createContext({outlet:null,matches:[],isDataRoute:!1});const h=s.createContext(null);function m(e,t){let{relative:n}=void 0===t?{}:t;p()||(0,i.Oi)(!1);let{basename:r,navigator:a}=s.useContext(c),{hash:o,pathname:l,search:d}=b(e,{relative:n}),u=l;return"/"!==r&&(u="/"===l?r:(0,i.HS)([r,l])),a.createHref({pathname:u,search:d,hash:o})}function p(){return null!=s.useContext(d)}function f(){return p()||(0,i.Oi)(!1),s.useContext(d).location}function g(e){s.useContext(c).static||s.useLayoutEffect(e)}function x(){let{isDataRoute:e}=s.useContext(u);return e?function(){let{router:e}=A(S.UseNavigateStable),t=E(C.UseNavigateStable),n=s.useRef(!1);g(()=>{n.current=!0});let r=s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,a({fromRouteId:t},s)))},[e,t]);return r}():function(){p()||(0,i.Oi)(!1);let e=s.useContext(o),{basename:t,future:n,navigator:r}=s.useContext(c),{matches:a}=s.useContext(u),{pathname:l}=f(),d=JSON.stringify((0,i.yD)(a,n.v7_relativeSplatPath)),h=s.useRef(!1);g(()=>{h.current=!0});let m=s.useCallback(function(n,s){if(void 0===s&&(s={}),!h.current)return;if("number"===typeof n)return void r.go(n);let a=(0,i.Gh)(n,JSON.parse(d),l,"path"===s.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:(0,i.HS)([t,a.pathname])),(s.replace?r.replace:r.push)(a,s.state,s)},[t,r,d,l,e]);return m}()}function y(){let{matches:e}=s.useContext(u),t=e[e.length-1];return t?t.params:{}}function b(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(c),{matches:a}=s.useContext(u),{pathname:o}=f(),l=JSON.stringify((0,i.yD)(a,r.v7_relativeSplatPath));return s.useMemo(()=>(0,i.Gh)(e,JSON.parse(l),o,"path"===n),[e,l,o,n])}function v(e,t,n,r){p()||(0,i.Oi)(!1);let{navigator:o}=s.useContext(c),{matches:l}=s.useContext(u),h=l[l.length-1],m=h?h.params:{},g=(h&&h.pathname,h?h.pathnameBase:"/");h&&h.route;let x,y=f();if(t){var b;let e="string"===typeof t?(0,i.Rr)(t):t;"/"===g||(null==(b=e.pathname)?void 0:b.startsWith(g))||(0,i.Oi)(!1),x=e}else x=y;let v=x.pathname||"/",w=v;if("/"!==g){let e=g.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let j=(0,i.ue)(e,{pathname:w});let N=_(j&&j.map(e=>Object.assign({},e,{params:Object.assign({},m,e.params),pathname:(0,i.HS)([g,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,i.HS)([g,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,r);return t&&N?s.createElement(d.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:i.rc.Pop}},N):N}function w(){let e=function(){var e;let t=s.useContext(h),n=P(C.UseRouteError),r=E(C.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,i.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:a},n):null,null)}const j=s.createElement(w,null);class N extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(u.Provider,{value:this.props.routeContext},s.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(o);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(u.Provider,{value:t},r)}function _(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(a=n)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||(0,i.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<l.length;s++){let e=l[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,r,i)=>{let a,o=!1,h=null,m=null;var p;n&&(a=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||j,d&&(u<0&&0===i?(p="route-fallback",!1||M[p]||(M[p]=!0),o=!0,m=null):u===i&&(o=!0,m=r.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,i+1)),g=()=>{let t;return t=a?h:o?m:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(k,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(N,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var S=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(S||{}),C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C||{});function A(e){let t=s.useContext(o);return t||(0,i.Oi)(!1),t}function P(e){let t=s.useContext(l);return t||(0,i.Oi)(!1),t}function E(e){let t=function(){let e=s.useContext(u);return e||(0,i.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,i.Oi)(!1),n.route.id}const M={};const O=(e,t,n)=>{};function T(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&O("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&void 0!==t.v7_relativeSplatPath||O("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&O("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&O("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&O("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&O("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(r||(r=n.t(s,2))).startTransition;function L(e){let{to:t,replace:n,state:r,relative:a}=e;p()||(0,i.Oi)(!1);let{future:o,static:l}=s.useContext(c),{matches:d}=s.useContext(u),{pathname:h}=f(),m=x(),g=(0,i.Gh)(t,(0,i.yD)(d,o.v7_relativeSplatPath),h,"path"===a),y=JSON.stringify(g);return s.useEffect(()=>m(JSON.parse(y),{replace:n,state:r,relative:a}),[m,y,a,n,r]),null}function D(e){(0,i.Oi)(!1)}function R(e){let{basename:t="/",children:n=null,location:r,navigationType:o=i.rc.Pop,navigator:l,static:u=!1,future:h}=e;p()&&(0,i.Oi)(!1);let m=t.replace(/^\/*/,"/"),f=s.useMemo(()=>({basename:m,navigator:l,static:u,future:a({v7_relativeSplatPath:!1},h)}),[m,h,l,u]);"string"===typeof r&&(r=(0,i.Rr)(r));let{pathname:g="/",search:x="",hash:y="",state:b=null,key:v="default"}=r,w=s.useMemo(()=>{let e=(0,i.pb)(g,m);return null==e?null:{location:{pathname:e,search:x,hash:y,state:b,key:v},navigationType:o}},[m,g,x,y,b,v,o]);return null==w?null:s.createElement(c.Provider,{value:f},s.createElement(d.Provider,{children:n,value:w}))}function I(e){let{children:t,location:n}=e;return v(z(t),n)}new Promise(()=>{});s.Component;function z(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let a=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,z(e.props.children,a));e.type!==D&&(0,i.Oi)(!1),e.props.index&&e.props.children&&(0,i.Oi)(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=z(e.props.children,a)),n.push(o)}),n}},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<s&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,v(e),!f)if(null!==r(c))f=!0,T(j);else{var t=r(d);null!==t&&L(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,y(S),S=-1),p=!0;var i=m;try{for(v(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),v(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&L(w,u.startTime-n),l=!1}return l}finally{h=null,m=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,_=null,S=-1,C=5,A=-1;function P(){return!(t.unstable_now()-A<C)}function E(){if(null!==_){var e=t.unstable_now();A=e;var n=!0;try{n=_(!0,e)}finally{n?N():(k=!1,_=null)}}else k=!1}if("function"===typeof b)N=function(){b(E)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,O=M.port2;M.port1.onmessage=E,N=function(){O.postMessage(null)}}else N=function(){x(E,0)};function T(e){_=e,k||(k=!0,N())}function L(e,n){S=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,T(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(g?(y(S),S=-1):g=!0,L(w,i-a))):(e.sortIndex=o,n(c,e),f||p||(f=!0,T(j))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},291:(e,t,n)=>{n.r(t),n.d(t,{authApi:()=>c,cartApi:()=>h,default:()=>f,orderApi:()=>m,productApi:()=>d,reviewApi:()=>p,transformBackendOrder:()=>i,transformBackendProduct:()=>a,wishlistApi:()=>u});var r=n(379);const s="http://localhost:5000/api";console.log("API_BASE_URL:",s);const i=e=>({id:e._id||e.id,date:e.createdAt||e.date,status:e.status||e.orderStatus||"pending",total:e.totalPrice||e.total||0,items:(e.orderItems||[]).map(e=>{var t,n,r,s,i,a,o;return{product:{id:(null===(t=e.product)||void 0===t?void 0:t._id)||(null===(n=e.product)||void 0===n?void 0:n.id)||e.product,name:e.name||(null===(r=e.product)||void 0===r?void 0:r.name)||"Unknown Product",image:e.image||(null===(s=e.product)||void 0===s?void 0:s.image)||(null===(i=e.product)||void 0===i||null===(a=i.images)||void 0===a?void 0:a[0])||"https://via.placeholder.com/48?text=Product",price:e.price||(null===(o=e.product)||void 0===o?void 0:o.price)||0},quantity:e.quantity||1}}),trackingNumber:e.trackingNumber,shippingAddress:e.shippingAddress||{fullName:"N/A",addressLine1:"N/A",city:"N/A",postalCode:"N/A",country:"N/A"}}),a=e=>({id:e.id||e._id,_id:e._id,name:e.name,price:e.price,originalPrice:e.originalPrice,discount:e.discount,image:Array.isArray(e.images)?e.images[0]:e.image,images:e.images||[e.image],rating:e.rating||0,reviews:e.reviews||e.numReviews||0,numReviews:e.numReviews,inStock:e.inStock,countInStock:e.countInStock,category:e.category,brand:e.brand,description:e.description,features:e.features||[],specifications:e.specifications||{},tags:e.tags||[],weight:e.weight||"",dimensions:e.dimensions||"",warranty:e.warranty||"",returnPolicy:e.returnPolicy,shippingInfo:e.shippingInfo}),o=async e=>{if(!e.ok)try{const t=(await e.json()).message||"Error: ".concat(e.status," ").concat(e.statusText);throw console.error("API Error:",t,e.status),new Error(t)}catch(t){throw console.error("API Error:",e.status,e.statusText),new Error("Network Error: ".concat(e.status," ").concat(e.statusText))}if(204===e.status)return{};try{return await e.json()}catch(t){return console.error("Error parsing JSON response:",t),{}}},l=()=>{const e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}},c={login:async(e,t)=>{try{console.log("\ud83d\udd10 Attempting login for:",e),console.log("\ud83c\udf10 API_BASE_URL:",s),console.log("\ud83d\ude80 Making API request to:","".concat(s,"/users/login"));const n=await fetch("".concat(s,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});console.log("\ud83d\udce1 Login response status:",n.status),console.log("\ud83d\udce1 Login response ok:",n.ok);const r=await o(n);console.log("\ud83d\udce6 Raw backend data:",r);const i={token:r.token,user:{id:r._id,username:r.username,email:r.email,profilePicture:r.profilePicture||"/images/avatars/default.jpg",createdAt:(new Date).toISOString(),isAdmin:r.isAdmin}};return console.log("\u2705 Transformed login data:",i),i}catch(n){if(console.error("\u274c Login error:",n),n instanceof TypeError&&n.message.includes("fetch"))throw console.error("\ud83d\udeab Network Error - Unable to connect to server"),console.error("\ud83d\udd0d Check if backend server is running on:",s),new Error("Unable to connect to server. Please check if the backend is running.");throw n}},register:async(e,t,n)=>{try{0;const r=await fetch("".concat(s,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:n})});return o(r)}catch(r){throw console.error("Registration error:",r),r}},getCurrentUser:async()=>{try{0;const e=await fetch("".concat(s,"/users/profile"),{headers:(0,r.A)({"Content-Type":"application/json"},l())}),t=await o(e);return{id:t._id,username:t.username,email:t.email,profilePicture:t.profilePicture||"/images/avatars/default.jpg",createdAt:(new Date).toISOString(),isAdmin:t.isAdmin,phoneNumber:t.phoneNumber,defaultShippingAddress:t.defaultShippingAddress}}catch(e){throw console.error("Error fetching user data:",e),e}},updateProfile:async e=>{try{0;const t=await fetch("".concat(s,"/users/profile"),{method:"PUT",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)});return o(t)}catch(t){throw console.error("Profile update error:",t),t}},changePassword:async(e,t)=>{try{0;const n=await fetch("".concat(s,"/users/change-password"),{method:"POST",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify({currentPassword:e,newPassword:t})});return o(n)}catch(n){throw console.error("Password change error:",n),n}},forgotPassword:async e=>{try{0;const t=await fetch("".concat(s,"/users/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});return o(t)}catch(t){throw console.error("Forgot password error:",t),t}},resetPassword:async(e,t)=>{try{0;const n=await fetch("".concat(s,"/users/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,newPassword:t})});return o(n)}catch(n){throw console.error("Reset password error:",n),n}}},d={getProducts:async e=>{try{const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[n,r]=e;void 0!==r&&null!==r&&t.append(n,String(r))});const n=await fetch("".concat(s,"/products?").concat(t.toString())),r=await o(n);return{products:r.products?r.products.map(a):[],total:r.totalProducts||0,page:r.page||1,totalPages:r.pages||1}}catch(t){throw console.error("Error fetching products:",t),t}},getProductById:async e=>{try{const t=await fetch("".concat(s,"/products/").concat(e));return o(t)}catch(t){throw console.error("Error fetching product with id ".concat(e,":"),t),t}},getFeaturedProducts:async()=>{try{const e=await fetch("".concat(s,"/products/featured"));return o(e)}catch(e){throw console.error("Error fetching featured products:",e),e}},getRelatedProducts:async e=>{try{const t=await fetch("".concat(s,"/products/").concat(e,"/related"));return o(t)}catch(t){throw console.error("Error fetching related products:",t),t}},getCategories:async()=>{try{const e=await fetch("".concat(s,"/products/categories"));return o(e)}catch(e){throw console.error("Error fetching categories:",e),e}},getBrands:async()=>{try{const e=await fetch("".concat(s,"/products/brands"));return o(e)}catch(e){throw console.error("Error fetching brands:",e),e}},searchProducts:async e=>{try{const t=await fetch("".concat(s,"/products/search?q=").concat(encodeURIComponent(e)));return o(t)}catch(t){throw console.error("Error searching products:",t),t}}},u={getWishlist:async()=>{try{0;const e=await fetch("".concat(s,"/users/wishlist"),{headers:l()});return o(e)}catch(e){throw console.error("Error fetching wishlist:",e),e}},addToWishlist:async e=>{try{0;const t=await fetch("".concat(s,"/users/wishlist"),{method:"POST",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify({productId:e})});return o(t)}catch(t){throw console.error("Error adding to wishlist:",t),t}},removeFromWishlist:async e=>{try{0;const t=await fetch("".concat(s,"/users/wishlist/").concat(e),{method:"DELETE",headers:l()});return o(t)}catch(t){throw console.error("Error removing from wishlist:",t),t}},isInWishlist:async e=>{try{0;const t=await fetch("".concat(s,"/users/wishlist/check/").concat(e),{headers:l()});return(await o(t)).inWishlist}catch(t){throw console.error("Error checking wishlist status:",t),t}}},h={getCart:async()=>{try{0;const e=await fetch("".concat(s,"/cart/items"),{headers:l()});return o(e)}catch(e){throw console.error("Error fetching cart:",e),e}},addToCart:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{0,console.log("API: Adding product ".concat(e," (quantity: ").concat(t,") to cart"));const n=e,i=await fetch("".concat(s,"/cart/items"),{method:"POST",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify({productId:n,quantity:t})}),a=await o(i);return console.log("API: Cart add response:",a),a}catch(n){throw console.error("Error adding to cart:",n),n}},updateCartItem:async(e,t)=>{try{0;const n=await fetch("".concat(s,"/cart/items/").concat(e),{method:"PUT",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify({quantity:t})});return o(n)}catch(n){throw console.error("Error updating cart item:",n),n}},removeFromCart:async e=>{try{0;const t=await fetch("".concat(s,"/cart/items/").concat(e),{method:"DELETE",headers:l()});return o(t)}catch(t){throw console.error("Error removing from cart:",t),t}},clearCart:async()=>{try{0;const e=await fetch("".concat(s,"/cart"),{method:"DELETE",headers:l()});return o(e)}catch(e){throw console.error("Error clearing cart:",e),e}},checkout:async(e,t,n,i,a,c,d,u)=>{try{0;const h=await fetch("".concat(s,"/orders"),{method:"POST",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify({orderItems:e,shippingAddress:t,paymentMethod:n,shippingMethod:i,taxPrice:a,shippingPrice:c,subtotal:d,totalPrice:u})});return o(h)}catch(h){throw console.error("Error during checkout:",h),h}}},m={getOrders:async()=>{try{0;const e=await fetch("".concat(s,"/orders/myorders"),{headers:(0,r.A)((0,r.A)({},l()),{},{"Cache-Control":"no-cache",Pragma:"no-cache"})}),t=await o(e);return(t||[]).map(i)}catch(e){throw console.error("Error fetching orders:",e),e}},getOrderById:async e=>{try{0;const t=await fetch("".concat(s,"/orders/").concat(e),{headers:l()});return o(t)}catch(t){throw console.error("Error fetching order ".concat(e,":"),t),t}},cancelOrder:async e=>{try{0;const t=await fetch("".concat(s,"/orders/").concat(e,"/cancel"),{method:"POST",headers:l()});return o(t)}catch(t){throw console.error("Error cancelling order ".concat(e,":"),t),t}}},p={getProductReviews:async e=>{try{0;const t=await fetch("".concat(s,"/products/").concat(e,"/reviews"));return o(t)}catch(t){throw console.error("Error fetching reviews for product ".concat(e,":"),t),t}},addReview:async(e,t,n)=>{try{0;const i=await fetch("".concat(s,"/products/").concat(e,"/reviews"),{method:"POST",headers:(0,r.A)((0,r.A)({},l()),{},{"Content-Type":"application/json"}),body:JSON.stringify({rating:t,comment:n})});return o(i)}catch(i){throw console.error("Error adding review for product ".concat(e,":"),i),i}},markReviewHelpful:async e=>{try{0;const t=await fetch("".concat(s,"/reviews/").concat(e,"/helpful"),{method:"POST",headers:l()});return o(t)}catch(t){throw console.error("Error marking review ".concat(e," as helpful:"),t),t}}},f={auth:c,products:d,wishlist:u,cart:h,orders:m,reviews:p}},379:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(705);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},387:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var s;n.d(t,{AO:()=>u,Gh:()=>L,HS:()=>D,Oi:()=>o,Rr:()=>h,pX:()=>B,pb:()=>E,rc:()=>s,tH:()=>F,ue:()=>f,yD:()=>T,zR:()=>a}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const i="popstate";function a(e){return void 0===e&&(e={}),m(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return d("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,e)}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,s){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,a){void 0===a&&(a={});let{window:l=document.defaultView,v5Compat:h=!1}=a,m=l.history,p=s.Pop,f=null,g=x();function x(){return(m.state||{idx:null}).idx}function y(){p=s.Pop;let e=x(),t=null==e?null:e-g;g=e,f&&f({action:p,location:v.location,delta:t})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,m.replaceState(r({},m.state,{idx:g}),""));let v={get action(){return p},get location(){return e(l,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(i,y),f=e,()=>{l.removeEventListener(i,y),f=null}},createHref:e=>t(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=s.Push;let r=d(v.location,e,t);n&&n(r,e),g=x()+1;let i=c(r,g),a=v.createHref(r);try{m.pushState(i,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}h&&f&&f({action:p,location:v.location,delta:1})},replace:function(e,t){p=s.Replace;let r=d(v.location,e,t);n&&n(r,e),g=x();let i=c(r,g),a=v.createHref(r);m.replaceState(i,"",a),h&&f&&f({action:p,location:v.location,delta:0})},go:e=>m.go(e)};return v}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let s=E(("string"===typeof t?h(t):t).pathname||"/",n);if(null==s)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=P(s);a=C(i[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=D([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),x(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))s(e,t,r);else s(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=y(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,v=3,w=2,j=1,N=10,k=-2,_=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(_)&&(r+=k),t&&(r+=w),n.filter(e=>!_(e)).reduce((e,t)=>e+(b.test(t)?v:""===t?j:N),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:D([i,d.pathname]),pathnameBase:R(D([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=D([i,d.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1),c=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:i,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function T(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,s){let i;void 0===s&&(s=!1),"string"===typeof e?i=h(e):(i=r({},e),o(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),o(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),o(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let a,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)a=n;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?h(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:I(r),hash:z(s)}}(i,a),u=c&&"/"!==c&&c.endsWith("/"),m=(l||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!m||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class F extends Error{}function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],W=(new Set(V),["get",...V]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},475:(e,t,n)=>{var r,s;n.d(t,{Kd:()=>p,N_:()=>x,Zp:()=>o.Zp,ok:()=>v});var i=n(43),a=n(950),o=n(216),l=n(387);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function u(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const h=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(w){}new Map;const m=(r||(r=n.t(i,2))).startTransition;(s||(s=n.t(a,2))).flushSync,(r||(r=n.t(i,2))).useId;function p(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();null==a.current&&(a.current=(0,l.zR)({window:s,v5Compat:!0}));let c=a.current,[d,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},p=i.useCallback(e=>{h&&m?m(()=>u(e)):u(e)},[u,h]);return i.useLayoutEffect(()=>c.listen(p),[c,p]),i.useEffect(()=>(0,o.V8)(r),[r]),i.createElement(o.Ix,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:c,future:r})}const f="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:u,state:m,target:p,to:x,preventScrollReset:y,viewTransition:b}=e,v=d(e,h),{basename:j}=i.useContext(o.jb),N=!1;if("string"===typeof x&&g.test(x)&&(n=x,f))try{let e=new URL(window.location.href),t=x.startsWith("//")?new URL(e.protocol+x):new URL(x),n=(0,l.pb)(t.pathname,j);t.origin===e.origin&&null!=n?x=n+t.search+t.hash:N=!0}catch(w){}let k=(0,o.$P)(x,{relative:s}),_=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,viewTransition:d}=void 0===t?{}:t,u=(0,o.Zp)(),h=(0,o.zy)(),m=(0,o.x$)(e,{relative:c});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:(0,l.AO)(h)===(0,l.AO)(m);u(e,{replace:n,state:s,preventScrollReset:a,relative:c,viewTransition:d})}},[h,u,m,r,s,n,e,a,c,d])}(x,{replace:u,state:m,target:p,preventScrollReset:y,relative:s,viewTransition:b});return i.createElement("a",c({},v,{href:n||k,onClick:N||a?r:function(e){r&&r(e),e.defaultPrevented||_(e)},ref:t,target:p}))});var y,b;function v(e){let t=i.useRef(u(e)),n=i.useRef(!1),r=(0,o.zy)(),s=i.useMemo(()=>function(e,t){let n=u(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=(0,o.Zp)(),l=i.useCallback((e,t)=>{const r=u("function"===typeof e?e(s):e);n.current=!0,a("?"+r,t)},[a,s]);return[s,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(y||(y={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(b||(b={}))},548:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(379),s=n(43),i=n(66),a=n(216),o=n(579);const l=()=>{const{user:e,isAuthenticated:t}=(0,i.A)(),[n,l]=((0,a.Zp)(),(0,s.useState)([])),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)({});if((0,s.useEffect)(()=>{t&&null!==e&&void 0!==e&&e.isAdmin&&f()},[t,e]),!t||null===e||void 0===e||!e.isAdmin)return(0,o.jsx)(a.C5,{to:"/login",replace:!0});const f=async()=>{d(!0);const e=localStorage.getItem("token"),t=await fetch("/api/users",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),n=await t.json();l(n),d(!1)},g=e=>{const{name:t,value:n,type:s,checked:i}=e.target;p(e=>(0,r.A)((0,r.A)({},e),{},{[t]:"checkbox"===s?i:n}))},x=async()=>{if(!u)return;const e=localStorage.getItem("token");await fetch("/api/users/".concat(u),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(m)}),h(null),p({}),f()};return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"User Management"}),c?(0,o.jsx)("div",{children:"Loading users..."}):(0,o.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"py-2 px-4",children:"Username"}),(0,o.jsx)("th",{className:"py-2 px-4",children:"Email"}),(0,o.jsx)("th",{className:"py-2 px-4",children:"Admin"}),(0,o.jsx)("th",{className:"py-2 px-4",children:"Actions"})]})}),(0,o.jsx)("tbody",{children:n.map(e=>(0,o.jsxs)("tr",{className:"border-b",children:[(0,o.jsx)("td",{className:"py-2 px-4",children:u===e._id?(0,o.jsx)("input",{name:"username",value:m.username||"",onChange:g,className:"border rounded px-2"}):e.username}),(0,o.jsx)("td",{className:"py-2 px-4",children:u===e._id?(0,o.jsx)("input",{name:"email",value:m.email||"",onChange:g,className:"border rounded px-2"}):e.email}),(0,o.jsx)("td",{className:"py-2 px-4 text-center",children:u===e._id?(0,o.jsx)("input",{type:"checkbox",name:"isAdmin",checked:!!m.isAdmin,onChange:g}):e.isAdmin?"Yes":"No"}),(0,o.jsx)("td",{className:"py-2 px-4",children:u===e._id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:x,className:"bg-green-500 text-white px-2 py-1 rounded mr-2",children:"Save"}),(0,o.jsx)("button",{onClick:()=>h(null),className:"bg-gray-300 px-2 py-1 rounded",children:"Cancel"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>(e=>{h(e._id),p({username:e.username,email:e.email,isAdmin:e.isAdmin})})(e),className:"bg-blue-500 text-white px-2 py-1 rounded mr-2",children:"Edit"}),(0,o.jsx)("button",{onClick:()=>(async e=>{if(!window.confirm("Are you sure you want to delete this user?"))return;const t=localStorage.getItem("token");await fetch("/api/users/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),f()})(e._id),className:"bg-red-500 text-white px-2 py-1 rounded",children:"Delete"})]})})]},e._id))})]})]})}},579:(e,t,n)=>{e.exports=n(153)},582:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(43),s=n(579);const i=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Reset Password"}),(0,s.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),i("");const n=await fetch("/api/auth/request-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),r=await n.json();i(r.message||"Check your email for reset instructions."),o(!1)},className:"space-y-4",children:[(0,s.jsx)("input",{type:"email",placeholder:"Your email",value:e,onChange:e=>t(e.target.value),required:!0,className:"border rounded px-3 py-2 w-full"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded w-full",disabled:a,children:a?"Sending...":"Send Reset Link"})]}),n&&(0,s.jsx)("div",{className:"mt-4 text-green-600",children:n})]})}},615:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(43),s=n(66),i=n(216),a=n(579);const o=()=>{var e;const{user:t,isAuthenticated:n}=(0,s.A)(),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(""),[f,g]=(0,r.useState)("");if((0,r.useEffect)(()=>{n&&null!==t&&void 0!==t&&t.isAdmin&&x()},[n,t]),!n||null===t||void 0===t||!t.isAdmin)return(0,a.jsx)(i.C5,{to:"/login",replace:!0});const x=async()=>{d(!0);const e=localStorage.getItem("token"),t=await fetch("/api/orders",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),n=await t.json();l(n.orders||[]),d(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Order Management"}),c?(0,a.jsx)("div",{children:"Loading orders..."}):(0,a.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4",children:"Order ID"}),(0,a.jsx)("th",{className:"py-2 px-4",children:"User"}),(0,a.jsx)("th",{className:"py-2 px-4",children:"Status"}),(0,a.jsx)("th",{className:"py-2 px-4",children:"Total"}),(0,a.jsx)("th",{className:"py-2 px-4",children:"Created"}),(0,a.jsx)("th",{className:"py-2 px-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:o.map(e=>{var t;return(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"py-2 px-4",children:e._id}),(0,a.jsx)("td",{className:"py-2 px-4",children:null===(t=e.user)||void 0===t?void 0:t.username}),(0,a.jsx)("td",{className:"py-2 px-4",children:e.status}),(0,a.jsxs)("td",{className:"py-2 px-4",children:["$",e.totalPrice.toFixed(2)]}),(0,a.jsx)("td",{className:"py-2 px-4",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("td",{className:"py-2 px-4",children:(0,a.jsx)("button",{onClick:()=>(e=>{h(e),p(e.status),g(e.trackingNumber||"")})(e),className:"bg-blue-500 text-white px-2 py-1 rounded",children:"View / Update"})})]},e._id)})})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Order Details"}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Order ID:"})," ",u._id]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"User:"})," ",null===(e=u.user)||void 0===e?void 0:e.username]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Status:"})," ",u.status]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Total:"})," $",u.totalPrice.toFixed(2)]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Created:"})," ",new Date(u.createdAt).toLocaleString()]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Delivered:"})," ",u.isDelivered?"Yes (".concat(new Date(u.deliveredAt||"").toLocaleString(),")"):"No"]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Tracking Number:"})," ",u.trackingNumber||"N/A"]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("strong",{children:"Order Items:"}),(0,a.jsx)("ul",{className:"list-disc ml-6",children:u.orderItems.map((e,t)=>(0,a.jsxs)("li",{children:[e.name," x ",e.quantity]},t))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",children:"Update Status"}),(0,a.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"border rounded px-2 py-1 w-full mb-2",children:[(0,a.jsx)("option",{value:"Processing",children:"Processing"}),(0,a.jsx)("option",{value:"Shipped",children:"Shipped"}),(0,a.jsx)("option",{value:"Delivered",children:"Delivered"}),(0,a.jsx)("option",{value:"Cancelled",children:"Cancelled"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Tracking Number (optional)",value:f,onChange:e=>g(e.target.value),className:"border rounded px-2 py-1 w-full"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:async()=>{if(!u)return;const e=localStorage.getItem("token");await fetch("/api/orders/".concat(u._id,"/status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({status:m,trackingNumber:f})}),h(null),x()},className:"bg-green-500 text-white px-4 py-2 rounded",children:"Save"}),(0,a.jsx)("button",{onClick:()=>h(null),className:"bg-gray-300 px-4 py-2 rounded",children:"Close"})]})]})})]})}},618:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(43),s=n(216),i=n(579);const a=()=>{const{token:e}=(0,s.g)(),[t,n]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1);return(0,i.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow text-center",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Email Verification"}),(0,i.jsx)("button",{onClick:async()=>{o(!0),n("");const t=await fetch("/api/auth/verify-email/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"}}),r=await t.json();n(r.message||"Email verified successfully."),o(!1)},className:"bg-green-600 text-white px-4 py-2 rounded",disabled:a,children:a?"Verifying...":"Verify Email"}),t&&(0,i.jsx)("div",{className:"mt-4 text-green-600",children:t})]})}},632:(e,t,n)=>{n.r(t),n.d(t,{SearchProvider:()=>d,useSearch:()=>u});var r=n(379),s=n(43),i=n(291),a=n(579);const o=(0,s.createContext)(void 0),l={query:"",category:"all",brand:"all",priceRange:[0,2e4],rating:0,inStock:!1,sortBy:"relevance",results:[],totalResults:0,isLoading:!1},c=(e,t)=>{switch(t.type){case"SET_QUERY":return(0,r.A)((0,r.A)({},e),{},{query:t.payload});case"SET_CATEGORY":return(0,r.A)((0,r.A)({},e),{},{category:t.payload});case"SET_BRAND":return(0,r.A)((0,r.A)({},e),{},{brand:t.payload});case"SET_PRICE_RANGE":return(0,r.A)((0,r.A)({},e),{},{priceRange:t.payload});case"SET_RATING":return(0,r.A)((0,r.A)({},e),{},{rating:t.payload});case"SET_IN_STOCK":return(0,r.A)((0,r.A)({},e),{},{inStock:t.payload});case"SET_SORT_BY":return(0,r.A)((0,r.A)({},e),{},{sortBy:t.payload});case"SEARCH_PRODUCTS":return(0,r.A)((0,r.A)({},e),{},{isLoading:!0});case"CLEAR_FILTERS":return(0,r.A)((0,r.A)({},l),{},{results:[],totalResults:0,isLoading:!0});default:return e}},d=e=>{let{children:t}=e;const[n,d]=(0,s.useReducer)(c,(0,r.A)((0,r.A)({},l),{},{results:[],totalResults:0}));(0,s.useEffect)(()=>{(async()=>{try{const e={category:"all"!==n.category?n.category:void 0,brand:"all"!==n.brand?n.brand:void 0,search:n.query,minPrice:n.priceRange[0],maxPrice:n.priceRange[1],sortBy:n.sortBy},t=await i.productApi.getProducts(e);d({type:"SEARCH_PRODUCTS"}),d({type:"__UPDATE_RESULTS",payload:{results:t.products,totalResults:t.total}})}catch(e){console.error("Error fetching products:",e)}})()},[n.query,n.category,n.brand,n.priceRange,n.sortBy]);const u={state:n,setQuery:e=>{d({type:"SET_QUERY",payload:e})},setCategory:e=>{d({type:"SET_CATEGORY",payload:e})},setBrand:e=>{d({type:"SET_BRAND",payload:e})},setPriceRange:e=>{d({type:"SET_PRICE_RANGE",payload:e})},setRating:e=>{d({type:"SET_RATING",payload:e})},setInStock:e=>{d({type:"SET_IN_STOCK",payload:e})},setSortBy:e=>{d({type:"SET_SORT_BY",payload:e})},searchProducts:()=>{d({type:"SEARCH_PRODUCTS"})},clearFilters:()=>{d({type:"CLEAR_FILTERS"})},getFilteredProducts:()=>{let e=[...n.results];if(n.query){const t=n.query.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t))||e.brand.toLowerCase().includes(t))}return"all"!==n.category&&(e=e.filter(e=>e.category===n.category)),"all"!==n.brand&&(e=e.filter(e=>e.brand===n.brand)),e=e.filter(e=>e.price>=n.priceRange[0]&&e.price<=n.priceRange[1]),n.rating>0&&(e=e.filter(e=>e.rating>=n.rating)),n.inStock&&(e=e.filter(e=>e.inStock)),e}};return(0,a.jsx)(o.Provider,{value:u,children:t})},u=()=>{const e=(0,s.useContext)(o);if(void 0===e)throw new Error("useSearch must be used within a SearchProvider");return e}},679:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(43),s=n(579);const i=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Verify Your Email"}),(0,s.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),i("");const n=await fetch("/api/auth/send-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),r=await n.json();i(r.message||"Check your email for verification link."),o(!1)},className:"space-y-4",children:[(0,s.jsx)("input",{type:"email",placeholder:"Your email",value:e,onChange:e=>t(e.target.value),required:!0,className:"border rounded px-3 py-2 w-full"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded w-full",disabled:a,children:a?"Sending...":"Send Verification Link"})]}),n&&(0,s.jsx)("div",{className:"mt-4 text-green-600",children:n})]})}},705:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>i})},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,I=Object.assign;function z(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case _:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function G(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function _e(e){if(e=bs(e)){if("function"!==typeof je)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),je(e.stateNode,e.type,t))}}function Se(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Ee=!1;function Me(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Ae(e,t,n)}finally{Ee=!1,(null!==Ne||null!==ke)&&(Pe(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Te=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Te=!1}function De(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Re=!1,Ie=null,ze=!1,Fe=null,Be={onError:function(e){Re=!0,Ie=e}};function Ve(e,t,n,r,s,i,a,o,l){Re=!1,Ie=null,De.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Ke=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,Ge=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ut(o):0!==(i&=a)&&(r=ut(i))}else 0!==(a=n&~s)?r=ut(a):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,_t,St=!1,Ct=[],At=null,Pt=null,Et=null,Mt=new Map,Ot=new Map,Tt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Rt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function It(e){var t=ys(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void _t(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Bt(){St=!1,null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),null!==Et&&zt(Et)&&(Et=null),Mt.forEach(Ft),Ot.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==Pt&&Vt(Pt,e),null!==Et&&Vt(Et,e),Mt.forEach(t),Ot.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)It(n),null===n.blockedOn&&Tt.shift()}var Ut=v.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var s=bt,i=Ut.transition;Ut.transition=null;try{bt=1,Yt(e,t,n,r)}finally{bt=s,Ut.transition=i}}function $t(e,t,n,r){var s=bt,i=Ut.transition;Ut.transition=null;try{bt=4,Yt(e,t,n,r)}finally{bt=s,Ut.transition=i}}function Yt(e,t,n,r){if(Ht){var s=Kt(e,t,n,r);if(null===s)Hr(e,t,r,Qt,n),Dt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return At=Rt(At,e,t,n,r,s),!0;case"dragenter":return Pt=Rt(Pt,e,t,n,r,s),!0;case"mouseover":return Et=Rt(Et,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Mt.set(i,Rt(Mt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ot.set(i,Rt(Ot.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Kt(e,t,n,r))&&Hr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Kt(e,t,n,r){if(Qt=null,null!==(e=ys(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ge()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Gt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Gt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=I({},cn,{view:0,detail:0}),hn=sn(un),mn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(mn),fn=sn(I({},mn,{dataTransfer:0})),gn=sn(I({},un,{relatedTarget:0})),xn=sn(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),vn=sn(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function _n(){return kn}var Sn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Sn),An=sn(I({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),En=sn(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=I({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Mn),Tn=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Rn=d&&"TextEvent"in window&&!Dn,In=d&&(!Ln||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=$r(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Qn(e){zr(e,0)}function Kn(e){if(Y(vs(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Gn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Gn=Zn}else Gn=!1;Jn=Gn&&(!document.documentMode||9<document.documentMode)}function tr(){$n&&($n.detachEvent("onpropertychange",nr),Yn=$n=null)}function nr(e){if("value"===e.propertyName&&Kn(Yn)){var t=[];qn(t,Yn,e,we(e)),Me(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,($n=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Yn)}function ir(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dr(n,i);var a=dr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,xr=null,yr=null,br=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=$r(xr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},kr={};function _r(e){if(Nr[e])return Nr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Nr[e]=n[t];return e}d&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Sr=_r("animationend"),Cr=_r("animationiteration"),Ar=_r("animationstart"),Pr=_r("transitionend"),Er=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Er.set(e,t),l(t,[e])}for(var Tr=0;Tr<Mr.length;Tr++){var Lr=Mr[Tr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Ve.apply(this,arguments),Re){if(!Re)throw Error(i(198));var d=Ie;Re=!1,Ie=null,ze||(ze=!0,Fe=d)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ir(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ir(s,o,c),i=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fr(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Xt(t)){case 1:var s=qt;break;case 4:s=$t;break;default:s=Yt}n=s.bind(null,t,n,e),s=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Me(function(){var r=i,s=we(n),a=[];e:{var o=Er.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Sr:case Cr:case Ar:l=xn;break;case Pr:l=En;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Oe(p,h))&&d.push(qr(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=An,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:vs(l),m=null==c?o:vs(c),(o=new d(f,p+"leave",l,n,s)).target=u,o.relatedTarget=m,f=null,ys(s)===r&&((d=new d(h,p+"enter",c,n,s)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Yr(m))p++;for(m=0,f=h;f;f=Yr(f))m++;for(;0<p-m;)d=Yr(d),p--;for(;0<m-p;)h=Yr(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yr(d),h=Yr(h)}d=null}else d=null;null!==l&&Qr(a,o,l,d,!1),null!==c&&null!==u&&Qr(a,u,c,d,!0)}if("select"===(l=(o=r?vs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=ar;else{g=sr;var x=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?qn(a,g,n,s):(x&&x(e,o,r),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=r?vs(r):window,e){case"focusin":(Hn(x)||"true"===x.contentEditable)&&(gr=x,xr=r,yr=null);break;case"focusout":yr=xr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,vr(a,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":vr(a,n,s)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Gt="value"in(Jt=s)?Jt.value:Jt.textContent,Wn=!0)),0<(x=$r(r,b)).length&&(b=new vn(b,e,null,n,s),a.push({event:b,listeners:x}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=en(),Zt=Gt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(s=new vn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=y))}zr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Oe(e,n))&&r.unshift(qr(e,i,s)),null!=(i=Oe(e,t))&&r.push(qr(e,i,s))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Oe(n,i))&&a.unshift(qr(n,l,o)):s||null!=(l=Oe(n,i))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Xr,"")}function Gr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Wt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ms="__reactProps$"+us,ps="__reactContainer$"+us,fs="__reactEvents$"+us,gs="__reactListeners$"+us,xs="__reactHandles$"+us;function ys(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[ms]||null}var js=[],Ns=-1;function ks(e){return{current:e}}function _s(e){0>Ns||(e.current=js[Ns],js[Ns]=null,Ns--)}function Ss(e,t){Ns++,js[Ns]=e.current,e.current=t}var Cs={},As=ks(Cs),Ps=ks(!1),Es=Cs;function Ms(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Os(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ts(){_s(Ps),_s(As)}function Ls(e,t,n){if(As.current!==Cs)throw Error(i(168));Ss(As,t),Ss(Ps,n)}function Ds(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,U(e)||"Unknown",s));return I({},n,r)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Es=As.current,Ss(As,e),Ss(Ps,Ps.current),!0}function Is(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ds(e,t,Es),r.__reactInternalMemoizedMergedChildContext=e,_s(Ps),_s(As),Ss(As,e)):_s(Ps),Ss(Ps,n)}var zs=null,Fs=!1,Bs=!1;function Vs(e){null===zs?zs=[e]:zs.push(e)}function Ws(){if(!Bs&&null!==zs){Bs=!0;var e=0,t=bt;try{var n=zs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zs=null,Fs=!1}catch(s){throw null!==zs&&(zs=zs.slice(e+1)),Ye(Ze,Ws),s}finally{bt=t,Bs=!1}}return null}var Us=[],Hs=0,qs=null,$s=0,Ys=[],Qs=0,Ks=null,Xs=1,Js="";function Gs(e,t){Us[Hs++]=$s,Us[Hs++]=qs,qs=e,$s=t}function Zs(e,t,n){Ys[Qs++]=Xs,Ys[Qs++]=Js,Ys[Qs++]=Ks,Ks=e;var r=Xs;e=Js;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Xs=1<<32-at(t)+s|n<<s|r,Js=i+e}else Xs=1<<i|n<<s|r,Js=e}function ei(e){null!==e.return&&(Gs(e,1),Zs(e,1,0))}function ti(e){for(;e===qs;)qs=Us[--Hs],Us[Hs]=null,$s=Us[--Hs],Us[Hs]=null;for(;e===Ks;)Ks=Ys[--Qs],Ys[Qs]=null,Js=Ys[--Qs],Ys[Qs]=null,Xs=Ys[--Qs],Ys[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ks?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!si)return di(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function mi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var fi=v.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ic(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&yi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case j:return(t=zc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;xi(e,t)}return null}function m(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case j:return n.key===s?d(e,t,n,r):null;case O:return m(e,t,(s=n._init)(n._payload),r)}if(te(n)||D(n))return null!==s?null:u(e,t,n,r,null);xi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case j:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case O:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||D(r))return u(t,e=e.get(n)||null,r,s,null);xi(t,r)}return null}function f(s,i,o,l){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=m(s,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(s,u),i=a(x,i,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return n(s,u),si&&Gs(s,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(s,o[f],l))&&(i=a(u,i,f),null===d?c=u:d.sibling=u,d=u);return si&&Gs(s,f),c}for(u=r(s,u);f<o.length;f++)null!==(g=p(u,s,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=a(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(s,e)}),si&&Gs(s,f),c}function g(s,o,l,c){var d=D(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,f=o,g=o=0,x=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var b=m(s,f,y.value,c);if(null===b){null===f&&(f=x);break}e&&f&&null===b.alternate&&t(s,f),o=a(b,o,g),null===u?d=b:u.sibling=b,u=b,f=x}if(y.done)return n(s,f),si&&Gs(s,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=a(y,o,g),null===u?d=y:u.sibling=y,u=y);return si&&Gs(s,g),d}for(f=r(s,f);!y.done;g++,y=l.next())null!==(y=p(f,s,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=a(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(s,e)}),si&&Gs(s,g),d}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===N&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=i;null!==d;){if(d.key===c){if((c=a.type)===N){if(7===d.tag){n(r,d.sibling),(i=s(d,a.props.children)).return=r,r=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&yi(c)===d.type){n(r,d.sibling),(i=s(d,a.props)).ref=gi(r,d,a),i.return=r,r=i;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===N?((i=Dc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case j:e:{for(d=a.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(a,r.mode,l)).return=r,r=i}return o(r);case O:return e(r,i,(d=a._init)(a._payload),l)}if(te(a))return f(r,i,a,l);if(D(a))return g(r,i,a,l);xi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Ic(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var vi=bi(!0),wi=bi(!1),ji=ks(null),Ni=null,ki=null,_i=null;function Si(){_i=ki=Ni=null}function Ci(e){var t=ji.current;_s(ji),e._currentValue=t}function Ai(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){Ni=e,_i=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Ni)throw Error(i(308));ki=e,Ni.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Mi=null;function Oi(e){null===Mi?Mi=[e]:Mi.push(e)}function Ti(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Oi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Di=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Li(e,n)}return null===(s=r.interleaved)?(t.next=t,Oi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Li(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,r){var s=e.updateQueue;Di=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=s.baseState;for(a=0,d=c=l=null,o=i;;){var h=o.lane,m=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=I({},u,h);break e;case 2:Di=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Rl|=a,e.lanes=a,e.memoizedState=u}}function Ui(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},qi=ks(Hi),$i=ks(Hi),Yi=ks(Hi);function Qi(e){if(e===Hi)throw Error(i(174));return e}function Ki(e,t){switch(Ss(Yi,t),Ss($i,e),Ss(qi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_s(qi),Ss(qi,t)}function Xi(){_s(qi),_s($i),_s(Yi)}function Ji(e){Qi(Yi.current);var t=Qi(qi.current),n=le(t,e.type);t!==n&&(Ss($i,e),Ss(qi,n))}function Gi(e){$i.current===e&&(_s(qi),_s($i))}var Zi=ks(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=v.ReactCurrentDispatcher,sa=v.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function ma(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ga:Za,e=n(r,s),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(da)}if(ra.current=Ja,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==ua;return ua=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function va(e){var t=ya(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ia&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Rl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ja(){}function Na(e,t){var n=aa,r=ya(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Da(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ea(9,_a.bind(null,n,r,s,t),void 0,null),null===Pl)throw Error(i(349));0!==(30&ia)||ka(n,t,s)}return s}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Aa(e)}function Sa(e,t,n){return n(function(){Ca(t)&&Aa(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Aa(e){var t=Li(e,1);null!==t&&nc(t,e,1,-1)}function Pa(e){var t=xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Ea(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ma(){return ya().memoizedState}function Oa(e,t,n,r){var s=xa();aa.flags|=e,s.memoizedState=Ea(1|t,n,void 0,void 0===r?null:r)}function Ta(e,t,n,r){var s=ya();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Ea(t,n,i,r))}aa.flags|=e,s.memoizedState=Ea(1|t,n,i,r)}function La(e,t){return Oa(8390656,8,e,t)}function Da(e,t){return Ta(2048,8,e,t)}function Ra(e,t){return Ta(4,2,e,t)}function Ia(e,t){return Ta(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ta(4,4,za.bind(null,t,e),n)}function Ba(){}function Va(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ua(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),aa.lanes|=n,Rl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function qa(){return ya().memoizedState}function $a(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ka(t,n);else if(null!==(n=Ti(e,t,n,r))){nc(n,e,r,ec()),Xa(n,t,r)}}function Ya(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ka(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Oi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ti(e,t,s,r))&&(nc(n,e,r,s=ec()),Xa(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ka(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:Ei,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},Ga={readContext:Ei,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$a.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Pa,useDebugValue:Ba,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ha.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=xa();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Pl)throw Error(i(349));0!==(30&ia)||ka(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Ea(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=xa(),t=Pl.identifierPrefix;if(si){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-at(Xs)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ei,useCallback:Va,useContext:Ei,useEffect:Da,useImperativeHandle:Fa,useInsertionEffect:Ra,useLayoutEffect:Ia,useMemo:Wa,useReducer:va,useRef:Ma,useState:function(){return va(ba)},useDebugValue:Ba,useDeferredValue:function(e){return Ua(ya(),oa.memoizedState,e)},useTransition:function(){return[va(ba)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Na,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Ei,useCallback:Va,useContext:Ei,useEffect:Da,useImperativeHandle:Fa,useInsertionEffect:Ra,useLayoutEffect:Ia,useMemo:Wa,useReducer:wa,useRef:Ma,useState:function(){return wa(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ua(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Na,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=zi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,s))&&(nc(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=zi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,s))&&(nc(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=zi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fi(e,s,r))&&(nc(t,e,r,n),Bi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Ei(i):(s=Os(t)?Es:As.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ms(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ei(i):(i=Os(t)?Es:As.current,s.context=Ms(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Wi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function po(e,t,n){(n=zi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var yo=v.ReactCurrentOwner,bo=!1;function vo(e,t,n,r){t.child=null===e?wi(t,null,n,r):vi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Pi(t,s),r=fa(e,t,n,r,i,s),n=ga(),null===e||bo?(si&&n&&ei(t),t.flags|=1,vo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function jo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,No(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Tc(i,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return So(e,t,n,r,s)}function ko(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Tl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Tl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ss(Tl,Ol),Ol|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ss(Tl,Ol),Ol|=r;return vo(e,t,s,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,s){var i=Os(n)?Es:As.current;return i=Ms(t,i),Pi(t,s),n=fa(e,t,n,r,i,s),r=ga(),null===e||bo?(si&&r&&ei(t),t.flags|=1,vo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function Co(e,t,n,r,s){if(Os(n)){var i=!0;Rs(t)}else i=!1;if(Pi(t,s),null===t.stateNode)Uo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ei(c):c=Ms(t,c=Os(n)?Es:As.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Di=!1;var h=t.memoizedState;a.state=h,Wi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Ps.current||Di?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Di||so(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ii(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ei(l):l=Ms(t,l=Os(n)?Es:As.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),Di=!1,h=t.memoizedState,a.state=h,Wi(t,r,a,s);var p=t.memoizedState;o!==u||h!==p||Ps.current||Di?("function"===typeof m&&(no(t,n,m,r),p=t.memoizedState),(c=Di||so(t,n,c,r,h,p,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,i,s)}function Ao(e,t,n,r,s,i){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Is(t,n,!1),Ho(e,t,i);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=vi(t,e.child,null,i),t.child=vi(t,null,o,i)):vo(e,t,o,i),t.memoizedState=r.state,s&&Is(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Ki(e,t.containerInfo)}function Eo(e,t,n,r,s){return mi(),pi(s),t.flags|=256,vo(e,t,n,r),t.child}var Mo,Oo,To,Lo,Do={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ss(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Rc(l,s,0,null),e=Dc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=Do,e):zo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Rc({mode:"visible",children:r.children},s,0,null),(a=Dc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&vi(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Do,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Pl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Li(e,s),nc(r,e,s,-1))}return fc(),Fo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ys[Qs++]=Xs,Ys[Qs++]=Js,Ys[Qs++]=Ks,Xs=e.id,Js=e.overflow,Ks=t),t=zo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Tc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Tc(r,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,s}return e=(o=e.child).sibling,s=Tc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function zo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&pi(r),vi(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ai(e.return,t,n)}function Vo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Wo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ss(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Vo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Vo(t,!0,n,null,i);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Tc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $o(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(t),null;case 1:case 17:return Os(t.type)&&Ts(),$o(t),null;case 3:return r=t.stateNode,Xi(),_s(Ps),_s(As),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Oo(e,t),$o(t),null;case 5:Gi(t);var s=Qi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)To(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return $o(t),null}if(e=Qi(qi.current),ui(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[ms]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Dr.length;s++)Fr(Dr[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":se(r,a),Fr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Gr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Gr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":$(r),Z(r,a,!0);break;case"textarea":$(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ms]=r,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),s=r;break;case"iframe":case"object":case"embed":Fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Dr.length;s++)Fr(Dr[s],e);s=r;break;case"source":Fr("error",e),s=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),s=r;break;case"details":Fr("toggle",e),s=r;break;case"input":X(e,r),s=K(e,r),Fr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=I({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Fr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Fr("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":$(e),Z(e,r,!1);break;case"textarea":$(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $o(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Yi.current),Qi(qi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Gr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Gr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return $o(t),null;case 13:if(_s(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),mi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$o(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ll&&(Ll=3):fc())),null!==t.updateQueue&&(t.flags|=4),$o(t),null);case 4:return Xi(),Oo(e,t),null===e&&Wr(t.stateNode.containerInfo),$o(t),null;case 10:return Ci(t.type._context),$o(t),null;case 19:if(_s(Zi),null===(a=t.memoizedState))return $o(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ss(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Wl&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return $o(t),null}else 2*Je()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Zi.current,Ss(Zi,r?1&n|2:1&n),t):($o(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&($o(t),6&t.subtreeFlags&&(t.flags|=8192)):$o(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qo(e,t){switch(ti(t),t.tag){case 1:return Os(t.type)&&Ts(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),_s(Ps),_s(As),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Gi(t),null;case 13:if(_s(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _s(Zi),null;case 4:return Xi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},To=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qi(qi.current);var i,a=null;switch(n){case"input":s=K(e,s),r=K(e,r),a=[];break;case"select":s=I({},s,{value:void 0}),r=I({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ye(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Go=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ms],delete t[fs],delete t[gs],delete t[xs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Wt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));ml(a,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),xl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),be(l,o);var d=be(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):b(s,u,h,d)}switch(l){case"input":G(s,a);break;case"textarea":ie(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):m!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ms]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Vl=Je())),4&r&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fl(t,e),Xo=d):fl(t,e),xl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Go=e,u=e.child;null!==u;){for(h=Go=u;null!==Go;){switch(p=(m=Go).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){r=m,n=m.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Go=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),xl(e),4&r&&pl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Go=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Go;){var s=Go,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Ko;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Ko;var c=Xo;if(Ko=a,(Xo=l)&&!c)for(Go=s;null!==Go;)l=(a=Go).child,22===a.tag&&null!==a.memoizedState?jl(s):null!==l?(l.return=a,Go=l):jl(s);for(;null!==i;)Go=i,bl(i,t,n),i=i.sibling;Go=s,Ko=o,Xo=c}vl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Go=i):vl(e)}}function vl(e){for(;null!==Go;){var t=Go;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ui(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ui(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}Xo||512&t.flags&&sl(t)}catch(m){kc(t,t.return,m)}}if(t===e){Go=null;break}if(null!==(n=t.sibling)){n.return=t.return,Go=n;break}Go=t.return}}function wl(e){for(;null!==Go;){var t=Go;if(t===e){Go=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Go=n;break}Go=t.return}}function jl(e){for(;null!==Go;){var t=Go;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){kc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){kc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Go=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Go=o;break}Go=t.return}}var Nl,kl=Math.ceil,_l=v.ReactCurrentDispatcher,Sl=v.ReactCurrentOwner,Cl=v.ReactCurrentBatchConfig,Al=0,Pl=null,El=null,Ml=0,Ol=0,Tl=ks(0),Ll=0,Dl=null,Rl=0,Il=0,zl=0,Fl=null,Bl=null,Vl=0,Wl=1/0,Ul=null,Hl=!1,ql=null,$l=null,Yl=!1,Ql=null,Kl=0,Xl=0,Jl=null,Gl=-1,Zl=0;function ec(){return 0!==(6&Al)?Je():-1!==Gl?Gl:Gl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ml?Ml&-Ml:null!==fi.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(i(185));xt(e,n,r),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Il|=n),4===Ll&&oc(e,Ml)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Wl=Je()+500,Fs&&Ws()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=mt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Pl?Ml:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fs=!0,Vs(e)}(lc.bind(null,e)):Vs(lc.bind(null,e)),as(function(){0===(6&Al)&&Ws()}),n=null;else{switch(vt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Gl=-1,Zl=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Al;Al|=2;var a=pc();for(Pl===e&&Ml===t||(Ul=null,Wl=Je()+500,hc(e,t));;)try{yc();break}catch(l){mc(e,l)}Si(),_l.current=a,Al=s,null!==El?t=0:(Pl=null,Ml=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Dl,hc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Dl,hc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Bl,Ul);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Bl,Ul),t);break}wc(e,Bl,Ul);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Bl,Ul),r);break}wc(e,Bl,Ul);break;default:throw Error(i(329))}}}return rc(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~zl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(i(327));jc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Ul),rc(e,Je()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Wl=Je()+500,Fs&&Ws())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Al=t))&&Ws()}}function uc(){Ol=Tl.current,_s(Tl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==El)for(n=El.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ts();break;case 3:Xi(),_s(Ps),_s(As),na();break;case 5:Gi(r);break;case 4:Xi();break;case 13:case 19:_s(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,El=e=Tc(e.current,null),Ml=Ol=t,Ll=0,Dl=null,zl=Il=Rl=0,Bl=Fl=null,null!==Mi){for(t=0;t<Mi.length;t++)if(null!==(r=(n=Mi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Mi=null}return e}function mc(e,t){for(;;){var n=El;try{if(Si(),ra.current=Ja,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,da=!1,ua=0,Sl.current=null,null===n||null===n.return){Ll=1,Dl=t,El=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,xo(p,o,l,0,t),1&p.mode&&fo(a,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(i(426))}else if(si&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,mo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$l||!$l.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}vc(n)}catch(v){t=v,El===n&&null!==n&&(El=n=n.return);continue}break}}function pc(){var e=_l.current;return _l.current=Ja,null===e?Ja:e}function fc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Rl)&&0===(268435455&Il)||oc(Pl,Ml)}function gc(e,t){var n=Al;Al|=2;var r=pc();for(Pl===e&&Ml===t||(Ul=null,hc(e,t));;)try{xc();break}catch(s){mc(e,s)}if(Si(),Al=n,_l.current=r,null!==El)throw Error(i(261));return Pl=null,Ml=0,Ll}function xc(){for(;null!==El;)bc(El)}function yc(){for(;null!==El&&!Ke();)bc(El)}function bc(e){var t=Nl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?vc(e):El=t,Sl.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ol)))return void(El=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(El=n);if(null===e)return Ll=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var r=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{jc()}while(null!==Ql);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Pl&&(El=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,function(){return jc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(es=Ht,mr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===s&&(l=o),m===a&&++u===r&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Go=t;null!==Go;)if(e=(t=Go).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Go=e;else for(;null!==Go;){t=Go;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(i(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Go=e;break}Go=t.return}f=tl,tl=!1}(e,n),gl(n,e),pr(ts),Ht=!!es,ts=es=null,e.current=n,yl(n,e,s),Xe(),Al=l,bt=o,Cl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Ql=e,Kl=s),a=e.pendingLanes,0===a&&($l=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Kl)&&0!==e.tag&&jc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Ws()}(e,t,n,r)}finally{Cl.transition=s,bt=r}return null}function jc(){if(null!==Ql){var e=vt(Kl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Kl=0,0!==(6&Al))throw Error(i(331));var s=Al;for(Al|=4,Go=e.current;null!==Go;){var a=Go,o=a.child;if(0!==(16&Go.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Go=d;null!==Go;){var u=Go;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Go=h;else for(;null!==Go;){var m=(u=Go).sibling,p=u.return;if(il(u),u===d){Go=null;break}if(null!==m){m.return=p,Go=m;break}Go=p}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Go=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Go=o;else e:for(;null!==Go;){if(0!==(2048&(a=Go).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Go=y;break e}Go=a.return}}var b=e.current;for(Go=b;null!==Go;){var v=(o=Go).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Go=v;else e:for(o=b;null!==Go;){if(0!==(2048&(l=Go).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(j){kc(l,l.return,j)}if(l===o){Go=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Go=w;break e}Go=l.return}}if(Al=s,Ws(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(j){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Nc(e,t,n){e=Fi(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=Fi(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ml&n)===n&&(4===Ll||3===Ll&&(130023424&Ml)===Ml&&500>Je()-Vl?hc(e,0):zl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Li(e,t))&&(xt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Sc(e,n)}function Pc(e,t){return Ye(e,t)}function Ec(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Ec(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Dc(n.children,s,a,t);case k:o=8,s|=8;break;case _:return(e=Mc(12,n,t,2|s)).elementType=_,e.lanes=a,e;case P:return(e=Mc(13,n,t,s)).elementType=P,e.lanes=a,e;case E:return(e=Mc(19,n,t,s)).elementType=E,e.lanes=a,e;case T:return Rc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case A:o=11;break e;case M:o=14;break e;case O:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Mc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Dc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=T,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,s,i,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Mc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function Vc(e){if(!e)return Cs;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Os(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Os(n))return Ds(e,n,t)}return t}function Wc(e,t,n,r,s,i,a,o,l){return(e=Bc(n,r,!0,e,0,i,0,o,l)).context=Vc(null),n=e.current,(i=zi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,s),e.current.lanes=s,xt(e,s,r),rc(e,r),e}function Uc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(s,t,a))&&(nc(e,s,a,i),Bi(e,s,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ps.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),mi();break;case 5:Ji(t);break;case 1:Os(t.type)&&Rs(t);break;case 4:Ki(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ss(ji,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ss(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(Ss(Zi,1&Zi.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ss(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,$s,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Uo(e,t),e=t.pendingProps;var s=Ms(t,As.current);Pi(t,n),s=fa(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Os(r)?(a=!0,Rs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ri(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Ao(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),vo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===M)return 14}return 2}(r),e=to(r,e),s){case 0:t=So(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=jo(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,So(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Po(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Ii(e,t),Wi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Eo(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Eo(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),r===s){t=Ho(e,t,n);break e}vo(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),_o(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Io(e,t,n);case 4:return Ki(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vi(t,null,r,n):vo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ss(ji,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Ps.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=zi(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ai(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ai(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}vo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Pi(t,n),r=r(s=Ei(s)),t.flags|=1,vo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),jo(e,t,r,s=to(r.type,s),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Uo(e,t),t.tag=1,Os(r)?(e=!0,Rs(t)):e=!1,Pi(t,n),io(t,r,s),oo(t,r,s,n),Ao(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Gc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Hc(a);o.call(e)}}Uc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Gc);return e._reactRootContainer=a,e[ps]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Gc);return e._reactRootContainer=l,e[ps]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(a)}Kc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Kc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[ps]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tt.length&&0!==t&&t<Tt[n].priority;n++);Tt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&Al)&&(Wl=Je()+500,Ws()))}break;case 13:dc(function(){var t=Li(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),$c(e,1)}},jt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nc(t,e,134217728,ec());$c(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Li(e,t);if(null!==n)nc(n,e,t,ec());$c(e,t)}},kt=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(G(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));Y(r),G(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[bs,vs,ws,Se,Ce,cc]},td={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),it=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(i(299));var n=!1,r="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,Wr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},926:(e,t,n)=>{e.exports=n.p+"static/media/Logo.f000dd0a7206b38d1ba8.png"},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/";var r=n(43),s=n(391),i=n(475),a=n(216),o=n(379);var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],d=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{color:i="currentColor",size:a=24,strokeWidth:d=2,absoluteStrokeWidth:u,className:h="",children:m}=n,p=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(n,c);return(0,r.createElement)("svg",(0,o.A)((0,o.A)({ref:s},l),{},{width:a,height:a,stroke:i,strokeWidth:u?24*Number(d)/Number(a):d,className:["lucide","lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),h].join(" ")},p),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(m)?m:[m]]);var f});return n.displayName="".concat(e),n},u=d("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),h=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m=d("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),p=d("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),f=d("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),g=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x=d("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var y=n(291),b=n(66),v=n(579);const w=(0,r.createContext)(void 0),j=(e,t)=>{switch(console.log("\ud83d\udd04 Cart reducer action:",t.type,t),t.type){case"ADD_ITEM":{const n=e.items.find(e=>e.product.id===t.payload.id);if(console.log("\ud83d\udd0d Existing item found:",!!n),n){const r=n.quantity+(t.quantity||1);console.log("\ud83d\udcc8 Updating quantity from ".concat(n.quantity," to ").concat(r));const s=e.items.map(e=>e.product.id===t.payload.id?(0,o.A)((0,o.A)({},e),{},{quantity:r}):e),i=s.reduce((e,t)=>e+t.product.price*t.quantity,0),a=s.reduce((e,t)=>e+t.quantity,0);return console.log("\ud83d\udcca Updated totals: ".concat(a," items, $").concat(i.toFixed(2))),(0,o.A)((0,o.A)({},e),{},{items:s,total:i,itemCount:a})}{const n={product:t.payload,quantity:t.quantity||1};console.log("\u2795 Adding new item: ".concat(n.product.name," (qty: ").concat(n.quantity,")"));const r=[...e.items,n],s=r.reduce((e,t)=>e+t.product.price*t.quantity,0),i=r.reduce((e,t)=>e+t.quantity,0);return console.log("\ud83d\udcca New totals: ".concat(i," items, $").concat(s.toFixed(2))),(0,o.A)((0,o.A)({},e),{},{items:r,total:s,itemCount:i})}}case"REMOVE_ITEM":{const n=e.items.filter(e=>e.product.id.toString()!==t.payload.toString());return(0,o.A)((0,o.A)({},e),{},{items:n,total:n.reduce((e,t)=>e+t.product.price*t.quantity,0),itemCount:n.reduce((e,t)=>e+t.quantity,0)})}case"UPDATE_QUANTITY":{const n=e.items.map(e=>e.product.id.toString()===t.payload.productId.toString()?(0,o.A)((0,o.A)({},e),{},{quantity:t.payload.quantity}):e);return(0,o.A)((0,o.A)({},e),{},{items:n,total:n.reduce((e,t)=>e+t.product.price*t.quantity,0),itemCount:n.reduce((e,t)=>e+t.quantity,0)})}case"CLEAR_CART":return(0,o.A)((0,o.A)({},e),{},{items:[],total:0,itemCount:0});case"LOAD_CART":{const n=t.payload;return(0,o.A)((0,o.A)({},e),{},{items:n,total:n.reduce((e,t)=>e+t.product.price*t.quantity,0),itemCount:n.reduce((e,t)=>e+t.quantity,0),loading:!1})}case"SET_LOADING":return(0,o.A)((0,o.A)({},e),{},{loading:t.payload});default:return e}},N={items:[],total:0,itemCount:0,loading:!0},k=e=>{let{children:t}=e;const[n,s]=(0,r.useReducer)(j,N),{isAuthenticated:i}=(0,b.A)(),a=async()=>{console.log("\ud83d\udd04 Loading cart..."),s({type:"SET_LOADING",payload:!0});try{if(i){console.log("\ud83d\udce1 Loading cart from API for authenticated user");const e=await y.cartApi.getCart();console.log("\ud83d\udce6 Cart data from API:",e);const t=e.items.map(e=>({product:{id:e.productId,name:e.name,price:e.price,image:e.image,inStock:e.inStock,countInStock:e.countInStock,rating:0,reviews:0,category:"",brand:"",description:"",features:[],specifications:{},tags:[],weight:"",dimensions:"",warranty:"",returnPolicy:"",shippingInfo:""},quantity:e.quantity}));console.log("\u2705 Formatted cart items:",t),s({type:"LOAD_CART",payload:t})}else{console.log("\ud83d\udcbe Loading cart from localStorage for guest user");const t=localStorage.getItem("cart");if(console.log("\ud83d\udce5 Raw localStorage cart:",t),t)try{const e=JSON.parse(t);console.log("\u2705 Parsed cart from localStorage:",e),s({type:"LOAD_CART",payload:e})}catch(e){console.error("\u274c Error parsing cart from localStorage:",e),s({type:"LOAD_CART",payload:[]})}else console.log("\ud83d\udced No cart found in localStorage"),s({type:"LOAD_CART",payload:[]})}}catch(e){if(console.error("\u274c Error fetching cart data:",e),i)console.log("\ud83d\udd04 Error loading authenticated cart, using empty cart"),s({type:"LOAD_CART",payload:[]});else try{const e=localStorage.getItem("cart"),t=e?JSON.parse(e):[];console.log("\ud83d\udd04 Fallback to localStorage:",t),s({type:"LOAD_CART",payload:t})}catch(t){console.log("\ud83d\udd04 Fallback to empty cart"),s({type:"LOAD_CART",payload:[]})}}};(0,r.useEffect)(()=>{a()},[i]),(0,r.useEffect)(()=>{i||n.loading||(console.log("\ud83d\udcbe Saving cart to localStorage for guest user:",n.items),localStorage.setItem("cart",JSON.stringify(n.items)),console.log("\u2705 Cart saved to localStorage"))},[n.items,i,n.loading]);const o=async e=>{s({type:"REMOVE_ITEM",payload:e});try{i&&await y.cartApi.removeFromCart(e)}catch(t){console.error("Error removing from cart:",t),await a()}},l={state:n,addToCart:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{if(console.log("\ud83d\uded2 Adding ".concat(t,' of product "').concat(e.name,'" (ID: ').concat(e.id,") to cart")),console.log("\ud83d\udd10 Authenticated:",i),i){console.log("\ud83d\udce1 Calling API to add product ".concat(e.id," to cart"));const n=await y.cartApi.addToCart(e.id.toString(),t);console.log("\u2705 Cart API response:",n),await a()}else console.log("\ud83d\udc64 Guest user - updating local cart state"),s({type:"ADD_ITEM",payload:e,quantity:t}),console.log("\u2705 Local cart updated for guest user")}catch(n){if(console.error("\u274c Error adding to cart:",n),i?(console.log("\ud83d\udd04 Reloading cart from server due to error"),await a()):(console.log("\ud83d\udd04 Fallback: Adding to local state for guest user"),s({type:"ADD_ITEM",payload:e,quantity:t})),i)throw n}},removeFromCart:o,updateQuantity:async(e,t)=>{if(t<=0)await o(e);else{s({type:"UPDATE_QUANTITY",payload:{productId:e,quantity:t}});try{i&&await y.cartApi.updateCartItem(e,t)}catch(n){console.error("Error updating cart:",n),await a()}}},clearCart:async()=>{s({type:"CLEAR_CART"});try{i&&await y.cartApi.clearCart()}catch(e){console.error("Error clearing cart:",e),await a()}},isInCart:e=>n.items.some(t=>t.product.id.toString()===e.toString()),getCartItem:e=>n.items.find(t=>t.product.id.toString()===e.toString()),refreshCart:async()=>{await a()}};return(0,v.jsx)(w.Provider,{value:l,children:t})},_=()=>{const e=(0,r.useContext)(w);if(void 0===e)throw new Error("useCart must be used within a CartProvider");return e},S=(0,r.createContext)(void 0),C=(e,t)=>{switch(t.type){case"ADD_ITEM":return e.items.some(e=>String(e.id)===String(t.payload.id))?e:(0,o.A)((0,o.A)({},e),{},{items:[...e.items,t.payload],itemCount:e.itemCount+1});case"REMOVE_ITEM":{const n=e.items.filter(e=>String(e.id)!==String(t.payload));return(0,o.A)((0,o.A)({},e),{},{items:n,itemCount:n.length})}case"CLEAR_WISHLIST":return(0,o.A)((0,o.A)({},e),{},{items:[],itemCount:0});case"LOAD_WISHLIST":return(0,o.A)((0,o.A)({},e),{},{items:t.payload,itemCount:t.payload.length});default:return e}},A={items:[],itemCount:0},P=e=>{let{children:t}=e;const[n,s]=(0,r.useReducer)(C,A);(0,r.useEffect)(()=>{const e=localStorage.getItem("wishlist");if(e)try{const t=JSON.parse(e);s({type:"LOAD_WISHLIST",payload:t})}catch(t){console.error("Error loading wishlist from localStorage:",t)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("wishlist",JSON.stringify(n.items))},[n.items]);const i=e=>{s({type:"ADD_ITEM",payload:e})},a=e=>{s({type:"REMOVE_ITEM",payload:e})},o=e=>n.items.some(t=>String(t.id)===String(e)),l={state:n,addToWishlist:i,removeFromWishlist:a,clearWishlist:()=>{s({type:"CLEAR_WISHLIST"})},isInWishlist:o,toggleWishlist:e=>{o(e.id)?a(e.id):i(e)}};return(0,v.jsx)(S.Provider,{value:l,children:t})},E=()=>{const e=(0,r.useContext)(S);if(void 0===e)throw new Error("useWishlist must be used within a WishlistProvider");return e},M=()=>{const[e,t]=(0,r.useState)(""),n=(0,a.Zp)();return(0,v.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&n("/track/".concat(e.trim()))},className:"flex items-center space-x-2",children:[(0,v.jsx)("div",{className:"relative",children:(0,v.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter tracking number",className:"w-40 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,v.jsx)("button",{type:"submit",className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Track"})]})},O=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),{state:o}=_(),{state:l}=E(),{isAuthenticated:c,logout:d,user:y}=(0,b.A)(),w=[{name:"Home",href:"/"},{name:"Products",href:"/products"},{name:"Categories",href:"/products"},{name:"About",href:"#"},{name:"Contact",href:"#"}],j=["Power & Charging","Audio & Sound","Phone Protection","Storage & Connectivity"];return(0,v.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:[(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)(i.N_,{to:"/",className:"flex items-center",children:(0,v.jsx)("img",{src:n(926),alt:"Logo",className:"w-8 h-8 mr-2 rounded-lg object-contain"})})}),(0,v.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[w.map(e=>(0,v.jsx)(i.N_,{to:e.href,className:"text-gray-700 hover:text-primary-600 px-3 py-2 text-sm font-medium transition-colors nav-link",children:e.name},e.name)),(0,v.jsxs)("div",{className:"relative group",children:[(0,v.jsxs)("button",{className:"text-gray-700 hover:text-primary-600 px-3 py-2 text-sm font-medium transition-colors nav-link flex items-center",children:["Categories",(0,v.jsx)(u,{className:"ml-1 h-4 w-4"})]}),(0,v.jsx)("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,v.jsx)("div",{className:"py-2",children:j.map(e=>(0,v.jsx)(i.N_,{to:"/products?category=".concat(e),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:e},e))})})]})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)("div",{className:"hidden lg:block",children:(0,v.jsx)(M,{})}),(0,v.jsx)("button",{onClick:()=>a(!s),className:"p-2 text-gray-600 hover:text-primary-600 transition-colors",children:(0,v.jsx)(h,{className:"h-5 w-5"})}),(0,v.jsxs)(i.N_,{to:"/wishlist",className:"p-2 text-gray-600 hover:text-primary-600 transition-colors relative",children:[(0,v.jsx)(m,{className:"h-5 w-5"}),l.itemCount>0&&(0,v.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:l.itemCount>99?"99+":l.itemCount})]}),(0,v.jsxs)(i.N_,{to:"/cart",className:"p-2 text-gray-600 hover:text-primary-600 transition-colors relative",children:[(0,v.jsx)(p,{className:"h-5 w-5"}),o.itemCount>0&&(0,v.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o.itemCount>99?"99+":o.itemCount})]}),(0,v.jsxs)("div",{className:"relative group",children:[(0,v.jsx)("button",{className:"p-2 text-gray-600 hover:text-primary-600 transition-colors",children:(0,v.jsx)(f,{className:"h-5 w-5"})}),(0,v.jsx)("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,v.jsx)("div",{className:"py-2",children:c?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500",children:["Welcome, ",(null===y||void 0===y?void 0:y.username)||"User"]}),(null===y||void 0===y?void 0:y.isAdmin)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i.N_,{to:"/admin",className:"block px-4 py-2 text-sm text-blue-700 hover:bg-blue-50 hover:text-blue-800 font-medium transition-colors",children:"\ud83d\udd27 Admin Dashboard"}),(0,v.jsx)("div",{className:"border-t border-gray-200 my-1"})]}),(0,v.jsx)(i.N_,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Profile"}),(null===y||void 0===y?void 0:y.isAdmin)&&(0,v.jsx)(i.N_,{to:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Admin Dashboard"}),(0,v.jsx)(i.N_,{to:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Orders"}),(0,v.jsx)(i.N_,{to:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Wishlist"}),(0,v.jsx)("div",{className:"border-t border-gray-200 my-1"}),(0,v.jsx)("button",{onClick:d,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Sign Out"})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i.N_,{to:"/login",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Sign In"}),(0,v.jsx)(i.N_,{to:"/signup",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-colors",children:"Create Account"})]})})})]}),(0,v.jsx)("button",{onClick:()=>t(!e),className:"md:hidden p-2 text-gray-600 hover:text-primary-600 transition-colors",children:e?(0,v.jsx)(g,{className:"h-5 w-5"}):(0,v.jsx)(x,{className:"h-5 w-5"})})]})]}),s&&(0,v.jsx)("div",{className:"pb-4 border-t border-gray-200",children:(0,v.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,v.jsxs)("div",{className:"flex-1 relative",children:[(0,v.jsx)(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,v.jsx)("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,v.jsx)("button",{className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Search"})]})})]}),e&&(0,v.jsx)("div",{className:"md:hidden border-t border-gray-200 bg-white",children:(0,v.jsxs)("div",{className:"px-4 py-2 space-y-1",children:[w.map(e=>(0,v.jsx)(i.N_,{to:e.href,className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",onClick:()=>t(!1),children:e.name},e.name)),(0,v.jsxs)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[(0,v.jsx)("div",{className:"px-3 py-2 text-sm font-medium text-gray-500",children:"Categories"}),j.map(e=>(0,v.jsx)(i.N_,{to:"/products?category=".concat(e),className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",onClick:()=>t(!1),children:e},e))]})]})})]})},T=d("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),L=d("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),D=d("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),R=d("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),I=d("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),z=d("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),F=()=>(0,v.jsx)("footer",{className:"bg-gray-900 text-white",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,v.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,v.jsx)("img",{src:n(926),alt:"Logo",className:"w-8 h-8 rounded-lg object-contain"}),(0,v.jsx)("span",{className:"text-xl font-bold",children:"TechStore"})]}),(0,v.jsx)("p",{className:"text-gray-300 mb-4 max-w-md",children:"Your trusted source for premium tech products. We offer the latest in chargers, audio devices, and cutting-edge technology with exceptional customer service."}),(0,v.jsxs)("div",{className:"flex space-x-4",children:[(0,v.jsx)("a",{href:"https://facebook.com",className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(T,{className:"h-5 w-5"})}),(0,v.jsx)("a",{href:"https://twitter.com",className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(L,{className:"h-5 w-5"})}),(0,v.jsx)("a",{href:"https://instagram.com",className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(D,{className:"h-5 w-5"})})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),(0,v.jsxs)("ul",{className:"space-y-2",children:[(0,v.jsx)("li",{children:(0,v.jsx)(i.N_,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"})}),(0,v.jsx)("li",{children:(0,v.jsx)(i.N_,{to:"/products",className:"text-gray-300 hover:text-white transition-colors",children:"Products"})}),(0,v.jsx)("li",{children:(0,v.jsx)(i.N_,{to:"/products?category=Chargers",className:"text-gray-300 hover:text-white transition-colors",children:"Chargers"})}),(0,v.jsx)("li",{children:(0,v.jsx)(i.N_,{to:"/products?category=Audio",className:"text-gray-300 hover:text-white transition-colors",children:"Audio"})})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Contact Us"}),(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(R,{className:"h-4 w-4 text-gray-400"}),(0,v.jsx)("span",{className:"text-gray-300",children:"info@techstore.com"})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(I,{className:"h-4 w-4 text-gray-400"}),(0,v.jsx)("span",{className:"text-gray-300",children:"+1 (555) 123-4567"})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(z,{className:"h-4 w-4 text-gray-400"}),(0,v.jsx)("span",{className:"text-gray-300",children:"123 Tech Street, Digital City"})]})]})]})]}),(0,v.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8",children:(0,v.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"\xa9 2024 TechStore. All rights reserved."}),(0,v.jsxs)("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[(0,v.jsx)(i.N_,{to:"/privacy-policy",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Privacy Policy"}),(0,v.jsx)(i.N_,{to:"/terms-of-service",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Terms of Service"}),(0,v.jsx)(i.N_,{to:"/shipping-policy",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Shipping Policy"})]})]})})]})}),B=d("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),V=d("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),W=d("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),U=d("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),H=d("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),q=e=>{let{product:t,onAddToCart:n}=e;const[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),{isInCart:d}=_(),{isInWishlist:u,toggleWishlist:h}=E();(0,r.useEffect)(()=>{const e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&a(!0)},{threshold:.1});return c.current&&e.observe(c.current),()=>e.disconnect()},[]);return(0,v.jsxs)("div",{ref:c,className:"card product-card group ".concat(s?"fade-in-up":"opacity-0"),style:{transitionDelay:s?"0.1s":"0s",transform:s?"translateY(0)":"translateY(30px)"},children:[(0,v.jsxs)("div",{className:"relative overflow-hidden rounded-t-xl image-zoom",children:[(0,v.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover transition-all duration-500 ".concat(o?"image-loaded":"image-loading"),onLoad:()=>l(!0),onError:e=>{e.target.src="https://via.placeholder.com/300x200?text=Product+Image",l(!0)}}),t.discount&&(0,v.jsxs)("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium animate-pulse",children:[t.discount,"% OFF"]}),!t.inStock&&(0,v.jsx)("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium animate-pulse",children:"Out of Stock"}),(0,v.jsx)("div",{className:"absolute top-2 left-2 bg-primary-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:t.category}),(0,v.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),h(t)},className:"absolute top-2 right-2 p-2 rounded-full transition-all duration-300 ".concat(u(t.id)?"bg-red-500 text-white":"bg-white/80 text-gray-600 hover:bg-white"),children:(0,v.jsx)(m,{className:"h-4 w-4 ".concat(u(t.id)?"fill-current":"")})}),(0,v.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,v.jsxs)("div",{className:"p-4",children:[t.brand&&(0,v.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:t.brand}),(0,v.jsx)(i.N_,{to:"/products/".concat(t.id),children:(0,v.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-primary-600 transition-colors line-clamp-2 mb-2",children:t.name})}),(0,v.jsxs)("div",{className:"flex items-center mb-2",children:[(0,v.jsx)("div",{className:"flex items-center mr-2 star-rating",children:(f=t.rating,Array.from({length:5},(e,t)=>(0,v.jsx)(H,{className:"h-4 w-4 star ".concat(t<Math.floor(f)?"text-yellow-400 fill-current":"text-gray-300")},t)))}),(0,v.jsxs)("span",{className:"text-sm text-gray-600",children:["(",t.reviews,")"]})]}),(0,v.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsxs)("span",{className:"text-2xl font-bold text-gray-900 price-tag",children:["R",t.price.toLocaleString()]}),t.originalPrice&&t.originalPrice>t.price&&(0,v.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["R",t.originalPrice.toLocaleString()]})]})}),t.features.length>0&&(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.features.slice(0,2).map((e,t)=>(0,v.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e},t)),t.features.length>2&&(0,v.jsxs)("span",{className:"text-xs text-gray-500",children:["+",t.features.length-2," more"]})]})}),(0,v.jsx)("button",{onClick:()=>n(t),disabled:!t.inStock,className:"w-full py-2 px-4 rounded-lg font-medium transition-all duration-300 cart-btn-pulse ".concat(t.inStock?"bg-primary-600 hover:bg-primary-700 text-white hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:(0,v.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,v.jsx)(p,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:d(t.id.toString())?"In Cart":t.inStock?"Add to Cart":"Out of Stock"})]})})]})]});var f},$=n.p+"static/media/Chargers.057e1c74a830c08a5d9e.jpg",Y=n.p+"static/media/Audio.45e16916eae66a5a205e.jpg",Q=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),{addToCart:a}=_();(0,r.useEffect)(()=>{(async()=>{try{console.log("Loading featured products from API...");const e=await y.productApi.getProducts();console.log("API result:",e);const n=e.products.slice(0,4);t(n)}catch(e){console.error("Error loading featured products:",e),t([])}finally{s(!1)}})()},[]);const o=async e=>{try{console.log("\ud83d\uded2 Home: Adding product to cart:",e.name,e.id),await a(e),console.log("\u2705 Home: Successfully added ".concat(e.name," to cart"))}catch(t){console.error("\u274c Home: Failed to add product to cart:",t),alert("\u274c Failed to add ".concat(e.name," to cart. Please try again."))}},l=[{icon:(0,v.jsx)(B,{className:"h-8 w-8 text-primary-600"}),title:"Secure Shopping",description:"Your data is protected with bank-level security"},{icon:(0,v.jsx)(V,{className:"h-8 w-8 text-primary-600"}),title:"Fast Shipping",description:"Free shipping on orders over $50"},{icon:(0,v.jsx)(W,{className:"h-8 w-8 text-primary-600"}),title:"24/7 Support",description:"Get help whenever you need it"}],c=[{name:"Chargers",image:$,description:"Fast charging solutions for all devices",link:"/products?category=Chargers"},{name:"Audio",image:Y,description:"Premium sound quality headphones and speakers",link:"/products?category=Audio"}];return(0,v.jsxs)("div",{className:"min-h-screen",children:[(0,v.jsxs)("section",{className:"parallax bg-gradient-to-r from-primary-600 to-primary-800 text-white py-20 relative overflow-hidden",style:{backgroundImage:'url("https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80")'},children:[(0,v.jsx)("div",{className:"absolute inset-0",children:[...Array(20)].map((e,t)=>(0,v.jsx)("div",{className:"particle",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),width:"".concat(4*Math.random()+2,"px"),height:"".concat(4*Math.random()+2,"px"),animationDelay:"".concat(8*Math.random(),"s"),animationDuration:"".concat(4*Math.random()+6,"s")}},t))}),(0,v.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),(0,v.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600/80 to-primary-800/80"}),(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-6 float-animation text-reveal",children:"Premium Tech Products"}),(0,v.jsx)("p",{className:"text-xl md:text-2xl mb-8 text-primary-100 max-w-3xl mx-auto fade-in-up stagger-1",children:"Discover the latest in chargers, audio devices, and cutting-edge technology. Quality products for the modern lifestyle."}),(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center fade-in-up stagger-2",children:[(0,v.jsxs)(i.N_,{to:"/products",className:"btn-primary glow-on-hover button-bounce inline-flex items-center",children:["Shop Now",(0,v.jsx)(U,{className:"ml-2 h-5 w-5"})]}),(0,v.jsx)(i.N_,{to:"/products?category=Audio",className:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary-600 transition-all duration-300 glow-on-hover button-bounce",children:"Explore Audio"})]})]})})]}),(0,v.jsx)("section",{className:"py-16 bg-white",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,v.jsxs)("div",{className:"text-center mb-12 fade-in-up",children:[(0,v.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 gradient-text",children:"Why Choose TechStore?"}),(0,v.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"We're committed to providing the best shopping experience with quality products and exceptional service."})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:l.map((e,t)=>(0,v.jsxs)("div",{className:"text-center fade-in-up",style:{animationDelay:"".concat(.2*(t+1),"s")},children:[(0,v.jsx)("div",{className:"flex justify-center mb-4",children:(0,v.jsx)("div",{className:"feature-icon",children:e.icon})}),(0,v.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,v.jsx)("p",{className:"text-gray-600",children:e.description})]},t))})]})}),(0,v.jsx)("section",{className:"py-16 bg-gray-50",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,v.jsxs)("div",{className:"text-center mb-12 fade-in-up",children:[(0,v.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4 gradient-text",children:"Shop by Category"}),(0,v.jsx)("p",{className:"text-lg text-gray-600",children:"Find exactly what you're looking for in our organized categories"})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:c.map((e,t)=>(0,v.jsx)(i.N_,{to:e.link,className:"group block category-card fade-in-up",style:{animationDelay:"".concat(.3*(t+1),"s")},children:(0,v.jsx)("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"image-zoom",children:(0,v.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover transition-transform duration-300"})}),(0,v.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all duration-300"}),(0,v.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center text-white",children:[(0,v.jsx)("h3",{className:"text-2xl font-bold mb-2",children:e.name}),(0,v.jsx)("p",{className:"text-lg",children:e.description})]})})]})})},t))})]})}),(0,v.jsx)("section",{className:"py-16 bg-white",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-8 fade-in-up",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2 gradient-text",children:"Featured Products"}),(0,v.jsx)("p",{className:"text-gray-600",children:"Our most popular and highly-rated products"})]}),(0,v.jsxs)(i.N_,{to:"/products",className:"text-primary-600 hover:text-primary-700 font-semibold flex items-center nav-link",children:["View All",(0,v.jsx)(U,{className:"ml-2 h-4 w-4"})]})]}),n?(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>(0,v.jsxs)("div",{className:"animate-pulse",children:[(0,v.jsx)("div",{className:"skeleton h-48 rounded-t-xl mb-4"}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("div",{className:"skeleton h-4 rounded"}),(0,v.jsx)("div",{className:"skeleton h-4 rounded w-3/4"}),(0,v.jsx)("div",{className:"skeleton h-6 rounded w-1/2"})]})]},t))}):(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((e,t)=>(0,v.jsx)(i.N_,{to:"/products/".concat(e.id),className:"fade-in-up block hover:shadow-lg transition-shadow duration-200",style:{animationDelay:"".concat(.1*t,"s")},children:(0,v.jsx)(q,{product:e,onAddToCart:o})},e.id))})]})}),(0,v.jsx)("section",{className:"py-16 bg-primary-600 text-white",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,v.jsx)("h2",{className:"text-3xl font-bold mb-4 fade-in-up",children:"Ready to Upgrade Your Tech?"}),(0,v.jsx)("p",{className:"text-xl text-primary-100 mb-8 max-w-2xl mx-auto fade-in-up stagger-1",children:"Join thousands of satisfied customers who trust TechStore for their tech needs."}),(0,v.jsxs)(i.N_,{to:"/products",className:"btn-primary glow-on-hover inline-flex items-center fade-in-up stagger-2",children:["Start Shopping",(0,v.jsx)(U,{className:"ml-2 h-5 w-5"})]})]})})]})},K=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),{addToCart:l,refreshCart:c}=_(),[d]=(0,i.ok)();(0,r.useEffect)(()=>{(async()=>{o(!0);try{var e;console.log("\ud83d\udd0d Products page: Loading products...");const t=d.get("category"),n={};t&&(n.category=t),console.log("\ud83d\udd0d Products page: Using filters:",n);const r=await y.productApi.getProducts(n);console.log("\ud83d\udd0d Products page: API result:",r),console.log("\ud83d\udd0d Products page: Products array:",r.products),console.log("\ud83d\udd0d Products page: Products count:",null===(e=r.products)||void 0===e?void 0:e.length),s(r.products)}catch(t){console.error("\u274c Products page: Error loading products:",t),s([])}finally{o(!1)}})()},[d]);const u=async e=>{try{await l(e),await c(),t("".concat(e.name," added to cart!")),setTimeout(()=>t(null),2e3)}catch(n){t("Failed to add product to cart. Please try again."),setTimeout(()=>t(null),2e3)}};return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Products"}),(0,v.jsx)("p",{className:"text-gray-600",children:"Browse all available products in our store"}),(0,v.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["Found ",n.length," products"]}),e&&(0,v.jsx)("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all",children:e})]}),a?(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>(0,v.jsxs)("div",{className:"animate-pulse",children:[(0,v.jsx)("div",{className:"skeleton h-48 rounded-t-xl mb-4"}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("div",{className:"skeleton h-4 rounded"}),(0,v.jsx)("div",{className:"skeleton h-4 rounded w-3/4"}),(0,v.jsx)("div",{className:"skeleton h-6 rounded w-1/2"})]})]},t))}):(0,v.jsx)(v.Fragment,{children:n.length>0?(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((e,t)=>(0,v.jsx)("div",{className:"fade-in-up block hover:shadow-lg transition-shadow duration-200",style:{animationDelay:"".concat(.1*t,"s")},children:(0,v.jsx)(q,{product:e,onAddToCart:u})},e.id))}):(0,v.jsx)("div",{className:"text-center py-12",children:(0,v.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,v.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products found"}),(0,v.jsx)("p",{className:"text-gray-600 mb-4",children:"We couldn't find any products matching your criteria."}),(0,v.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:"Refresh Page"})]})})})]})})},X=d("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),J=()=>{const{user:e}=(0,b.A)(),{id:t}=(0,a.g)(),[n,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(1),[m,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[x,w]=(0,r.useState)(null),[j,N]=(0,r.useState)([]),[k,_]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(!t)return d("Product Not Found"),void l(!1);try{let e=await y.productApi.getProductById(String(t));e&&!e.id&&e._id&&(e=(0,y.transformBackendProduct)(e)),s(e)}catch(e){d("Product Not Found")}finally{l(!1)}})()},[t]),(0,r.useEffect)(()=>{(async()=>{if(t){_(!0);try{const e=Number(t);if(isNaN(e))throw new Error("Invalid product ID");const n=await y.reviewApi.getProductReviews(e);N(n)}catch(e){N([])}finally{_(!1)}}})()},[t]);return o?(0,v.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):c||!n?(0,v.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[(0,v.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),(0,v.jsxs)(i.N_,{to:"/products",className:"text-primary-600 hover:underline flex items-center",children:[(0,v.jsx)(X,{className:"mr-2"})," Back to Products"]})]}):(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50 py-10",children:[(0,v.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8 flex flex-col md:flex-row gap-8",children:[(0,v.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,v.jsx)("img",{src:n.image||n.images&&n.images[0]||"https://via.placeholder.com/400x300?text=Product+Image",alt:n.name,className:"w-full max-w-xs h-auto rounded-lg mb-4 object-cover"}),!n.inStock&&(0,v.jsx)("span",{className:"px-3 py-1 bg-red-500 text-white rounded-full text-xs font-medium",children:"Out of Stock"})]}),(0,v.jsx)("div",{className:"flex-1 flex flex-col justify-between",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.name}),(0,v.jsxs)("div",{className:"flex items-center mb-2",children:[(0,v.jsx)("span",{className:"text-sm bg-primary-100 text-primary-800 px-2 py-1 rounded-full mr-2",children:n.category}),(0,v.jsxs)("span",{className:"text-sm text-gray-500",children:["Brand: ",n.brand]})]}),(0,v.jsxs)("div",{className:"flex items-center mb-2",children:[[...Array(5)].map((t,r)=>(0,v.jsx)("button",{type:"button",onClick:()=>(async t=>{if(n&&!f)if(e){g(!0),w(null);try{const e=n._id||n.id;if(!e||"string"!==typeof e)throw new Error("Invalid product ID");await y.reviewApi.addReview(e,t,""),p(t)}catch(r){r&&r.message?w(r.message):w("Failed to submit rating. Please try again.")}finally{g(!1)}}else w("You must be logged in to rate.")})(r+1),disabled:f||!e,className:"focus:outline-none","aria-label":"Rate ".concat(r+1," stars"),children:(0,v.jsx)(H,{className:"h-5 w-5 transition-colors duration-150 ".concat((null!==m?r<m:r<Math.floor(n.rating))?"text-yellow-400 fill-current":"text-gray-300")})},r)),(0,v.jsxs)("span",{className:"ml-2 text-gray-600",children:["(",n.numReviews||n.reviews," reviews)"]}),x&&(0,v.jsx)("span",{className:"ml-4 text-red-500 text-sm",children:x}),m&&(0,v.jsx)("span",{className:"ml-4 text-green-600 text-sm",children:"Thank you for rating!"})]}),(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["R",n.price.toLocaleString()]}),n.originalPrice&&n.originalPrice>n.price&&(0,v.jsxs)("span",{className:"ml-2 text-sm text-gray-500 line-through",children:["R",n.originalPrice.toLocaleString()]})]}),(0,v.jsx)("p",{className:"text-gray-700 mb-4",children:n.description}),n.features&&n.features.length>0&&(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsx)("h3",{className:"font-semibold mb-2",children:"Features:"}),(0,v.jsx)("ul",{className:"list-disc list-inside text-gray-600",children:n.features.map((e,t)=>(0,v.jsx)("li",{children:e},t))})]}),n.specifications&&Object.keys(n.specifications).length>0&&(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsx)("h3",{className:"font-semibold mb-2",children:"Specifications:"}),(0,v.jsx)("ul",{className:"list-disc list-inside text-gray-600",children:Object.entries(n.specifications).map((e,t)=>{let[n,r]=e;return(0,v.jsxs)("li",{children:[(0,v.jsxs)("span",{className:"font-medium",children:[n,":"]})," ",r]},t)})})]}),(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsxs)("span",{className:"text-sm text-gray-500",children:["Weight: ",n.weight||"N/A"]}),(0,v.jsxs)("span",{className:"ml-4 text-sm text-gray-500",children:["Dimensions: ",n.dimensions||"N/A"]})]}),(0,v.jsx)("div",{className:"mb-4",children:(0,v.jsxs)("span",{className:"text-sm text-gray-500",children:["Warranty: ",n.warranty||"N/A"]})}),(0,v.jsx)("div",{className:"mt-8",children:(0,v.jsxs)(i.N_,{to:"/products",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,v.jsx)(X,{className:"mr-2"}),"Back to Products"]})})]})})]}),(0,v.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 bg-white rounded-lg shadow-lg p-8",children:[(0,v.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"User Reviews"}),k?(0,v.jsx)("div",{children:"Loading reviews..."}):0===j.length?(0,v.jsx)("div",{className:"text-gray-500",children:"No reviews yet."}):(0,v.jsx)("div",{className:"space-y-6",children:j.map(e=>(0,v.jsxs)("div",{className:"border-b pb-4",children:[(0,v.jsxs)("div",{className:"flex items-center mb-1",children:[[...Array(5)].map((t,n)=>(0,v.jsx)(H,{className:"h-4 w-4 ".concat(n<e.rating?"text-yellow-400 fill-current":"text-gray-300")},n)),(0,v.jsx)("span",{className:"ml-2 text-sm text-gray-700 font-semibold",children:e.userName}),(0,v.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:new Date(e.date).toLocaleDateString()})]}),(0,v.jsx)("div",{className:"text-gray-700 text-sm",children:e.comment||(0,v.jsx)("span",{className:"italic text-gray-400",children:"No comment"})})]},e.id))})]})]})},G=d("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Z=d("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ee=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),te=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ne=d("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),re=()=>{const{state:e,removeFromCart:t,updateQuantity:s,clearCart:a}=_(),[o,l]=(0,r.useState)(!1),c=n(475).Zp(),d=async(e,n)=>{n<=0?await t(e):await s(e,n)};if(e.loading)return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"flex justify-center mb-4",children:(0,v.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),(0,v.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Loading your cart..."})]})});if(0===e.items.length)return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"text-gray-400 mb-4",children:(0,v.jsx)(G,{className:"h-16 w-16 mx-auto"})}),(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,v.jsx)("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't added any products to your cart yet."}),(0,v.jsxs)(i.N_,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,v.jsx)(X,{className:"mr-2 h-5 w-5"}),"Continue Shopping"]})]})});const u=e.total>=8e4?0:15e3,h=e.total+u;return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,v.jsxs)("div",{className:"mb-8",children:[(0,v.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Shopping Cart"}),(0,v.jsxs)("p",{className:"text-gray-600",children:["You have ",e.itemCount," item",1!==e.itemCount?"s":""," in your cart"]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,v.jsxs)("div",{className:"lg:col-span-2",children:[(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.items.map(e=>(0,v.jsx)("div",{className:"p-6 border-b border-gray-200 last:border-b-0",children:(0,v.jsxs)("div",{className:"flex items-center gap-4",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("img",{src:e.product.image,alt:e.product.name,className:"w-20 h-20 object-cover rounded-lg",onError:e=>{e.target.src="https://via.placeholder.com/80x80?text=Product"}})}),(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:(0,v.jsx)(i.N_,{to:"/products/".concat(e.product.id),className:"hover:text-primary-600",children:e.product.name})}),(0,v.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.product.brand}),(0,v.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,v.jsxs)("span",{children:["SKU: ",e.product.id]}),(0,v.jsxs)("span",{children:["Weight: ",e.product.weight||"N/A"]})]})]}),(0,v.jsxs)("div",{className:"text-right",children:[(0,v.jsxs)("div",{className:"text-lg font-bold text-gray-900 mb-1",children:["R",(e.product.price*e.quantity/100).toFixed(2)]}),e.product.originalPrice&&e.product.originalPrice>e.product.price&&(0,v.jsxs)("div",{className:"text-sm text-gray-500 line-through",children:["R",(e.product.originalPrice*e.quantity/100).toFixed(2)]})]})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,v.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[(0,v.jsx)("button",{onClick:()=>d(e.product.id.toString(),e.quantity-1),className:"px-3 py-1 text-gray-600 hover:text-gray-800 transition-colors",disabled:e.quantity<=1,children:(0,v.jsx)(Z,{className:"h-4 w-4"})}),(0,v.jsx)("span",{className:"px-3 py-1 text-gray-900 font-medium min-w-[3rem] text-center",children:e.quantity}),(0,v.jsx)("button",{onClick:()=>d(e.product.id.toString(),e.quantity+1),className:"px-3 py-1 text-gray-600 hover:text-gray-800 transition-colors",disabled:!e.product.inStock,children:(0,v.jsx)(ee,{className:"h-4 w-4"})})]}),(0,v.jsxs)("button",{onClick:()=>(async e=>{await t(e)})(e.product.id.toString()),className:"text-red-600 hover:text-red-800 transition-colors flex items-center gap-1",children:[(0,v.jsx)(te,{className:"h-4 w-4"}),"Remove"]})]})]})]})},e.product.id))}),(0,v.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,v.jsx)("button",{onClick:()=>a(),className:"text-gray-600 hover:text-gray-800 transition-colors",children:"Clear Cart"}),(0,v.jsx)(i.N_,{to:"/products",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Continue Shopping"})]})]}),(0,v.jsx)("div",{className:"lg:col-span-1",children:(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-8",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,v.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,v.jsxs)("span",{children:["Subtotal (",e.itemCount," items)"]}),(0,v.jsxs)("span",{children:["R",(e.total/100).toFixed(2)]})]}),(0,v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,v.jsx)("span",{children:"Shipping"}),(0,v.jsx)("span",{className:0===u?"text-green-600":"",children:0===u?"Free":"R".concat((u/100).toFixed(2))})]}),u>0&&(0,v.jsxs)("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:["Add R",((8e4-e.total)/100).toFixed(2)," more for free shipping"]}),(0,v.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,v.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,v.jsx)("span",{children:"Total"}),(0,v.jsxs)("span",{children:["R",(h/100).toFixed(2)]})]})})]}),(0,v.jsx)("button",{onClick:()=>{l(!0),setTimeout(()=>{c("/checkout")},1e3)},disabled:o,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,v.jsxs)("div",{className:"flex items-center justify-center",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):"Proceed to Checkout"}),(0,v.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,v.jsx)(B,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:"Secure checkout"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,v.jsx)(V,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:"Free shipping over R800"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,v.jsx)(ne,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:"Multiple payment options"})]})]})]})})]}),(0,v.jsxs)("div",{className:"mt-16",children:[(0,v.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"You might also like"}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"})]})]})})},se=e=>{let{id:t,label:n,type:r,placeholder:s,fieldState:i,onChange:a,onBlur:o,autoComplete:l,required:c=!0,className:d="",roundedTop:u=!1,roundedBottom:h=!1,icon:m,maxLength:p}=e;const f=i.touched&&i.error,g="\n    appearance-none \n    relative \n    block \n    w-full \n    px-3 \n    ".concat(m?"pl-10":"pl-3"," \n    py-2 \n    border \n    ").concat(f?"border-red-500 ring-red-500":"border-gray-300"," \n    placeholder-gray-500 \n    text-gray-900 \n    ").concat(u?"rounded-t-md":""," \n    ").concat(h?"rounded-b-md":""," \n    ").concat(u||h?"":"rounded-md","\n    focus:outline-none \n    focus:ring-2 \n    ").concat(f?"focus:ring-red-500":"focus:ring-primary-500"," \n    focus:border-transparent \n    focus:z-10 \n    sm:text-sm\n    ").concat(d,"\n  ");return(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:[n," ",c&&(0,v.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,v.jsxs)("div",{className:"relative",children:[m&&(0,v.jsx)("div",{className:"absolute left-3 inset-y-0 flex items-center pointer-events-none",children:m}),(0,v.jsx)("input",{id:t,name:t,type:r,autoComplete:l,required:c,value:i.value,onChange:e=>a(e.target.value),onBlur:o,placeholder:s,className:g,maxLength:p})]}),f&&(0,v.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"".concat(t,"-error"),children:i.error})]})},ie=e=>{let{id:t,label:n,options:r,fieldState:s,onChange:i,onBlur:a,required:o=!0,className:l=""}=e;const c=s.touched&&s.error,d="\n    mt-1 \n    block \n    w-full \n    pl-3 \n    pr-10 \n    py-2 \n    text-base \n    ".concat(c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"," \n    focus:outline-none \n    sm:text-sm \n    rounded-md\n    ").concat(l,"\n  ");return(0,v.jsxs)("div",{className:"mb-4",children:[(0,v.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:[n," ",o&&(0,v.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("select",{id:t,name:t,value:s.value,onChange:e=>i(e.target.value),onBlur:a,className:d,children:r.map(e=>(0,v.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,v.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,v.jsx)(u,{className:"h-4 w-4"})})]}),c&&(0,v.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"".concat(t,"-error"),children:s.error})]})};var ae=function(){return ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ae.apply(this,arguments)};function oe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}"function"===typeof SuppressedError&&SuppressedError;var le=[];function ce(e){var t=function(){var e="https://js.paystack.co/v1/inline.js",t=(0,r.useState)({loaded:!1,error:!1}),n=t[0],s=t[1];return(0,r.useEffect)(function(){if(!le.includes(e)){le.push(e);var t=document.createElement("script");t.src=e,t.async=!0;var n=function(){s({loaded:!0,error:!1})},r=function(){var n=le.indexOf(e);n>=0&&le.splice(n,1),t.remove(),s({loaded:!0,error:!0})};return t.addEventListener("load",n),t.addEventListener("complete",n),t.addEventListener("error",r),document.body.appendChild(t),function(){t.removeEventListener("load",n),t.removeEventListener("error",r)}}s({loaded:!0,error:!1})},[e]),[n.loaded,n.error]}(),n=t[0],s=t[1];return(0,r.useEffect)(function(){if(s)throw new Error("Unable to load paystack inline script")},[s]),function(t){var r=t.config,i=t.onSuccess,a=t.onClose;if(s)throw new Error("Unable to load paystack inline script");var o=ae(ae({},e),r),l=o.publicKey,c=o.firstname,d=o.lastname,u=o.phone,h=o.email,m=o.amount,p=o.reference,f=o.metadata,g=void 0===f?{}:f,x=o.currency,y=void 0===x?"NGN":x,b=o.channels,v=o.label,w=void 0===v?"":v,j=o.plan,N=void 0===j?"":j,k=o.quantity,_=void 0===k?"":k,S=o.subaccount,C=void 0===S?"":S,A=o.transaction_charge,P=void 0===A?0:A,E=o.bearer,M=void 0===E?"account":E,O=o.split,T=o.split_code;n&&function(e){var t=window.PaystackPop&&window.PaystackPop.setup(e);t&&t.openIframe()}({callback:i||function(){return null},onClose:a||function(){return null},key:l,ref:p,email:h,firstname:c,lastname:d,phone:u,amount:m,currency:y,plan:N,quantity:_,channels:b,subaccount:C,transaction_charge:P,bearer:M,label:w,metadata:g,split:O,split_code:T,"data-custom-button":o["data-custom-button"]||""})}}var de=function(e){var t=e.text,n=e.className,s=e.children,i=e.onSuccess,a=e.onClose,o=oe(e,["text","className","children","onSuccess","onClose"]),l=ce(o);return r.createElement("button",{className:n,onClick:function(){return l({config:o,onSuccess:i,onClose:a})}},t||s)},ue=(0,r.createContext)({config:{},initializePayment:function(){return null},onSuccess:function(){return null},onClose:function(){return null}}),he=function(e){var t=e.children,n=e.onSuccess,s=e.onClose,i=oe(e,["children","onSuccess","onClose"]),a=ce(i);return r.createElement(ue.Provider,{value:{config:i,initializePayment:a,onSuccess:n,onClose:s}},t)},me=function(e){var t=e.children,n=e.ref,s=(0,r.useContext)(ue),i=s.config,a=s.initializePayment,o=s.onSuccess,l=s.onClose;return t({initializePayment:function(){return a({config:i,onSuccess:o,onClose:l})},ref:n})};(0,r.forwardRef)(function(e,t){var n=e.children,s=e.onSuccess,i=e.onClose,a=oe(e,["children","onSuccess","onClose"]),o=s||function(){return null},l=i||function(){return null};return r.createElement(he,ae({},a,{onSuccess:o,onClose:l}),r.createElement(me,{ref:t},n))});const pe=d("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),fe=e=>{let{amount:t,orderId:n,email:s,firstName:i,lastName:a,phone:l,onSuccess:c,onClose:d,className:u="",children:h}=e;const{user:m}=(0,b.A)(),[p,f]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[j,N]=(0,r.useState)(0),[k,_]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1),A="pk_live_your_actual_live_paystack_public_key",P="ZAR",E="http://localhost:5000/api",M=(0,r.useCallback)(async e=>{console.log("=== API: initializePayment ===");const t=await fetch("".concat(E,"/api/payments/initialize"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to initialize payment")}return t.json()},[E]),O=(0,r.useCallback)(async e=>{console.log("=== API: verifyPaymentTransaction ===");const t=await fetch("".concat(E,"/api/payments/verify/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to verify payment")}return t.json()},[E]),T=(0,r.useCallback)(async()=>{if(console.log("=== PaystackPayment: initPayment ==="),p||S)console.log("Already initializing or initialized, skipping...");else{f(!0),x(null);try{const e={orderId:n,email:s||(null===m||void 0===m?void 0:m.email),firstName:i||(null===m||void 0===m?void 0:m.username),lastName:a||"",phone:l,amount:100*t};console.log("Payment request data:",e),_({type:"initialization",data:e});const r=await M(e);console.log("Payment initialization response:",r),w(r),C(!0),_({type:"success",data:r})}catch(g){console.error("Payment initialization error:",g),x((null===g||void 0===g?void 0:g.message)||"Payment initialization failed"),_({type:"error",error:(null===g||void 0===g?void 0:g.message)||"Unknown error"})}finally{f(!1)}}},[n,s,null===m||void 0===m?void 0:m.email,null===m||void 0===m?void 0:m.username,i,a,l,t,M,p,S]);(0,r.useEffect)(()=>{console.log("=== PaystackPayment: useEffect ==="),console.log("Public Key:",A?"".concat(A.substring(0,10),"..."):"NOT SET"),console.log("Currency:",P),console.log("API URL:",E),console.log("Has Initialized:",S),console.log("Is Initializing:",p),m&&n&&t>0&&!S&&!p&&T()},[A,m,n,t,S,p,T]);const L=()=>{console.log("=== PaystackPayment: handleRetryPayment ==="),N(e=>e+1),x(null),w(null),_(null),C(!1),setTimeout(()=>{T()},100)},D=y&&A?{reference:y.reference,email:y.email,amount:y.amount,publicKey:A,currency:y.currency||P,metadata:y.metadata||{},onSuccess:async e=>{console.log("=== PaystackPayment: onSuccess ==="),console.log("Paystack response:",e);try{const t=await O(e.reference);console.log("Verification result:",t),c(t)}catch(g){console.error("Error verifying payment:",g),x(g instanceof Error?"Payment verification failed: ".concat(g.message):"Payment verification failed. Please contact support.")}},onClose:()=>{console.log("=== PaystackPayment: onClose ==="),x("Payment was cancelled"),d&&d()}}:null;return p?(0,v.jsxs)("div",{className:u,children:[(0,v.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("div",{className:"mr-3",children:(0,v.jsxs)("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,v.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,v.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"font-medium text-blue-800",children:"Initializing payment..."}),(0,v.jsx)("p",{className:"text-sm text-blue-600",children:"Please wait while we prepare your payment."}),j>0&&(0,v.jsxs)("p",{className:"text-xs text-blue-500",children:["Attempt ",j+1]})]})]})}),(0,v.jsx)("button",{disabled:!0,className:"w-full bg-gray-400 text-white font-bold py-4 px-6 rounded-lg opacity-70 cursor-not-allowed flex items-center justify-center",children:"Processing..."})]}):g?(0,v.jsxs)("div",{className:u,children:[(0,v.jsx)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg mb-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(pe,{className:"h-5 w-5 text-red-500 mr-2"}),(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsx)("p",{className:"font-medium text-red-800",children:"Payment Error"}),(0,v.jsx)("p",{className:"text-sm text-red-600",children:g}),k&&(0,v.jsxs)("details",{className:"mt-2 text-xs text-red-500",children:[(0,v.jsx)("summary",{className:"cursor-pointer",children:"Debug Info"}),(0,v.jsx)("pre",{className:"mt-1 bg-red-100 p-2 rounded text-xs overflow-auto",children:JSON.stringify(k,null,2)})]})]})]})}),j<3?(0,v.jsxs)("button",{onClick:L,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg transition-colors duration-200",children:["Retry Payment ",j>0&&"(".concat(j+1,"/3)")]}):(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("p",{className:"text-red-600 mb-4",children:"Maximum payment attempts reached. Please try again later."}),(0,v.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Refresh Page"})]})]}):D?(0,v.jsxs)("div",{className:u,children:[(0,v.jsx)("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg mb-4",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,v.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,v.jsxs)("div",{className:"ml-3",children:[(0,v.jsx)("p",{className:"font-medium",children:"Payment Information"}),(0,v.jsxs)("p",{className:"text-sm",children:["Amount: ","".concat(P," ").concat(t.toFixed(2))," \u2022 Order ID: ",n]}),(0,v.jsx)("p",{className:"text-sm mt-2",children:"We use Paystack for secure payment processing. Click below to complete your payment."}),k&&(0,v.jsxs)("details",{className:"mt-2 text-xs",children:[(0,v.jsx)("summary",{className:"cursor-pointer",children:"Payment Details"}),(0,v.jsx)("pre",{className:"mt-1 bg-blue-100 p-2 rounded text-xs overflow-auto",children:JSON.stringify(k,null,2)})]})]})]})}),(0,v.jsx)(de,(0,o.A)((0,o.A)({},D),{},{className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:h||"Pay with Paystack"}))]}):(0,v.jsxs)("div",{className:u,children:[(0,v.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(pe,{className:"h-5 w-5 text-yellow-500 mr-2"}),(0,v.jsx)("p",{className:"text-sm",children:"Payment not ready. Please wait..."})]})}),(0,v.jsx)("button",{onClick:L,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg transition-colors duration-200",children:"Initialize Payment"})]})},ge=e=>e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?null:"Please enter a valid email address":"Email is required",xe=e=>{if(!e)return"Password is required";if(e.length<8)return"Password must be at least 8 characters";const t=/\d/.test(e),n=/[a-zA-Z]/.test(e);return t&&n?null:"Password must contain at least one letter and one number"},ye=e=>{if(!e)return"Username is required";if(e.length<3)return"Username must be at least 3 characters";if(e.length>20)return"Username must be less than 20 characters";return/^[a-zA-Z0-9_]+$/.test(e)?null:"Username can only contain letters, numbers, and underscores"},be=(e,t)=>t?e!==t?"Passwords do not match":null:"Please confirm your password",ve=function(){return{value:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",error:null,touched:!1}},we=(e,t,n)=>({value:t,error:n?n(t):null,touched:!0}),je=e=>Object.values(e).every(e=>!e.error&&e.touched),Ne=d("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ke=()=>{const{state:e,clearCart:t}=_(),{isAuthenticated:s,user:i}=(0,b.A)(),l=(0,a.Zp)(),[c,d]=(0,r.useState)("shipping"),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)(""),[w,j]=(0,r.useState)({fullName:ve((null===i||void 0===i?void 0:i.username)||""),addressLine1:ve(),addressLine2:ve(),city:ve(),postalCode:ve(),country:ve("South Africa"),phoneNumber:ve()}),[N,k]=(0,r.useState)({cardNumber:ve(),cardholderName:ve(),expiryDate:ve(),cvv:ve()}),[S,C]=(0,r.useState)("standard"),A=[{id:"standard",name:"Standard Delivery",price:50,description:"3-5 business days"},{id:"express",name:"Express Delivery",price:100,description:"1-2 business days"},{id:"same-day",name:"Same Day Delivery",price:200,description:"Delivered today (order before 10am)"}],P=e.items.reduce((e,t)=>e+t.product.price*t.quantity,0),E=A.find(e=>e.id===S)||A[0],M=E.price,O=Math.round(.15*P),T=P+M+O,L=(e,t)=>{j(n=>(0,o.A)((0,o.A)({},n),{},{[e]:we(n[e],t,e=>e.trim().length>0?null:"This field is required")}))},D=async()=>{g(!0),y("");try{const t={fullName:w.fullName.value,addressLine1:w.addressLine1.value,addressLine2:w.addressLine2.value,city:w.city.value,postalCode:w.postalCode.value,country:w.country.value,phoneNumber:w.phoneNumber.value},r=e.items.map(e=>({product:String(e.product._id||e.product.id),name:e.product.name,quantity:e.quantity,image:e.product.image,price:e.product.price})),s={name:E.name,price:E.price,description:E.description},i=(await Promise.resolve().then(n.bind(n,291)).then(e=>e.cartApi.checkout(r,t,"Paystack",s,O,M,P,T))).orderId||"ORD-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()));p(i),d("payment"),y("")}catch(t){y(t instanceof Error?t.message:"An error occurred while creating your order")}finally{g(!1)}};return r.useEffect(()=>{s||l("/login?redirect=checkout")},[s,l]),r.useEffect(()=>{0!==e.itemCount||"confirmation"===c||u||l("/cart")},[e.itemCount,l,u,c]),(0,v.jsx)("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,v.jsx)("div",{className:"mb-8",children:(0,v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,v.jsxs)("div",{className:"flex items-center ".concat("shipping"===c||"payment"===c||"confirmation"===c?"text-primary-600":"text-gray-400"),children:[(0,v.jsx)("div",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-current",children:(0,v.jsx)(V,{className:"h-4 w-4"})}),(0,v.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Shipping"})]}),(0,v.jsx)("div",{className:"flex-1 h-0.5 mx-4 bg-gray-200",children:(0,v.jsx)("div",{className:"h-full bg-primary-600 transition-all ".concat("payment"===c||"confirmation"===c?"w-full":"w-0")})}),(0,v.jsxs)("div",{className:"flex items-center ".concat("payment"===c||"confirmation"===c?"text-primary-600":"text-gray-400"),children:[(0,v.jsx)("div",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-current",children:(0,v.jsx)(ne,{className:"h-4 w-4"})}),(0,v.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Payment"})]}),(0,v.jsx)("div",{className:"flex-1 h-0.5 mx-4 bg-gray-200",children:(0,v.jsx)("div",{className:"h-full bg-primary-600 transition-all ".concat("confirmation"===c?"w-full":"w-0")})}),(0,v.jsxs)("div",{className:"flex items-center ".concat("confirmation"===c?"text-primary-600":"text-gray-400"),children:[(0,v.jsx)("div",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-current",children:(0,v.jsx)(Ne,{className:"h-4 w-4"})}),(0,v.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]})}),x&&(0,v.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-100 rounded-lg",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)(pe,{className:"h-5 w-5 text-red-500 mr-2"}),(0,v.jsx)("span",{className:"text-red-700",children:x})]})}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:["shipping"===c&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Shipping Information"}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsx)(se,{id:"fullName",label:"Full Name",type:"text",placeholder:"Enter your full name",fieldState:w.fullName,onChange:e=>L("fullName",e)}),(0,v.jsx)(se,{id:"addressLine1",label:"Address Line 1",type:"text",placeholder:"Street address or P.O. Box",fieldState:w.addressLine1,onChange:e=>L("addressLine1",e)}),(0,v.jsx)(se,{id:"addressLine2",label:"Address Line 2",type:"text",placeholder:"Apt, suite, unit, building, floor, etc. (optional)",fieldState:w.addressLine2,onChange:e=>L("addressLine2",e),required:!1}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsx)(se,{id:"city",label:"City",type:"text",placeholder:"Enter your city",fieldState:w.city,onChange:e=>L("city",e)}),(0,v.jsx)(se,{id:"postalCode",label:"Postal Code",type:"text",placeholder:"Enter your postal code",fieldState:w.postalCode,onChange:e=>L("postalCode",e)})]}),(0,v.jsx)(ie,{id:"country",label:"Country",fieldState:w.country,onChange:e=>L("country",e),options:[{value:"South Africa",label:"South Africa"},{value:"Namibia",label:"Namibia"},{value:"Botswana",label:"Botswana"},{value:"Zimbabwe",label:"Zimbabwe"},{value:"Mozambique",label:"Mozambique"}]}),(0,v.jsx)(se,{id:"phoneNumber",label:"Phone Number",type:"tel",placeholder:"For delivery updates",fieldState:w.phoneNumber,onChange:e=>L("phoneNumber",e)}),(0,v.jsxs)("div",{className:"mt-6",children:[(0,v.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Shipping Method"}),(0,v.jsx)("div",{className:"space-y-3",children:A.map(e=>(0,v.jsx)("div",{className:"border rounded-lg p-4 cursor-pointer transition-colors ".concat(S===e.id?"border-primary-600 bg-primary-50":"border-gray-200"),onClick:()=>C(e.id),children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 flex-shrink-0 ".concat(S===e.id?"bg-primary-600":"border border-gray-300")}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,v.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,v.jsxs)("span",{className:"text-sm font-semibold",children:["R",e.price.toLocaleString()]})]})},e.id))})]})]})]}),"payment"===c&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Payment Information"}),(0,v.jsx)("div",{className:"mb-6",children:(0,v.jsx)(fe,{orderId:m||"",amount:T,email:null===i||void 0===i?void 0:i.email,firstName:null===i||void 0===i?void 0:i.username,lastName:"",phone:w.phoneNumber.value,onSuccess:async e=>{try{console.log("Payment successful:",e),t();try{await Promise.resolve().then(n.bind(n,632)).then(e=>e.useSearch().searchProducts())}catch(r){console.warn("Could not refresh products:",r)}d("confirmation"),h(!0)}catch(s){console.error("Error processing payment success:",s),y("Payment was successful but there was an error processing your order. Please contact support.")}},onClose:()=>y("Payment was cancelled")})})]}),"confirmation"===c&&(0,v.jsxs)("div",{className:"p-6 text-center",children:[(0,v.jsx)("div",{className:"flex justify-center mb-4",children:(0,v.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,v.jsx)(Ne,{className:"h-10 w-10 text-green-600"})})}),(0,v.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You for Your Order!"}),(0,v.jsx)("p",{className:"text-gray-600 mb-6",children:"Your order has been placed successfully."}),(0,v.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg inline-block mb-6",children:[(0,v.jsx)("p",{className:"text-sm text-gray-600",children:"Order Reference:"}),(0,v.jsx)("p",{className:"text-lg font-medium text-gray-900",children:m})]}),(0,v.jsx)("p",{className:"text-gray-600 mb-6",children:'We\'ve sent a confirmation email to your registered email address. You can track your order status in your profile under "Orders".'}),(0,v.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,v.jsx)("button",{onClick:()=>l("/products"),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Continue Shopping"}),(0,v.jsx)("button",{onClick:()=>l("/profile"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"View Orders"})]})]}),("shipping"===c||"payment"===c)&&(0,v.jsxs)("div",{className:"bg-gray-50 p-6 border-t border-gray-200",children:[(0,v.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Order Summary"}),(0,v.jsx)("div",{className:"space-y-3 mb-4",children:e.items.map(e=>(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("span",{className:"bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-xs mr-2",children:e.quantity}),(0,v.jsx)("span",{className:"text-sm text-gray-600",children:e.product.name})]}),(0,v.jsxs)("span",{className:"text-sm font-medium",children:["R",(e.product.price*e.quantity).toLocaleString()]})]},e.product.id))}),(0,v.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[(0,v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,v.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,v.jsxs)("span",{className:"font-medium",children:["R",P.toLocaleString()]})]}),(0,v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,v.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,v.jsxs)("span",{className:"font-medium",children:["R",M.toLocaleString()]})]}),(0,v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,v.jsx)("span",{className:"text-gray-600",children:"Tax (15% VAT)"}),(0,v.jsxs)("span",{className:"font-medium",children:["R",O.toLocaleString()]})]}),(0,v.jsxs)("div",{className:"flex justify-between text-base font-bold pt-2 border-t border-gray-200",children:[(0,v.jsx)("span",{children:"Total"}),(0,v.jsxs)("span",{children:["R",T.toLocaleString()]})]})]})]}),("shipping"===c||"payment"===c)&&(0,v.jsx)("div",{className:"p-6 bg-white border-t border-gray-200",children:(0,v.jsxs)("div",{className:"flex justify-between",children:["payment"===c?(0,v.jsx)("button",{onClick:()=>{"payment"===c&&d("shipping")},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back"}):(0,v.jsx)("div",{}),(0,v.jsx)("button",{onClick:()=>{if("shipping"===c){const e=Object.keys(w).reduce((e,t)=>{const n=t;return(0,o.A)((0,o.A)({},e),{},{[n]:(0,o.A)((0,o.A)({},w[n]),{},{touched:!0})})},{});if(j(e),!je(e))return void y("Please fill out all required fields");D()}},disabled:f||"shipping"===c&&Object.values(w).some(e=>!e.value.trim()),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:f?(0,v.jsxs)("span",{className:"flex items-center",children:[(0,v.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,v.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,v.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"shipping"===c?"Continue to Payment":"Place Order"})]})})]})]})})})},_e=e=>{let{size:t="md",color:n="primary",className:r=""}=e;const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t],i={primary:"text-primary-600",white:"text-white",gray:"text-gray-600"}[n]||"text-primary-600";return(0,v.jsxs)("svg",{className:"animate-spin ".concat(s," ").concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,v.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,v.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Se=e=>{let{message:t,className:n=""}=e;return t?(0,v.jsx)("div",{className:"rounded-md bg-red-50 p-4 ".concat(n),children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)(pe,{className:"h-5 w-5 text-red-400"})}),(0,v.jsx)("div",{className:"ml-3",children:(0,v.jsx)("h3",{className:"text-sm font-medium text-red-800",children:t})})]})}):null},Ce=[{key:"processing",label:"Processing",description:"Order is being prepared"},{key:"confirmed",label:"Confirmed",description:"Order has been confirmed"},{key:"preparing",label:"Preparing",description:"Items are being packed"},{key:"shipped",label:"Shipped",description:"Package has left our facility"},{key:"in_transit",label:"In Transit",description:"Package is on its way"},{key:"out_for_delivery",label:"Out for Delivery",description:"Package is out for delivery"},{key:"delivered",label:"Delivered",description:"Package has been delivered"}],Ae=()=>{var e,t;const{trackingNumber:n}=(0,a.g)(),[s,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)("");(0,r.useEffect)(()=>{n&&(async()=>{try{c(!0);const e=await fetch("/api/tracking/".concat(n)),t=await e.json();t.success?o(t.data):u("Tracking number not found")}catch(e){u("Failed to fetch tracking information")}finally{c(!1)}})()},[n]);const h=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});if(l)return(0,v.jsx)(_e,{});if(d)return(0,v.jsx)(Se,{message:d});if(!s)return(0,v.jsx)(Se,{message:"No tracking information found"});const m=(p=s.currentStage,Ce.findIndex(e=>e.key===p));var p;return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,v.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Track Your Order"}),(0,v.jsxs)("p",{className:"text-gray-600 mt-1",children:["Tracking Number: ",(0,v.jsx)("span",{className:"font-semibold",children:s.trackingNumber})]})]}),s.trackingUrl&&(0,v.jsxs)("a",{href:s.trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:["Track on ",s.carrier]})]})}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-sm text-gray-600",children:"Order Date"}),(0,v.jsx)("p",{className:"font-semibold",children:h(s.createdAt)})]}),s.totalItems&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-sm text-gray-600",children:"Items"}),(0,v.jsxs)("p",{className:"font-semibold",children:[s.totalItems," item(s)"]})]}),s.totalPrice&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-sm text-gray-600",children:"Total"}),(0,v.jsxs)("p",{className:"font-semibold",children:["R ",s.totalPrice.toFixed(2)]})]})]}),s.deliveryLocation&&(0,v.jsxs)("div",{className:"mt-4",children:[(0,v.jsx)("p",{className:"text-sm text-gray-600",children:"Delivery Location"}),(0,v.jsxs)("p",{className:"font-semibold",children:[s.deliveryLocation.city,", ",s.deliveryLocation.country]})]}),s.estimatedDelivery&&(0,v.jsxs)("div",{className:"mt-4",children:[(0,v.jsx)("p",{className:"text-sm text-gray-600",children:"Estimated Delivery"}),(0,v.jsx)("p",{className:"font-semibold text-green-600",children:h(s.estimatedDelivery)})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Tracking Progress"}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),(0,v.jsx)("div",{className:"absolute left-6 top-0 w-0.5 bg-blue-600 transition-all duration-500",style:{height:"".concat(m/(Ce.length-1)*100,"%")}}),(0,v.jsx)("div",{className:"space-y-6",children:Ce.map((e,t)=>{const n=t<=m,r=t===m;return(0,v.jsxs)("div",{className:"relative flex items-center",children:[(0,v.jsx)("div",{className:"relative z-10 w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300 ".concat(n?"bg-blue-600 border-blue-600":"bg-white border-gray-300"),children:n?(0,v.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,v.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-300"})}),(0,v.jsxs)("div",{className:"ml-4 flex-1",children:[(0,v.jsxs)("div",{className:"font-semibold ".concat(r?"text-blue-600":n?"text-gray-900":"text-gray-500"),children:[e.label,r&&(0,v.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Current"})]}),(0,v.jsx)("p",{className:"text-sm ".concat(n?"text-gray-600":"text-gray-400"),children:e.description}),"delivered"===e.key&&s.deliveredAt&&n&&(0,v.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["Delivered on ",h(s.deliveredAt),s.deliveredTo&&" to ".concat(s.deliveredTo)]})]})]},e.key)})})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Status"}),(0,v.jsx)("p",{className:"text-gray-600 mt-1",children:(null===(e=Ce[m])||void 0===e?void 0:e.description)||"Processing your order"})]}),(0,v.jsx)("div",{className:"px-4 py-2 rounded-full text-sm font-medium ".concat(s.isDelivered?"bg-green-100 text-green-800":m>=3?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:s.isDelivered?"Delivered":(null===(t=Ce[m])||void 0===t?void 0:t.label)||"Processing"})]}),s.carrier&&(0,v.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:["Carrier: ",(0,v.jsx)("span",{className:"font-semibold text-gray-900",children:s.carrier})]})})]}),(0,v.jsx)("div",{className:"mt-8 text-center",children:(0,v.jsxs)(i.N_,{to:"/",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,v.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Continue Shopping"]})})]})})};var Pe=n(632);const Ee=d("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Me=d("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Oe=d("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function Te(){const[e,t]=(0,r.useState)({email:"",password:""}),[n,s]=(0,r.useState)({}),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),g=(0,a.Zp)(),{login:x}=(0,b.A)();(0,r.useEffect)(()=>{const{email:t,password:r}=e,s=Object.keys(n).length>0,i=""!==t.trim()&&""!==r.trim();f(i&&!s)},[e,n]);const y=e=>e.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Please enter a valid email address":"Email is required",w=e=>e.trim()?e.length<6?"Password must be at least 6 characters":"":"Password is required",j=e=>{const{name:n,value:r}=e.target;t(e=>(0,o.A)((0,o.A)({},e),{},{[n]:r}));let i="";"email"===n?i=y(r):"password"===n&&(i=w(r)),s(e=>{if(i)return(0,o.A)((0,o.A)({},e),{},{[n]:i});{const t=(0,o.A)({},e);return delete t[n],t}})};return(0,v.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Welcome Back"}),(0,v.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your Snappy account"})]}),d&&(0,v.jsx)("div",{className:"rounded-md bg-red-50 p-4 animate-fadeIn",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)("div",{className:"flex-shrink-0",children:(0,v.jsx)(pe,{className:"h-5 w-5 text-red-400"})}),(0,v.jsx)("div",{className:"ml-3",children:(0,v.jsx)("h3",{className:"text-sm font-medium text-red-800",children:d})})]})}),(0,v.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),u(""),(()=>{const t={},n=y(e.email);n&&(t.email=n);const r=w(e.password);return r&&(t.password=r),s(t),0===Object.keys(t).length})()){m(!0);try{(await x(e.email,e.password)).user.isAdmin?g("/admin"):g("/")}catch(n){u(n instanceof Error?n.message:"Failed to login. Please check your credentials and try again.")}finally{m(!1)}}},children:[(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,v.jsx)(R,{className:"h-5 w-5 text-gray-400"})}),(0,v.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:e.email,onChange:j,className:"block w-full pl-10 pr-3 py-2 border ".concat(n.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"," rounded-md shadow-sm placeholder-gray-400 sm:text-sm"),placeholder:"you@example.com","aria-describedby":n.email?"email-error":void 0})]}),n.email&&(0,v.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"email-error",children:n.email})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,v.jsx)(Ee,{className:"h-5 w-5 text-gray-400"})}),(0,v.jsx)("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"current-password",value:e.password,onChange:j,className:"block w-full pl-10 pr-10 py-2 border ".concat(n.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"," rounded-md shadow-sm placeholder-gray-400 sm:text-sm"),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","aria-describedby":n.password?"password-error":void 0}),(0,v.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>{c(!l)},children:l?(0,v.jsx)(Me,{className:"h-5 w-5 text-gray-400 hover:text-gray-500"}):(0,v.jsx)(Oe,{className:"h-5 w-5 text-gray-400 hover:text-gray-500"})})]}),n.password&&(0,v.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"password-error",children:n.password})]})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,v.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,v.jsx)("div",{className:"text-sm",children:(0,v.jsx)("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",disabled:h||!p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:h?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,v.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,v.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})}),(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,v.jsx)(i.N_,{to:"/signup",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up now"})]}),(0,v.jsx)("div",{className:"mt-4",children:(0,v.jsx)(i.N_,{to:"/request-reset",className:"text-blue-500 hover:underline",children:"Forgot password?"})}),(0,v.jsx)("div",{className:"mt-2",children:(0,v.jsx)(i.N_,{to:"/request-email-verification",className:"text-blue-500 hover:underline",children:"Verify your email"})})]})]})]})})}function Le(){const[e,t]=(0,r.useState)({username:ve(),email:ve(),password:ve(),confirmPassword:ve()}),[n,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),p=(0,a.Zp)(),{register:g}=(0,b.A)(),x=(n,r)=>{let s=(0,o.A)({},e);switch(n){case"username":s.username=we(e.username,r,ye);break;case"email":s.email=we(e.email,r,ge);break;case"password":s.password=we(e.password,r,xe),e.confirmPassword.touched&&(s.confirmPassword=we(e.confirmPassword,e.confirmPassword.value,e=>be(r,e)));break;case"confirmPassword":s.confirmPassword=we(e.confirmPassword,r,t=>be(e.password.value,t))}t(s),m(!0)},y=je(e);return(0,v.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,v.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,v.jsx)(i.N_,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your account"}),(0,v.jsx)("div",{className:"mt-4",children:(0,v.jsx)(i.N_,{to:"/request-reset",className:"text-blue-500 hover:underline",children:"Forgot password?"})}),(0,v.jsx)("div",{className:"mt-2",children:(0,v.jsx)(i.N_,{to:"/request-email-verification",className:"text-blue-500 hover:underline",children:"Verify your email"})})]})]}),n&&(0,v.jsx)(Se,{message:n,className:"mb-4"}),(0,v.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async n=>{n.preventDefault(),s("");const r=Object.keys(e).reduce((t,n)=>{const r=n;return(0,o.A)((0,o.A)({},t),{},{[r]:(0,o.A)((0,o.A)({},e[r]),{},{touched:!0})})},{});if(t(r),je(r)){c(!0);try{await g(e.username.value,e.email.value,e.password.value),p("/")}catch(i){s(i instanceof Error?i.message:"Failed to create account")}finally{c(!1)}}else s("Please fix the errors in the form")},children:[(0,v.jsxs)("div",{className:"rounded-md space-y-4",children:[(0,v.jsx)(se,{id:"username",label:"Username",type:"text",placeholder:"Choose a username",fieldState:e.username,onChange:e=>x("username",e),autoComplete:"username",icon:(0,v.jsx)(f,{className:"h-5 w-5 text-gray-400"})}),(0,v.jsx)(se,{id:"email",label:"Email address",type:"email",placeholder:"Enter your email",fieldState:e.email,onChange:e=>x("email",e),autoComplete:"email",icon:(0,v.jsx)(R,{className:"h-5 w-5 text-gray-400"})}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(se,{id:"password",label:"Password",type:d?"text":"password",placeholder:"Create a password",fieldState:e.password,onChange:e=>x("password",e),autoComplete:"new-password",icon:(0,v.jsx)(Ee,{className:"h-5 w-5 text-gray-400"})}),(0,v.jsx)("button",{type:"button",className:"absolute right-3 top-9 text-gray-500",onClick:()=>u(!d),children:d?(0,v.jsx)(Me,{className:"h-5 w-5"}):(0,v.jsx)(Oe,{className:"h-5 w-5"})})]}),(0,v.jsx)(se,{id:"confirm-password",label:"Confirm Password",type:d?"text":"password",placeholder:"Confirm your password",fieldState:e.confirmPassword,onChange:e=>x("confirmPassword",e),autoComplete:"new-password",icon:(0,v.jsx)(Ee,{className:"h-5 w-5 text-gray-400"})})]}),h&&!y&&!n&&(0,v.jsx)("p",{className:"text-sm text-yellow-600 mt-2",children:"Please complete all required fields correctly."}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?(0,v.jsxs)("span",{className:"flex items-center",children:[(0,v.jsx)(_e,{size:"sm",color:"white",className:"mr-2"}),"Creating account..."]}):"Create account"})}),(0,v.jsxs)("div",{className:"text-sm text-center",children:["By creating an account, you agree to our"," ",(0,v.jsx)(i.N_,{to:"/terms",className:"text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",(0,v.jsx)(i.N_,{to:"/privacy",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})]})]})})}const De=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Re=d("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ie=d("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function ze(e){var t,n,s,i,a;let{onSubmit:l,initialData:c}=e;const[d,u]=(0,r.useState)(c.username),[h,m]=(0,r.useState)(c.email),[p,f]=(0,r.useState)(c.phoneNumber||""),[g,x]=(0,r.useState)({addressLine1:(null===(t=c.defaultShippingAddress)||void 0===t?void 0:t.addressLine1)||"",addressLine2:(null===(n=c.defaultShippingAddress)||void 0===n?void 0:n.addressLine2)||"",city:(null===(s=c.defaultShippingAddress)||void 0===s?void 0:s.city)||"",postalCode:(null===(i=c.defaultShippingAddress)||void 0===i?void 0:i.postalCode)||"",country:(null===(a=c.defaultShippingAddress)||void 0===a?void 0:a.country)||""}),[y,b]=(0,r.useState)(""),[w,j]=(0,r.useState)(!1);return(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b(""),j(!0);try{await l({username:d,email:h,phoneNumber:p,defaultShippingAddress:g})}catch(t){b(t instanceof Error?t.message:"Failed to update profile")}finally{j(!1)}},className:"space-y-6",children:[y&&(0,v.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)(pe,{className:"h-5 w-5 text-red-400"}),(0,v.jsx)("div",{className:"ml-3",children:(0,v.jsx)("h3",{className:"text-sm font-medium text-red-800",children:y})})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,v.jsx)("input",{type:"text",id:"username",value:d,onChange:e=>u(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,v.jsx)("input",{type:"email",id:"email",value:h,onChange:e=>m(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,v.jsx)("input",{type:"tel",id:"phoneNumber",value:p,onChange:e=>f(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"+1 (555) 123-4567"})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Default Shipping Address"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),(0,v.jsx)("input",{type:"text",id:"addressLine1",value:g.addressLine1,onChange:e=>x((0,o.A)((0,o.A)({},g),{},{addressLine1:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"addressLine2",className:"block text-sm font-medium text-gray-700",children:"Address Line 2 (Optional)"}),(0,v.jsx)("input",{type:"text",id:"addressLine2",value:g.addressLine2,onChange:e=>x((0,o.A)((0,o.A)({},g),{},{addressLine2:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),(0,v.jsx)("input",{type:"text",id:"city",value:g.city,onChange:e=>x((0,o.A)((0,o.A)({},g),{},{city:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,v.jsx)("input",{type:"text",id:"postalCode",value:g.postalCode,onChange:e=>x((0,o.A)((0,o.A)({},g),{},{postalCode:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,v.jsxs)("select",{id:"country",value:g.country,onChange:e=>x((0,o.A)((0,o.A)({},g),{},{country:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,v.jsx)("option",{value:"",children:"Select a country"}),(0,v.jsx)("option",{value:"US",children:"United States"}),(0,v.jsx)("option",{value:"CA",children:"Canada"}),(0,v.jsx)("option",{value:"GB",children:"United Kingdom"}),(0,v.jsx)("option",{value:"AU",children:"Australia"}),(0,v.jsx)("option",{value:"DE",children:"Germany"}),(0,v.jsx)("option",{value:"FR",children:"France"}),(0,v.jsx)("option",{value:"ZA",children:"South Africa"}),(0,v.jsx)("option",{value:"NG",children:"Nigeria"}),(0,v.jsx)("option",{value:"KE",children:"Kenya"}),(0,v.jsx)("option",{value:"GH",children:"Ghana"})]})]})]}),(0,v.jsx)("button",{type:"submit",disabled:w,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:w?"Saving...":"Save Changes"})]})}function Fe(e){let{onSubmit:t}=e;const[n,s]=(0,r.useState)(""),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1);return(0,v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),i!==o)return d("Passwords do not match");h(!0);try{await t({currentPassword:n,newPassword:i}),s(""),a(""),l("")}catch(r){d(r instanceof Error?r.message:"Failed to change password")}finally{h(!1)}},className:"space-y-6",children:[c&&(0,v.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)(pe,{className:"h-5 w-5 text-red-400"}),(0,v.jsx)("div",{className:"ml-3",children:(0,v.jsx)("h3",{className:"text-sm font-medium text-red-800",children:c})})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,v.jsx)("input",{type:"password",id:"current-password",value:n,onChange:e=>s(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,v.jsx)("input",{type:"password",id:"new-password",value:i,onChange:e=>a(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,v.jsx)("input",{type:"password",id:"confirm-password",value:o,onChange:e=>l(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),(0,v.jsx)("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:u?"Changing Password...":"Change Password"})]})}function Be(e){let{onSubmit:t,initialData:n}=e;const[s,i]=(0,r.useState)(n.notifications),[a,o]=(0,r.useState)(n.language),[l,c]=(0,r.useState)(n.currency),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1);return(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(""),m(!0);try{await t({notifications:s,language:a,currency:l})}catch(n){u(n instanceof Error?n.message:"Failed to update settings")}finally{m(!1)}},className:"space-y-6",children:[d&&(0,v.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)(pe,{className:"h-5 w-5 text-red-400"}),(0,v.jsx)("div",{className:"ml-3",children:(0,v.jsx)("h3",{className:"text-sm font-medium text-red-800",children:d})})]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("input",{type:"checkbox",id:"notifications",checked:s,onChange:e=>i(e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,v.jsx)("label",{htmlFor:"notifications",className:"ml-2 block text-sm text-gray-900",children:"Enable email notifications"})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-700",children:"Language"}),(0,v.jsx)("select",{id:"language",value:a,onChange:e=>o(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"}].map(e=>(0,v.jsx)("option",{value:e.code,children:e.name},e.code))})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700",children:"Currency"}),(0,v.jsx)("select",{id:"currency",value:l,onChange:e=>c(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[{code:"USD",symbol:"$"},{code:"EUR",symbol:"\u20ac"},{code:"GBP",symbol:"\xa3"}].map(e=>(0,v.jsxs)("option",{value:e.code,children:[e.code," (",e.symbol,")"]},e.code))})]}),(0,v.jsx)("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:h?"Saving...":"Save Settings"})]})}const Ve=()=>{const{state:e,removeFromWishlist:t}=E(),{addToCart:n}=_();return(0,v.jsx)("div",{children:e.itemCount>0?(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.items.map(r=>(0,v.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative",children:[(0,v.jsx)("div",{className:"absolute top-2 right-2 flex space-x-2",children:(0,v.jsx)("button",{onClick:()=>t(r.id),className:"bg-white rounded-full p-1.5 shadow hover:bg-red-50 transition-colors","aria-label":"Remove from wishlist",children:(0,v.jsx)(te,{className:"h-4 w-4 text-red-500"})})}),(0,v.jsxs)("div",{className:"flex space-x-4",children:[(0,v.jsx)("div",{className:"w-20 h-20 flex-shrink-0",children:(0,v.jsx)("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover rounded-md",onError:e=>{e.target.src="https://via.placeholder.com/200x200?text=Product+Image"}})}),(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsx)(i.N_,{to:"/products/".concat(r.id),className:"text-gray-900 font-medium hover:text-primary-600 transition-colors",children:r.name}),(0,v.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,v.jsxs)("div",{className:"text-primary-600 font-bold",children:["R",r.price.toLocaleString()]}),(0,v.jsxs)("button",{onClick:()=>(t=>{const r=e.items.find(e=>String(e.id)===String(t));r&&n(r)})(r.id),className:"inline-flex items-center text-sm bg-primary-600 text-white px-3 py-1 rounded-lg hover:bg-primary-700 transition-colors",children:[(0,v.jsx)(p,{className:"h-3.5 w-3.5 mr-1"}),"Add to Cart"]})]})]})]})]},r.id))}),(0,v.jsx)("div",{className:"flex justify-end",children:(0,v.jsx)("button",{onClick:()=>e.items.forEach(e=>n(e)),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Add All to Cart"})})]}):(0,v.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,v.jsx)(m,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,v.jsx)("p",{children:"Your wishlist is empty"}),(0,v.jsx)(i.N_,{to:"/products",className:"inline-block mt-4 text-primary-600 hover:text-primary-700 transition-colors",children:"Browse Products"})]})})},We=d("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ue=d("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),He=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{s(!0);const e=await y.default.orders.getOrders();console.log("Fetched orders in OrderSection:",e),Array.isArray(e)?t(e):(console.warn("Orders data is not an array:",e),t([]))}catch(e){console.error("Error fetching orders:",e),o("Failed to load your orders. Please try again later."),t([])}finally{s(!1)}})()},[]);const d=e=>{switch(e){case"pending":return(0,v.jsx)(We,{className:"h-4 w-4 text-yellow-500"});case"processing":return(0,v.jsx)(We,{className:"h-4 w-4 text-blue-500"});case"shipped":return(0,v.jsx)(V,{className:"h-4 w-4 text-blue-500"});case"delivered":return(0,v.jsx)(Ne,{className:"h-4 w-4 text-green-500"});case"cancelled":return(0,v.jsx)(We,{className:"h-4 w-4 text-red-500"});default:return(0,v.jsx)(We,{className:"h-4 w-4 text-gray-500"})}},h=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return n?(0,v.jsxs)("div",{className:"text-center py-8",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,v.jsx)("p",{className:"text-gray-600",children:"Loading your orders..."})]}):a?(0,v.jsxs)("div",{className:"text-center text-red-500 py-8",children:[(0,v.jsx)("p",{children:a}),(0,v.jsx)("button",{className:"mt-4 text-primary-600 hover:text-primary-700",onClick:()=>window.location.reload(),children:"Try Again"})]}):0===e.length?(0,v.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,v.jsx)(G,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,v.jsx)("p",{children:"You haven't placed any orders yet"}),(0,v.jsx)(i.N_,{to:"/products",className:"inline-block mt-4 text-primary-600 hover:text-primary-700 transition-colors",children:"Start Shopping"})]}):(0,v.jsx)("div",{className:"space-y-6",children:Array.isArray(e)&&e.map(e=>{var t,n,r,s,a,o;return(0,v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,v.jsxs)("div",{className:"p-4 sm:p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center border-b border-gray-200",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center mb-2",children:[(0,v.jsx)("span",{className:"text-sm text-gray-500 mr-2",children:"Order #"}),(0,v.jsx)("span",{className:"text-sm font-medium",children:e.id})]}),(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)("span",{className:"text-sm text-gray-500",children:e.date?new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Date not available"}),(0,v.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(h(e.status)),children:[d(e.status),(0,v.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})]})]}),(0,v.jsxs)("div",{className:"flex flex-col items-end mt-3 sm:mt-0",children:[(0,v.jsx)("span",{className:"text-sm text-gray-500 mb-1",children:"Total Amount"}),(0,v.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["R",(e.total||0).toLocaleString()]}),(0,v.jsx)("button",{onClick:()=>{return t=e.id,void c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"mt-2 text-primary-600 hover:text-primary-700 flex items-center text-sm font-medium",children:l.includes(e.id)?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{children:"Hide Details"}),(0,v.jsx)(Ue,{className:"ml-1 h-4 w-4"})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{children:"Show Details"}),(0,v.jsx)(u,{className:"ml-1 h-4 w-4"})]})})]})]}),l.includes(e.id)&&(0,v.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,v.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Order Items"}),(0,v.jsx)("div",{className:"space-y-3 mb-6",children:(e.items||[]).map((e,t)=>{var n;return e&&e.product?(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("div",{className:"w-12 h-12 flex-shrink-0 mr-3",children:(0,v.jsx)("img",{src:e.product.image||"https://via.placeholder.com/48?text=Product",alt:e.product.name||"Product",className:"w-full h-full object-cover rounded-md",onError:e=>{e.target.src="https://via.placeholder.com/48?text=Product"}})}),(0,v.jsxs)("div",{children:[(0,v.jsx)(i.N_,{to:"/products/".concat(e.product.id||""),className:"text-sm font-medium text-gray-900 hover:text-primary-600",children:e.product.name||"Unknown Product"}),(0,v.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Quantity: ",e.quantity||1]})]})]}),(0,v.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["R",(((null===(n=e.product)||void 0===n?void 0:n.price)||0)*(e.quantity||1)).toLocaleString()]})]},t):null})}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Shipping Address"}),(0,v.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-sm text-gray-600",children:[(0,v.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=e.shippingAddress)||void 0===t?void 0:t.fullName)||"Name not available"}),(0,v.jsx)("p",{children:(null===(n=e.shippingAddress)||void 0===n?void 0:n.addressLine1)||"Address not available"}),(null===(r=e.shippingAddress)||void 0===r?void 0:r.addressLine2)&&(0,v.jsx)("p",{children:e.shippingAddress.addressLine2}),(0,v.jsxs)("p",{children:[(null===(s=e.shippingAddress)||void 0===s?void 0:s.city)||"City",", ",(null===(a=e.shippingAddress)||void 0===a?void 0:a.postalCode)||"Postal Code"]}),(0,v.jsx)("p",{children:(null===(o=e.shippingAddress)||void 0===o?void 0:o.country)||"Country"})]})]}),e.trackingNumber&&(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Tracking Information"}),(0,v.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Tracking Number:"}),(0,v.jsx)("p",{className:"font-medium text-gray-900",children:e.trackingNumber}),(0,v.jsx)("a",{href:"#track-".concat(e.trackingNumber),className:"text-primary-600 hover:text-primary-700 mt-2 inline-block",onClick:e=>e.preventDefault(),children:"Track Package"})]})]})]}),(0,v.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3 justify-end",children:["pending"===e.status||"processing"===e.status?(0,v.jsx)("button",{className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors",onClick:()=>{alert("Order cancellation would be implemented here")},children:"Cancel Order"}):null,(0,v.jsx)("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",onClick:()=>{alert("Invoice download would be implemented here")},children:"Download Invoice"}),(0,v.jsx)("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",onClick:()=>{alert("Help/support would be implemented here")},children:"Need Help?"})]})]})]},e.id)})})},qe="http://localhost:5000/api";function $e(){const{user:e,logout:t,isAuthenticated:n}=(0,b.A)(),s=(0,a.Zp)(),[i,o]=(0,r.useState)("profile"),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[g,x]=(0,r.useState)({notifications:!0,language:"en",currency:"USD"});(0,r.useEffect)(()=>{n||s("/login")},[n,s]);const y=[{id:"profile",name:"Profile",icon:f},{id:"orders",name:"Orders",icon:G},{id:"wishlist",name:"Wishlist",icon:m},{id:"settings",name:"Settings",icon:De}];return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,v.jsx)("div",{className:"w-full md:w-64 space-y-4",children:(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"h-24 w-24 rounded-full bg-primary-100 flex items-center justify-center mx-auto mb-4",children:(0,v.jsx)(f,{className:"h-12 w-12 text-primary-600"})}),(0,v.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:null===e||void 0===e?void 0:e.username}),(0,v.jsx)("p",{className:"text-sm text-gray-500",children:null===e||void 0===e?void 0:e.email})]}),(0,v.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,v.jsxs)("nav",{className:"space-y-2",children:[y.map(e=>(0,v.jsxs)("button",{onClick:()=>o(e.id),className:"w-full flex items-center px-4 py-2 text-sm rounded-lg ".concat(i===e.id?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50"),children:[(0,v.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),e.name]},e.id)),(0,v.jsxs)("button",{onClick:()=>{t(),s("/")},className:"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:[(0,v.jsx)(Re,{className:"h-5 w-5 mr-3"}),"Sign Out"]})]})})]})}),(0,v.jsx)("div",{className:"flex-1",children:(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[h&&(0,v.jsx)("div",{className:"p-4 bg-red-50 text-red-700 rounded-t-lg border-b border-red-100",children:h}),"profile"===i&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),(0,v.jsx)("div",{className:"mb-8 text-center",children:(0,v.jsxs)("div",{className:"relative inline-block",children:[(0,v.jsx)("div",{className:"h-32 w-32 rounded-full bg-primary-100 flex items-center justify-center mx-auto mb-4 overflow-hidden",children:null!==e&&void 0!==e&&e.profilePicture?(0,v.jsx)("img",{src:"".concat(qe.replace("/api","")).concat(e.profilePicture),alt:"Profile",className:"h-full w-full object-cover"}):(0,v.jsx)(f,{className:"h-16 w-16 text-primary-600"})}),(0,v.jsxs)("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg cursor-pointer",children:[(0,v.jsx)(Ie,{className:"h-5 w-5 text-gray-600"}),(0,v.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FormData;r.append("profilePicture",n);try{p("");const e=await fetch("".concat(qe,"/profile/upload-picture"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:r});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to upload profile picture")}window.location.reload()}catch(h){p(h instanceof Error?h.message:"Failed to upload profile picture")}}})]})]})}),l?(0,v.jsx)(ze,{onSubmit:async e=>{try{p("");const t=await fetch("".concat(qe,"/profile/update"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update profile")}const n=await t.json();c(!1),n.user&&window.location.reload()}catch(h){p(h instanceof Error?h.message:"Failed to update profile")}},initialData:{username:(null===e||void 0===e?void 0:e.username)||"",email:(null===e||void 0===e?void 0:e.email)||"",phoneNumber:(null===e||void 0===e?void 0:e.phoneNumber)||"",defaultShippingAddress:(null===e||void 0===e?void 0:e.defaultShippingAddress)||{addressLine1:"",addressLine2:"",city:"",postalCode:"",country:""}}}):(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,v.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-gray-900",children:null===e||void 0===e?void 0:e.username})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,v.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-gray-900",children:null===e||void 0===e?void 0:e.email})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,v.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-gray-900",children:(null===e||void 0===e?void 0:e.phoneNumber)||"Not provided"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Default Shipping Address"}),(0,v.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-gray-900",children:null!==e&&void 0!==e&&e.defaultShippingAddress?(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:e.defaultShippingAddress.addressLine1}),e.defaultShippingAddress.addressLine2&&(0,v.jsx)("div",{children:e.defaultShippingAddress.addressLine2}),(0,v.jsxs)("div",{children:[e.defaultShippingAddress.city,", ",e.defaultShippingAddress.postalCode]}),(0,v.jsx)("div",{children:e.defaultShippingAddress.country})]}):"No address provided"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Member Since"}),(0,v.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-gray-900",children:null!==e&&void 0!==e&&e.createdAt?new Date(e.createdAt).toLocaleDateString():(new Date).toLocaleDateString()})]}),(0,v.jsxs)("div",{className:"flex space-x-4",children:[(0,v.jsx)("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors",children:"Edit Profile"}),(0,v.jsx)("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Change Password"})]})]}),d&&(0,v.jsxs)("div",{className:"mt-8",children:[(0,v.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),(0,v.jsx)(Fe,{onSubmit:async e=>{try{p("");const t=await fetch("".concat(qe,"/profile/change-password"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to change password")}u(!1),p("")}catch(h){p(h instanceof Error?h.message:"Failed to change password")}}})]})]}),"orders"===i&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Order History"}),(0,v.jsx)(He,{})]}),"wishlist"===i&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Wishlist"}),(0,v.jsx)(Ve,{})]}),"settings"===i&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Account Settings"}),(0,v.jsx)(Be,{onSubmit:async e=>{try{if(!(await fetch("".concat(qe,"/profile/settings"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)})).ok)throw new Error("Failed to update settings");x(e)}catch(h){p(h instanceof Error?h.message:"Failed to update settings")}},initialData:g})]})]})})]})})})}const Ye=()=>{const{user:e}=(0,b.A)(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{e?(async()=>{i(!0),o("");try{const e=await y.orderApi.getOrders();if(console.log("Raw orders data:",e),!e||!Array.isArray(e))return console.warn("Invalid orders data received:",e),void n([]);const t=e.map(e=>({_id:e._id||e.id||"unknown",createdAt:e.createdAt||e.date||(new Date).toISOString(),status:e.status||e.orderStatus||"pending",total:e.totalPrice||e.total||0,items:(e.orderItems||e.items||[]).map(e=>{var t,n,r;return{product:{name:e.name||(null===(t=e.product)||void 0===t?void 0:t.name)||"Unknown Product",image:e.image||(null===(n=e.product)||void 0===n?void 0:n.image)||"https://via.placeholder.com/32?text=Product"},quantity:e.quantity||1,price:e.price||(null===(r=e.product)||void 0===r?void 0:r.price)||0}})}));n(t)}catch(e){console.error("Error fetching orders:",e),o(e.message||"Failed to fetch orders"),n([])}finally{i(!1)}})():i(!1)},[e]),e?(0,v.jsxs)("div",{className:"max-w-4xl mx-auto p-8",children:[(0,v.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Order History"}),s?(0,v.jsx)("div",{children:"Loading orders..."}):a?(0,v.jsx)("div",{className:"text-red-500",children:a}):0===t.length?(0,v.jsx)("div",{className:"text-gray-500",children:"No orders found."}):(0,v.jsx)("div",{className:"space-y-8",children:t.map(e=>(0,v.jsxs)("div",{className:"border rounded-lg p-4 shadow cursor-pointer hover:bg-gray-50 transition",onClick:()=>window.location.href="/orders/".concat(e._id),children:[(0,v.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,v.jsxs)("span",{className:"font-semibold",children:["Order ID: ",e._id]}),(0,v.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,v.jsxs)("div",{className:"mb-2",children:["Status: ",(0,v.jsx)("span",{className:"font-medium",children:e.status})]}),(0,v.jsxs)("div",{className:"mb-2",children:["Total: ",(0,v.jsxs)("span",{className:"font-bold",children:["R",(e.total||0).toLocaleString()]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-semibold mb-2",children:"Items:"}),(0,v.jsx)("ul",{className:"list-disc list-inside",children:(e.items||[]).map((e,t)=>{var n,r,s;return(0,v.jsxs)("li",{className:"flex items-center mb-1",children:[(0,v.jsx)("img",{src:(null===(n=e.product)||void 0===n?void 0:n.image)||"https://via.placeholder.com/32?text=Product",alt:(null===(r=e.product)||void 0===r?void 0:r.name)||"Product",className:"w-8 h-8 rounded mr-2",onError:e=>{e.target.src="https://via.placeholder.com/32?text=Product"}}),(0,v.jsx)("span",{children:(null===(s=e.product)||void 0===s?void 0:s.name)||"Unknown Product"}),(0,v.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["x",e.quantity||1]}),(0,v.jsxs)("span",{className:"ml-4 text-xs text-gray-700",children:["R",(e.price||0).toLocaleString()]})]},t)})})]})]},e._id))})]}):(0,v.jsx)("div",{className:"p-8",children:"Please log in to view your order history."})},Qe=()=>{var e,t,n,s,i,o,l,c,d;const{orderId:u}=(0,a.g)(),{user:h}=(0,b.A)(),m=(0,a.Zp)(),[p,f]=(0,r.useState)(null),[g,x]=(0,r.useState)(!0),[w,j]=(0,r.useState)("");return(0,r.useEffect)(()=>{h&&u&&(async()=>{x(!0),j("");try{const e=await y.orderApi.getOrderById(u);f(e)}catch(e){j(e.message||"Failed to fetch order details")}finally{x(!1)}})()},[h,u]),h?g?(0,v.jsx)("div",{className:"p-8",children:"Loading order details..."}):w?(0,v.jsx)("div",{className:"p-8 text-red-500",children:w}):p?(0,v.jsxs)("div",{className:"max-w-3xl mx-auto p-8",children:[(0,v.jsx)("button",{onClick:()=>m(-1),className:"mb-4 px-4 py-2 bg-gray-200 rounded",children:"Back"}),(0,v.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Order Details"}),(0,v.jsxs)("div",{className:"mb-2 font-semibold",children:["Order ID: ",p._id]}),(0,v.jsxs)("div",{className:"mb-2",children:["Date: ",new Date(p.createdAt).toLocaleString()]}),(0,v.jsxs)("div",{className:"mb-2",children:["Status: ",(0,v.jsx)("span",{className:"font-medium",children:p.status})]}),(0,v.jsxs)("div",{className:"mb-2",children:["Total: ",(0,v.jsxs)("span",{className:"font-bold",children:["R",null===(e=p.totalPrice)||void 0===e?void 0:e.toLocaleString()]})]}),(0,v.jsxs)("div",{className:"mb-4",children:["Shipping Address: ",(0,v.jsxs)("span",{className:"text-gray-700",children:[null===(t=p.shippingAddress)||void 0===t?void 0:t.fullName,", ",null===(n=p.shippingAddress)||void 0===n?void 0:n.addressLine1,", ",null===(s=p.shippingAddress)||void 0===s?void 0:s.city,", ",null===(i=p.shippingAddress)||void 0===i?void 0:i.country,", ",null===(o=p.shippingAddress)||void 0===o?void 0:o.postalCode]})]}),(0,v.jsxs)("div",{className:"mb-4",children:["Payment Method: ",(0,v.jsx)("span",{className:"text-gray-700",children:p.paymentMethod})]}),(0,v.jsxs)("div",{className:"mb-4",children:["Shipping Method: ",(0,v.jsxs)("span",{className:"text-gray-700",children:[null===(l=p.shippingMethod)||void 0===l?void 0:l.name," (",null===(c=p.shippingMethod)||void 0===c?void 0:c.description,")"]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-semibold mb-2",children:"Items:"}),(0,v.jsx)("ul",{className:"list-disc list-inside",children:null===(d=p.orderItems)||void 0===d?void 0:d.map((e,t)=>(0,v.jsxs)("li",{className:"flex items-center mb-1",children:[(0,v.jsx)("img",{src:e.image,alt:e.name,className:"w-8 h-8 rounded mr-2"}),(0,v.jsx)("span",{children:e.name}),(0,v.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["x",e.quantity]}),(0,v.jsxs)("span",{className:"ml-4 text-xs text-gray-700",children:["R",e.price.toLocaleString()]})]},t))})]})]}):(0,v.jsx)("div",{className:"p-8",children:"Order not found."}):(0,v.jsx)("div",{className:"p-8",children:"Please log in to view order details."})};var Ke=n(705);function Xe(e){return e+.5|0}const Je=(e,t,n)=>Math.max(Math.min(e,n),t);function Ge(e){return Je(Xe(2.55*e),0,255)}function Ze(e){return Je(Xe(255*e),0,255)}function et(e){return Je(Xe(e/2.55)/100,0,1)}function tt(e){return Je(Xe(100*e),0,100)}const nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rt=[..."0123456789ABCDEF"],st=e=>rt[15&e],it=e=>rt[(240&e)>>4]+rt[15&e],at=e=>(240&e)>>4===(15&e);function ot(e){var t=(e=>at(e.r)&&at(e.g)&&at(e.b)&&at(e.a))(e)?st:it;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const lt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ct(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function dt(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function ut(e,t,n){const r=ct(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function ht(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),i=Math.min(t,n,r),a=(s+i)/2;let o,l,c;return s!==i&&(c=s-i,l=a>.5?c/(2-s-i):c/(s+i),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,a]}function mt(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Ze)}function pt(e,t,n){return mt(ct,e,t,n)}function ft(e){return(e%360+360)%360}function gt(e){const t=lt.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Ge(+t[5]):Ze(+t[5]));const s=ft(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return mt(ut,e,t,n)}(s,i,a):"hsv"===t[1]?function(e,t,n){return mt(dt,e,t,n)}(s,i,a):pt(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}const xt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let bt;function vt(e){bt||(bt=function(){const e={},t=Object.keys(yt),n=Object.keys(xt);let r,s,i,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,xt[i]);i=parseInt(yt[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),bt.transparent=[0,0,0,0]);const t=bt[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const wt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const jt=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Nt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function kt(e,t,n){if(e){let r=ht(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=pt(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function _t(e,t){return e?Object.assign(t||{},e):e}function St(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ze(e[3]))):(t=_t(e,{r:0,g:0,b:0,a:1})).a=Ze(t.a),t}function Ct(e){return"r"===e.charAt(0)?function(e){const t=wt.exec(e);let n,r,s,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?Ge(e):Je(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Ge(n):Je(n,0,255)),r=255&(t[4]?Ge(r):Je(r,0,255)),s=255&(t[6]?Ge(s):Je(s,0,255)),{r:n,g:r,b:s,a:i}}}(e):gt(e)}class At{constructor(e){if(e instanceof At)return e;const t=typeof e;let n;"object"===t?n=St(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*nt[e[1]],g:255&17*nt[e[2]],b:255&17*nt[e[3]],a:5===n?17*nt[e[4]]:255}:7!==n&&9!==n||(t={r:nt[e[1]]<<4|nt[e[2]],g:nt[e[3]]<<4|nt[e[4]],b:nt[e[5]]<<4|nt[e[6]],a:9===n?nt[e[7]]<<4|nt[e[8]]:255})),t}(e)||vt(e)||Ct(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=_t(this._rgb);return e&&(e.a=et(e.a)),e}set rgb(e){this._rgb=St(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(et(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?ot(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=ht(e),n=t[0],r=tt(t[1]),s=tt(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(et(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const i=t===s?.5:t,a=2*i-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=i*n.a+(1-i)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=Nt(et(e.r)),s=Nt(et(e.g)),i=Nt(et(e.b));return{r:Ze(jt(r+n*(Nt(et(t.r))-r))),g:Ze(jt(s+n*(Nt(et(t.g))-s))),b:Ze(jt(i+n*(Nt(et(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new At(this.rgb)}alpha(e){return this._rgb.a=Ze(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Xe(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return kt(this._rgb,2,e),this}darken(e){return kt(this._rgb,2,-e),this}saturate(e){return kt(this._rgb,1,e),this}desaturate(e){return kt(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=ht(e);n[0]=ft(n[0]+t),n=pt(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Pt(){}const Et=(()=>{let e=0;return()=>e++})();function Mt(e){return null===e||void 0===e}function Ot(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Tt(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Lt(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Dt(e,t){return Lt(e)?e:t}function Rt(e,t){return"undefined"===typeof e?t:e}const It=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function zt(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Ft(e,t,n,r){let s,i,a;if(Ot(e))if(i=e.length,r)for(s=i-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<i;s++)t.call(n,e[s],s);else if(Tt(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function Bt(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Vt(e){if(Ot(e))return e.map(Vt);if(Tt(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=Vt(e[n[s]]);return t}return e}function Wt(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Ut(e,t,n,r){if(!Wt(e))return;const s=t[e],i=n[e];Tt(s)&&Tt(i)?Ht(s,i,r):t[e]=Vt(i)}function Ht(e,t,n){const r=Ot(t)?t:[t],s=r.length;if(!Tt(e))return e;const i=(n=n||{}).merger||Ut;let a;for(let o=0;o<s;++o){if(a=r[o],!Tt(a))continue;const t=Object.keys(a);for(let r=0,s=t.length;r<s;++r)i(t[r],e,a,n)}return e}function qt(e,t){return Ht(e,t,{merger:$t})}function $t(e,t,n){if(!Wt(e))return;const r=t[e],s=n[e];Tt(r)&&Tt(s)?qt(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Vt(s))}const Yt={"":e=>e,x:e=>e.x,y:e=>e.y};function Qt(e,t){const n=Yt[t]||(Yt[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Kt(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Xt=e=>"undefined"!==typeof e,Jt=e=>"function"===typeof e,Gt=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Zt=Math.PI,en=2*Zt,tn=en+Zt,nn=Number.POSITIVE_INFINITY,rn=Zt/180,sn=Zt/2,an=Zt/4,on=2*Zt/3,ln=Math.log10,cn=Math.sign;function dn(e,t,n){return Math.abs(e-t)<n}function un(e){const t=Math.round(e);e=dn(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(ln(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function hn(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function mn(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function pn(e){return e*(Zt/180)}function fn(e){return e*(180/Zt)}function gn(e){if(!Lt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function xn(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Zt&&(i+=en),{angle:i,distance:s}}function yn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function bn(e,t){return(e-t+tn)%en-Zt}function vn(e){return(e%en+en)%en}function wn(e,t,n,r){const s=vn(e),i=vn(t),a=vn(n),o=vn(i-s),l=vn(a-s),c=vn(s-i),d=vn(s-a);return s===i||s===a||r&&i===a||o>l&&c<d}function jn(e,t,n){return Math.max(t,Math.min(n,e))}function Nn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function kn(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,i=0;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const _n=(e,t,n,r)=>kn(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),Sn=(e,t,n)=>kn(e,n,r=>e[r][t]>=n);const Cn=["push","pop","shift","splice","unshift"];function An(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(Cn.forEach(t=>{delete e[t]}),delete e._chartjs)}function Pn(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const En="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Mn(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];n=i,r||(r=!0,En.call(window,()=>{r=!1,e.apply(t,n)}))}}const On=e=>"start"===e?"left":"end"===e?"right":"center",Tn=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Ln(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:u,max:h,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(s=Math.min(_n(l,d,u).lo,n?r:_n(t,d,a.getPixelForValue(u)).lo),c){const e=l.slice(0,s+1).reverse().findIndex(e=>!Mt(e[o.axis]));s-=Math.max(0,e)}s=jn(s,0,r-1)}if(p){let e=Math.max(_n(l,a.axis,h,!0).hi+1,n?0:_n(t,d,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Mt(e[o.axis]));e+=Math.max(0,t)}i=jn(e,s,r)-s}else i=r-s}return{start:s,count:i}}function Dn(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Rn=e=>0===e||1===e,In=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*en/n),zn=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*en/n)+1,Fn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*sn),easeOutSine:e=>Math.sin(e*sn),easeInOutSine:e=>-.5*(Math.cos(Zt*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Rn(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Rn(e)?e:In(e,.075,.3),easeOutElastic:e=>Rn(e)?e:zn(e,.075,.3),easeInOutElastic(e){const t=.1125;return Rn(e)?e:e<.5?.5*In(2*e,t,.45):.5+.5*zn(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Fn.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Fn.easeInBounce(2*e):.5*Fn.easeOutBounce(2*e-1)+.5};function Bn(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Vn(e){return Bn(e)?e:new At(e)}function Wn(e){return Bn(e)?e:new At(e).saturate(.5).darken(.1).hexString()}const Un=["x","y","borderWidth","radius","tension"],Hn=["color","borderColor","backgroundColor"];const qn=new Map;function $n(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=qn.get(n);return r||(r=new Intl.NumberFormat(e,t),qn.set(n,r)),r}(t,n).format(e)}const Yn={values:e=>Ot(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=ln(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),$n(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(ln(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Yn.numeric.call(this,e,t,n):""}};var Qn={formatters:Yn};const Kn=Object.create(null),Xn=Object.create(null);function Jn(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Gn(e,t,n){return"string"===typeof t?Ht(Jn(e,t),n):Ht(Jn(e,""),t)}class Zn{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Wn(t.backgroundColor),this.hoverBorderColor=(e,t)=>Wn(t.borderColor),this.hoverColor=(e,t)=>Wn(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Gn(this,e,t)}get(e){return Jn(this,e)}describe(e,t){return Gn(Xn,e,t)}override(e,t){return Gn(Kn,e,t)}route(e,t,n,r){const s=Jn(this,e),i=Jn(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[r];return Tt(e)?Object.assign({},t,e):Rt(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var er=new Zn({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Hn},numbers:{type:"number",properties:Un}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function tr(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function nr(e,t,n,r){let s=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||Ot(u)){if(Ot(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||Ot(h)||(a=tr(e,s,i,a,h))}else a=tr(e,s,i,a,u);e.restore();const m=i.length/2;if(m>n.length){for(l=0;l<m;l++)delete s[i[l]];i.splice(0,m)}return a}function rr(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function sr(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ir(e,t,n,r){ar(e,t,n,r,null)}function ar(e,t,n,r,s){let i,a,o,l,c,d,u,h;const m=t.pointStyle,p=t.rotation,f=t.radius;let g=(p||0)*rn;if(m&&"object"===typeof m&&(i=m.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,r,s/2,f,0,0,en):e.arc(n,r,f,0,en),e.closePath();break;case"triangle":d=s?s/2:f,e.moveTo(n+Math.sin(g)*d,r-Math.cos(g)*f),g+=on,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*f),g+=on,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,a=Math.cos(g+an)*l,u=Math.cos(g+an)*(s?s/2-c:l),o=Math.sin(g+an)*l,h=Math.sin(g+an)*(s?s/2-c:l),e.arc(n-u,r-o,c,g-Zt,g-sn),e.arc(n+h,r-a,c,g-sn,g),e.arc(n+u,r+o,c,g,g+sn),e.arc(n-h,r+a,c,g+sn,g+Zt),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*f,d=s?s/2:l,e.rect(n-d,r-l,2*d,2*l);break}g+=an;case"rectRot":u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,r-o),e.lineTo(n+h,r-a),e.lineTo(n+u,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":g+=an;case"cross":u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),g+=an,u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=s?s/2:Math.cos(g)*f,o=Math.sin(g)*f,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(s?s/2:f),r+Math.sin(g)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function or(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function lr(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function cr(e){e.restore()}function dr(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function ur(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function hr(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(o,d),e.stroke()}}function mr(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function pr(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Ot(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Mt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&mr(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Mt(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,r,i.maxWidth)),e.fillText(c,n,r,i.maxWidth),hr(e,n,r,c,i),r+=Number(s.lineHeight);e.restore()}function fr(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Zt,Zt,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Zt,sn,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,sn,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-sn,!0),e.lineTo(n+a.topLeft,r)}const gr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yr(e,t){const n=(""+e).match(gr);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const br=e=>+e||0;function vr(e,t){const n={},r=Tt(t),s=r?Object.keys(t):t,i=Tt(e)?r?n=>Rt(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=br(i(a));return n}function wr(e){return vr(e,{top:"y",right:"x",bottom:"y",left:"x"})}function jr(e){return vr(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Nr(e){const t=wr(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function kr(e,t){e=e||{},t=t||er.font;let n=Rt(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=Rt(e.style,t.style);r&&!(""+r).match(xr)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Rt(e.family,t.family),lineHeight:yr(Rt(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Rt(e.weight,t.weight),string:""};return s.string=function(e){return!e||Mt(e.size)||Mt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function _r(e,t,n,r){let s,i,a,o=!0;for(s=0,i=e.length;s<i;++s)if(a=e[s],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&Ot(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function Sr(e,t){return Object.assign(Object.create(e),t)}function Cr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=zr("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>Cr([r,...e],t,s,n)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>Or(n,r,()=>function(e,t,n,r){let s;for(const i of t)if(s=zr(Er(i,e),n),"undefined"!==typeof s)return Mr(e,s)?Rr(n,r,e,s):s}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Fr(e).includes(t),ownKeys:e=>Fr(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function Ar(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Pr(e,r),setContext:t=>Ar(e,t,n,r),override:s=>Ar(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Or(e,t,()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let o=r[t];Jt(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||r);o.delete(e),Mr(e,l)&&(l=Rr(s._scopes,s,e,l));return l}(t,o,e,n));Ot(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof i.index&&r(e))return t[i.index%t.length];if(Tt(t[0])){const n=t,r=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Rr(r,s,e,l);t.push(Ar(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));Mr(t,o)&&(o=Ar(o,s,i&&i[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function Pr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Jt(n)?n:()=>n,isIndexable:Jt(r)?r:()=>r}}const Er=(e,t)=>e?e+Kt(t):t,Mr=(e,t)=>Tt(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Or(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function Tr(e,t,n){return Jt(e)?e(t,n):e}const Lr=(e,t)=>!0===e?t:"string"===typeof e?Qt(t,e):void 0;function Dr(e,t,n,r,s){for(const i of t){const t=Lr(n,i);if(t){e.add(t);const i=Tr(t._fallback,n,s);if("undefined"!==typeof i&&i!==n&&i!==r)return i}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function Rr(e,t,n,r){const s=t._rootScopes,i=Tr(t._fallback,n,r),a=[...e,...s],o=new Set;o.add(r);let l=Ir(o,a,n,i||n,r);return null!==l&&(("undefined"===typeof i||i===n||(l=Ir(o,a,i,l,r),null!==l))&&Cr(Array.from(o),[""],s,i,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(Ot(s)&&Tt(n))return n;return s||{}}(t,n,r)))}function Ir(e,t,n,r,s){for(;n;)n=Dr(e,t,n,r,s);return n}function zr(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Fr(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Br(e,t,n,r){const{iScale:s}=e,{key:i="r"}=this._parsing,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={r:s.parse(Qt(d,i),c)};return a}const Vr=Number.EPSILON||1e-14,Wr=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ur=e=>"x"===e?"y":"x";function Hr(e,t,n,r){const s=e.skip?t:e,i=t,a=n.skip?t:n,o=yn(i,s),l=yn(a,i);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:i.x-u*(a.x-s.x),y:i.y-u*(a.y-s.y)},next:{x:i.x+h*(a.x-s.x),y:i.y+h*(a.y-s.y)}}}function qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Ur(t),r=e.length,s=Array(r).fill(0),i=Array(r);let a,o,l,c=Wr(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=Wr(e,a+1),l){if(c){const e=c[t]-l[t];s[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?cn(s[a-1])!==cn(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const r=e.length;let s,i,a,o,l,c=Wr(e,0);for(let d=0;d<r-1;++d)l=c,c=Wr(e,d+1),l&&c&&(dn(t[d],0,Vr)?n[d]=n[d+1]=0:(s=n[d]/t[d],i=n[d+1]/t[d],o=Math.pow(s,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[d]=s*a*t[d],n[d+1]=i*a*t[d])))}(e,s,i),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Ur(n),s=e.length;let i,a,o,l=Wr(e,0);for(let c=0;c<s;++c){if(a=o,o=l,l=Wr(e,c+1),!o)continue;const s=o[n],d=o[r];a&&(i=(s-a[n])/3,o["cp1".concat(n)]=s-i,o["cp1".concat(r)]=d-i*t[c]),l&&(i=(l[n]-s)/3,o["cp2".concat(n)]=s+i,o["cp2".concat(r)]=d+i*t[c])}}(e,i,t)}function $r(e,t,n){return Math.max(Math.min(e,n),t)}function Yr(e,t,n,r,s){let i,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)qr(e,s);else{let n=r?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=Hr(n,o,e[Math.min(i+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,i,a,o=or(e[0],t);for(n=0,r=e.length;n<r;++n)a=i,i=o,o=n<r-1&&or(e[n+1],t),i&&(s=e[n],a&&(s.cp1x=$r(s.cp1x,t.left,t.right),s.cp1y=$r(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=$r(s.cp2x,t.left,t.right),s.cp2y=$r(s.cp2y,t.top,t.bottom)))}(e,n)}function Qr(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Kr(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Xr(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Jr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Gr=["top","right","bottom","left"];function Zr(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=Gr[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function es(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=Jr(n),i="border-box"===s.boxSizing,a=Zr(s,"padding"),o=Zr(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,i,e.target))a=s,o=i;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),u=a.left+(d&&o.left),h=a.top+(d&&o.top);let{width:m,height:p}=t;return i&&(m-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-u)/m*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const ts=e=>Math.round(10*e)/10;function ns(e,t,n,r){const s=Jr(e),i=Zr(s,"margin"),a=Xr(s.maxWidth,e,"clientWidth")||nn,o=Xr(s.maxHeight,e,"clientHeight")||nn,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const i=e&&Kr(e);if(i){const e=i.getBoundingClientRect(),a=Jr(i),o=Zr(a,"border","width"),l=Zr(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Xr(a.maxWidth,i,"clientWidth"),s=Xr(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||nn,maxHeight:s||nn}}(e,t,n);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=Zr(s,"border","width"),t=Zr(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-i.width),d=Math.max(0,r?c/r:d-i.height),c=ts(Math.min(c,a,l.maxWidth)),d=ts(Math.min(d,o,l.maxHeight)),c&&!d&&(d=ts(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=ts(Math.floor(d*r))),{width:c,height:d}}function rs(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i)&&(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}const ss=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Qr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function is(e,t){const n=function(e,t){return Jr(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function as(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function os(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function ls(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=as(e,s,n),o=as(s,i,n),l=as(i,t,n),c=as(a,o,n),d=as(o,l,n);return as(c,d,n)}function cs(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function ds(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function us(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function hs(e){return"angle"===e?{between:wn,compare:bn,normalize:vn}:{between:Nn,compare:(e,t)=>e-t,normalize:e=>e}}function ms(e){let{start:t,end:n,count:r,loop:s,style:i}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:i}}function ps(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=hs(r),{start:d,end:u,loop:h,style:m}=function(e,t,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=hs(r),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&a(o(t[u%l][r]),s,i);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,n),p=[];let f,g,x,y=!1,b=null;const v=()=>y||l(s,x,f)&&0!==o(s,x),w=()=>!y||0===o(i,f)||l(i,x,f);for(let j=d,N=d;j<=u;++j)g=t[j%a],g.skip||(f=c(g[r]),f!==x&&(y=l(f,s,i),null===b&&v()&&(b=0===o(f,s)?j:N),null!==b&&w()&&(p.push(ms({start:b,end:j,loop:h,count:a,style:m})),b=null),N=j,x=f));return null!==b&&p.push(ms({start:b,end:u,loop:h,count:a,style:m})),p}function fs(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=ps(r[s],e.points,t);i.length&&n.push(...i)}return n}function gs(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),i=xs(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let d=i,u=t[0].start,h=u;function m(e,t,r,s){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),d=s,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=n[u%l];for(h=u+1;h<=p.end;h++){const i=n[h%l];e=xs(r.setContext(Sr(s,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),ys(e,d)&&m(u,h-1,p.loop,d),t=i,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,n,r):t}function xs(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ys(e,t){if(!t)return!1;const n=[],r=function(e,t){return Bn(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function bs(e,t,n){return e.options.clip?e[n]:t[n]}function vs(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:bs(n,t,"left"),right:bs(n,t,"right"),top:bs(r,t,"top"),bottom:bs(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class ws{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],i=t.duration;s.forEach(r=>r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=En.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let i,a=s.length-1,o=!1;for(;a>=0;--a)i=s[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var js=new ws;const Ns="transparent",ks={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=Vn(e||Ns),s=r.valid&&Vn(t||Ns);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class _s{constructor(e,t,n,r){const s=t[n];r=_r([e.to,r,s,e.from]);const i=_r([e.from,s,r]);this._active=!0,this._fn=e.fn||ks[e.type||typeof i],this._easing=Fn[e.easing]||Fn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,i=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=_r([e.to,t,r,e.from]),this._from=_r([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,i=this._loop,a=this._to;let o;if(this._active=s!==a&&(i||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Ss{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Tt(e))return;const t=Object.keys(er.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Tt(s))return;const i={};for(const e of t)i[e]=s[e];(Ot(s.properties)&&s.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,i)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=s[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,a);continue}d.cancel()}u&&u.duration?(s[l]=d=new _s(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(js.add(this._chart,n),!0):void 0}}function Cs(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:s,end:r?s:i}}function As(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Ps(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,i="single"===r.mode;let a,o,l,c;if(null===t)return;let d=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(d=!0,r.all)continue;break}c=e.values[l],Lt(c)&&(i||0===t||cn(t)===cn(c))&&(t+=c)}return d||r.all?t:0}function Es(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Ms(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Os(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function Ts(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(i,a,r),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=Ms(s,d,n),h[o]=i,h._top=Os(h,a,!0,r.type),h._bottom=Os(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=i}}function Ls(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function Ds(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const Rs=e=>"reset"===e||"none"===e,Is=(e,t)=>t?e:Object.assign({},e);class zs{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Es(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ds(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=Rt(n.xAxisID,Ls(e,"x")),i=t.yAxisID=Rt(n.yAxisID,Ls(e,"y")),a=t.rAxisID=Rt(n.rAxisID,Ls(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,i,a),c=t.vAxisID=r(o,i,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&An(this._data,this),e._stacked&&Ds(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Tt(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",i="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],o[l]={[s]:d,[i]:e[d]};return o}(t,e)}else if(n!==t){if(n){An(n,this);const e=this._cachedMeta;Ds(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),Cn.forEach(e=>{const t="_onData"+Kt(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const a=n.apply(this,s);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...s)}),a}})}))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=Es(t.vScale,t),t.stack!==n.stack&&(r=!0,Ds(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(Ts(this,t._parsed),t._stacked=Es(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:i}=n,a=s.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Ot(r[e])?this.parseArrayData(n,r,e,t):Tt(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(s()&&(d=!1),u=l);n._sorted=d}i&&Ts(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:i}=e,a=s.axis,o=i.axis,l=s.getLabels(),c=s===i,d=new Array(r);let u,h,m;for(u=0,h=r;u<h;++u)m=u+n,d[u]={[a]:c||s.parse(l[m],m),[o]:i.parse(t[m],m)};return d}parseArrayData(e,t,n,r){const{xScale:s,yScale:i}=e,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={x:s.parse(d[0],c),y:i.parse(d[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:s,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:s.parse(Qt(h,a),u),y:i.parse(Qt(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,i=t[e.axis];return Ps({keys:As(r,!0),values:t._stacks[e.axis]._visualValues},i,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let i=null===s?NaN:s;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,i=Ps(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,i=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:As(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let u,h;function m(){h=r[u];const t=h[a.axis];return!Lt(h[e.axis])||c>t||d<t}for(u=0;u<i&&(m()||(this.updateRangeFromParsed(l,e,h,o),!s));++u);if(s)for(u=i-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,i;for(r=0,s=t.length;r<s;++r)i=t[r][e.axis],Lt(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return Tt(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(Rt(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=Cs(e,n),s=Cs(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,s))}for(c=0;c<i.length;++c)i[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return Sr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return Sr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,i=e+"-"+t,a=s[i],o=this.enableOptionSharing&&Xt(n);if(a)return Is(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(er.elements[e]),m=l.resolveNamedOptions(u,h,()=>this.getContext(n,r,t),d);return m.$shared&&(m.$shared=o,s[i]=Object.freeze(Is(m,o))),m}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,i="animation-".concat(t),a=s[i];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),i=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(i,this.getContext(e,n,t))}const l=new Ss(r,o&&o.animations);return o&&o._cacheable&&(s[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Rs(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),i=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:i}}updateElement(e,t,n,r){Rs(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Rs(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,s=t.length,i=Math.min(s,r);i&&this.parse(0,i),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(s),a=e;a<i;++a)s[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&Ds(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Fs(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Pn(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,s,i,a,o=t._length;const l=()=>{32767!==i&&-32768!==i&&(Xt(a)&&(o=Math.min(o,Math.abs(i-a)||o)),a=i)};for(r=0,s=n.length;r<s;++r)i=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)i=t.getPixelForTick(r),l();return o}function Bs(e,t,n,r){return Ot(e)?function(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),a=Math.min(s,i),o=Math.max(s,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:i,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Vs(e,t,n,r){const s=e.iScale,i=e.vScale,a=s.getLabels(),o=s===i,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[s.axis]=o||s.parse(a[c],c),l.push(Bs(h,u,i,c));return l}function Ws(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Us(e,t,n,r){let s=t.borderSkipped;const i={};if(!s)return void(e.borderSkipped=i);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=d:(i[Hs(d,a,o,l)]=!0,s=c)),i[Hs(s,a,o,l)]=!0,e.borderSkipped=i}function Hs(e,t,n,r){var s,i,a;return r?(a=n,e=qs(e=(s=e)===(i=t)?a:s===a?i:s,n,t)):e=qs(e,t,n),e}function qs(e,t,n){return"start"===e?t:"end"===e?n:e}function $s(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,Ke.A)(zs,"defaults",{}),(0,Ke.A)(zs,"datasetElementType",null),(0,Ke.A)(zs,"dataElementType",null);class Ys extends zs{parsePrimitiveData(e,t,n,r){return Vs(e,t,n,r)}parseArrayData(e,t,n,r){return Vs(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?a:o,c="x"===i.axis?a:o,d=[];let u,h,m,p;for(u=n,h=n+r;u<h;++u)p=t[u],m={},m[s.axis]=s.parse(Qt(p,l),u),d.push(Bs(Qt(p,c),m,i,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),i=s._custom,a=Ws(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:i,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||Mt(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[a.axis],f={horizontal:l,base:n.base,enableBorderRadius:!p||Ws(t._custom)||i===p._top||i===p._bottom,x:l?n.head:m.center,y:l?m.center:n.head,height:l?m.size:Math.abs(n.size),width:l?Math.abs(n.size):m.size};u&&(f.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=f.options||e[h].options;Us(f,g,p,i),$s(f,g,c.ratio),this.updateElement(e[h],h,f,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),s=n.options.stacked,i=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(Mt(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===i.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&i.push(c.stack),c.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Rt("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,i;for(s=0,i=t.data.length;s<i;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=e.barThickness;return{min:a||Fs(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:i}}=this,a=s||0,o=this.getParsed(e),l=o._custom,c=Ws(l);let d,u,h=o[t.axis],m=0,p=n?this.applyStack(t,o,n):h;p!==h&&(m=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&cn(h)!==cn(l.barEnd)&&(m=0),m+=h);const f=Mt(s)||c?m:s;let g=t.getPixelForValue(f);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):g,u=d-g,Math.abs(u)<i){u=function(e,t,n){return 0!==e?cn(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,a)*i,h===a&&(g-=u/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),m=Math.max(e,s);g=Math.max(Math.min(g,m),l),d=g+u,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=cn(u)*t.getLineWidthForValue(a)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,i=Rt(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,i=s[e];let a=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===a&&(a=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const s=n.barThickness;let i,a;return Mt(s)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:t.pixels[e]-i/2}}(e,t,r,n*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Rt(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+u;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(i,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(i,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}(0,Ke.A)(Ys,"id","bar"),(0,Ke.A)(Ys,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Ke.A)(Ys,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Qs extends zs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let i=0;i<s.length;i++)s[i]._custom=this.resolveDataElementOptions(i+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=Rt(e[2],this.resolveDataElementOptions(i+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=Rt(e&&e.r&&+e.r,this.resolveDataElementOptions(i+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y),l=i._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=i.axis,d=a.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!s&&this.getParsed(u),h={},m=h[c]=s?i.getPixelForDecimal(.5):i.getPixelForValue(n[c]),p=h[d]=s?a.getBasePixel():a.getPixelForValue(n[d]);h.skip=isNaN(m)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),s&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return"active"!==t&&(r.radius=0),r.radius+=Rt(n&&n._custom,s),r}}(0,Ke.A)(Qs,"id","bubble"),(0,Ke.A)(Qs,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Ke.A)(Qs,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Ks extends zs{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,i,a=e=>+n[e];if(Tt(n[e])){const{key:e="value"}=this._parsing;a=t=>+Qt(n[t],e)}for(s=e,i=e+t;s<i;++s)r._parsed[s]=a(s)}}_getRotation(){return pn(this.options.rotation-90)}_getCircumference(){return pn(this.options.circumference)}_getRotationExtents(){let e=en,t=-en;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),i=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+i)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,i=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-i)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:f,offsetY:g}=function(e,t,n){let r=1,s=1,i=0,a=0;if(t<en){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),m=(e,t,r)=>wn(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>wn(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),f=m(0,c,u),g=m(sn,d,h),x=p(Zt,c,u),y=p(Zt+sn,d,h);r=(f-x)/2,s=(g-y)/2,i=-(f+x)/2,a=-(g+y)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}(h,u,o),x=(n.width-i)/m,y=(n.height-i)/p,b=Math.max(Math.min(x,y)/2,0),v=It(this.options.radius,b),w=(v-Math.max(v*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*v,this.offsetY=g*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/en)}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.chartArea,o=i.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=s&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,r);let f,g=this._getRotation();for(f=0;f<t;++f)g+=this._circumference(f,s);for(f=t;f<t+n;++f){const t=this._circumference(f,s),n=e[f],i={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(i.options=m||this.resolveDataElementOptions(f,n.active?"active":r)),g+=t,this.updateElement(n,f,i,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?en*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=$n(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,i,a,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){i=n.getDatasetMeta(r),e=i.data,a=i.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Rt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Ke.A)(Ks,"id","doughnut"),(0,Ke.A)(Ks,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Ke.A)(Ks,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Ke.A)(Ks,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Xs extends zs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,i=this.chart._animationsDisabled;let{start:a,count:o}=Ln(t,r,i);this._drawStart=a,this._drawCount=o,Dn(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=i.axis,h=a.axis,{spanGaps:m,segment:p}=this.options,f=hn(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===r,x=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let v=0;v<y;++v){const n=e[v],m=g?n:{};if(v<t||v>=x){m.skip=!0;continue}const y=this.getParsed(v),w=Mt(y[h]),j=m[u]=i.getPixelForValue(y[u],v),N=m[h]=s||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[h],v);m.skip=isNaN(j)||isNaN(N)||w,m.stop=v>0&&Math.abs(y[u]-b[u])>f,p&&(m.parsed=y,m.raw=l.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,n.active?"active":r)),g||this.updateElement(n,v,m,r),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Ke.A)(Xs,"id","line"),(0,Ke.A)(Xs,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Ke.A)(Xs,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Js extends zs{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=$n(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return Br.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),i=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-i*this.index,this.innerRadius=this.outerRadius-i}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*Zt;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,m);for(u=t;u<t+n;u++){const t=e[u];let n=h,p=h+this._computeAngle(u,r,m),f=i.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,s&&(a.animateScale&&(f=0),a.animateRotate&&(n=p=d));const g={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?pn(this.resolveDataElementOptions(e,t).angle||n):0}}(0,Ke.A)(Js,"id","polarArea"),(0,Ke.A)(Js,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Ke.A)(Js,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Gs extends Ks{}(0,Ke.A)(Gs,"id","pie"),(0,Ke.A)(Gs,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Zs extends zs{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Br.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const i={_loop:!0,_fullLoop:s.length===r.length,options:t};this.updateElement(n,void 0,i,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,i="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=s.getPointPositionForValue(a,this.getParsed(a).r),l=i?s.xCenter:o.x,c=i?s.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,d,r)}}}(0,Ke.A)(Zs,"id","radar"),(0,Ke.A)(Zs,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Ke.A)(Zs,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ei extends zs{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:i}=Ln(t,n,r);if(this._drawStart=s,this._drawCount=i,Dn(t)&&(s=0,i=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:i}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=i.axis,m=a.axis,{spanGaps:p,segment:f}=this.options,g=hn(p)?p:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||"none"===r;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=x?t:{},p=Mt(n[m]),v=c[h]=i.getPixelForValue(n[h],b),w=c[m]=s||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[m],b);c.skip=isNaN(v)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[h]-y[h])>g,f&&(c.parsed=n,c.raw=l.data[b]),u&&(c.options=d||this.resolveDataElementOptions(b,t.active?"active":r)),x||this.updateElement(t,b,c,r),y=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),i=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,i)/2}}(0,Ke.A)(ei,"id","scatter"),(0,Ke.A)(ei,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Ke.A)(ei,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ni{static override(e){Object.assign(ni.prototype,e)}constructor(e){(0,Ke.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return ti()}parse(){return ti()}format(){return ti()}add(){return ti()}diff(){return ti()}startOf(){return ti()}endOf(){return ti()}}var ri=ni;function si(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?Sn:_n;if(!r){const r=a(i,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,i=n.slice(0,r.lo+1).reverse().findIndex(e=>!Mt(e[t.axis]));r.lo-=Math.max(0,i);const a=n.slice(r.hi).findIndex(e=>!Mt(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(s._sharedOptions){const e=i[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(i,t,n-r),s=a(i,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:i.length-1}}function ii(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=si(i[o],t,a,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function ai(e,t,n,r,s){const i=[];if(!s&&!e.isPointInArea(t))return i;return ii(e,n,t,function(n,a,o){(s||or(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:a,index:o})},!0),i}function oi(e,t,n,r,s,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return ii(e,n,t,function(n,c,d){const u=n.inRange(t.x,t.y,s);if(r&&!u)return;const h=n.getCenterPoint(s);if(!(!!i||e.isPointInArea(h))&&!u)return;const m=o(t,h);m<l?(a=[{element:n,datasetIndex:c,index:d}],l=m):m===l&&a.push({element:n,datasetIndex:c,index:d})}),a}function li(e,t,n,r,s,i){return i||e.isPointInArea(t)?"r"!==n||r?oi(e,t,n,r,s,i):function(e,t,n,r){let s=[];return ii(e,n,t,function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=xn(e,{x:t.x,y:t.y});wn(l,a,o)&&s.push({element:e,datasetIndex:n,index:i})}),s}(e,t,n,s):[]}function ci(e,t,n,r,s){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return ii(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],s)&&(i.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))}),r&&!o?[]:i}var di={evaluateInteractionItems:ii,modes:{index(e,t,n,r){const s=es(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?ai(e,s,i,r,a):li(e,s,i,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const s=es(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?ai(e,s,i,r,a):li(e,s,i,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>ai(e,es(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=es(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return li(e,s,i,n.intersect,r,a)},x:(e,t,n,r)=>ci(e,es(t,e),"x",n.intersect,r),y:(e,t,n,r)=>ci(e,es(t,e),"y",n.intersect,r)}};const ui=["left","top","right","bottom"];function hi(e,t){return e.filter(e=>e.pos===t)}function mi(e,t){return e.filter(e=>-1===ui.indexOf(e.pos)&&e.box.axis===t)}function pi(e,t){return e.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function fi(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!ui.includes(r))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:a&&t.availableHeight)}return n}function gi(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function xi(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function yi(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!Tt(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[s]+=n.size}i.getPadding&&xi(a,i.getPadding());const o=Math.max(0,t.outerWidth-gi(a,e,"left","right")),l=Math.max(0,t.outerHeight-gi(a,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function bi(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function vi(e,t,n,r){const s=[];let i,a,o,l,c,d;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,bi(o.horizontal,t));const{same:a,other:u}=yi(t,n,o,r);c|=a&&s.length,d=d||u,l.fullSize||s.push(o)}return c&&vi(s,t,n,r)||d}function wi(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function ji(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,i=l.size||e.height;Xt(l.start)&&(a=l.start),e.fullSize?wi(e,s.left,a,n.outerWidth-s.right-s.left,i):wi(e,t.left+l.placed,a,r,i),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;Xt(l.start)&&(i=l.start),e.fullSize?wi(e,i,s.top,a,n.outerHeight-s.bottom-s.top):wi(e,i,t.top+l.placed,a,r),l.start=i,l.placed+=r,i=e.right}}t.x=i,t.y=a}var Ni={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=Nr(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,i,a,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=pi(t.filter(e=>e.box.fullSize),!0),r=pi(hi(t,"left"),!0),s=pi(hi(t,"right")),i=pi(hi(t,"top"),!0),a=pi(hi(t,"bottom")),o=mi(t,"x"),l=mi(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:hi(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Ft(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},s);xi(h,Nr(r));const m=Object.assign({maxPadding:h,w:i,h:a,x:s.left,y:s.top},s),p=fi(l.concat(c),u);vi(o.fullSize,m,u,p),vi(l,m,u,p),vi(c,m,u,p)&&vi(l,m,u,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(m),ji(o.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,ji(o.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ft(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class ki{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class _i extends ki{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Si="$chartjs",Ci={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ai=e=>null===e||""===e;const Pi=!!ss&&{passive:!0};function Ei(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Pi)}function Mi(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Oi(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Mi(n.addedNodes,r),t=t&&!Mi(n.removedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Ti(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Mi(n.removedNodes,r),t=t&&!Mi(n.addedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Li=new Map;let Di=0;function Ri(){const e=window.devicePixelRatio;e!==Di&&(Di=e,Li.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Ii(e,t,n){const r=e.canvas,s=r&&Kr(r);if(!s)return;const i=Mn((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)});return a.observe(s),function(e,t){Li.size||window.addEventListener("resize",Ri),Li.set(e,t)}(e,i),a}function zi(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Li.delete(e),Li.size||window.removeEventListener("resize",Ri)}(e)}function Fi(e,t,n){const r=e.canvas,s=Mn(t=>{null!==e.ctx&&n(function(e,t){const n=Ci[e.type]||e.type,{x:r,y:s}=es(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,Pi)}(r,t,s),s}class Bi extends ki{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[Si]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ai(s)){const t=is(e,"width");void 0!==t&&(e.width=t)}if(Ai(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=is(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Si])return!1;const n=t[Si].initial;["height","width"].forEach(e=>{const r=n[e];Mt(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[Si],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:Oi,detach:Ti,resize:Ii}[t]||Fi;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:zi,detach:zi,resize:zi}[t]||Ei)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return ns(e,t,n,r)}isAttached(e){const t=e&&Kr(e);return!(!t||!t.isConnected)}}class Vi{constructor(){(0,Ke.A)(this,"x",void 0),(0,Ke.A)(this,"y",void 0),(0,Ke.A)(this,"active",!1),(0,Ke.A)(this,"options",void 0),(0,Ke.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return hn(this.x)&&hn(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function Wi(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return function(e,t,n,r){let s,i=0,a=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===a&&(t.push(e[s]),i++,a=n[i*r])}(t,c,i,a/s),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const i=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>s)return e}return Math.max(s,1)}(i,t,s);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(Ui(t,c,d,Mt(r)?0:o-r,o),e=0,n=a-1;e<n;e++)Ui(t,c,d,i[e],i[e+1]);return Ui(t,c,d,l,Mt(r)?t.length:l+r),c}return Ui(t,c,d),c}function Ui(e,t,n,r,s){const i=Rt(r,0),a=Math.min(Rt(s,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=i;c<0;)d++,c=Math.round(i+d*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),d++,c=Math.round(i+d*n))}(0,Ke.A)(Vi,"defaults",{}),(0,Ke.A)(Vi,"defaultRoutes",void 0);const Hi=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,qi=(e,t)=>Math.min(t||e,e);function $i(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function Yi(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<i-o||c>a+o)))return c}function Qi(e){return e.drawTicks?e.tickLength:0}function Ki(e,t){if(!e.display)return 0;const n=kr(e.font,t),r=Nr(e.padding);return(Ot(e.text)?e.text.length:1)*n.lineHeight+r.height}function Xi(e,t,n){let r=On(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Ji extends Vi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Dt(e,Number.POSITIVE_INFINITY),t=Dt(t,Number.NEGATIVE_INFINITY),n=Dt(n,Number.POSITIVE_INFINITY),r=Dt(r,Number.NEGATIVE_INFINITY),{min:Dt(e,n),max:Dt(t,r),minDefined:Lt(e),maxDefined:Lt(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),i||(r=Math.max(r,t.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Dt(n,Dt(r,n)),max:Dt(r,Dt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zt(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,i=It(t,(s-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(i)),max:a(s,i)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?$i(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=Wi(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zt(this.options.afterUpdate,[this])}beforeSetDimensions(){zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),zt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=zt(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=qi(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let i,a,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=jn(this.chart.width-d,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),d+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-Qi(e.grid)-t.padding-Ki(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=fn(Math.min(Math.asin(jn((c.highest.height+6)/i,-1,1)),Math.asin(jn(a/o,-1,1))-Math.asin(jn(u/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=Ki(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Qi(s)+i):(e.height=this.maxHeight,e.width=Qi(s)+i),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:i}=this._getLabelSizes(),o=2*n.padding,l=pn(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(a){const t=n.mirror?0:d*s.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+d*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===s?u=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+i,this.paddingBottom=r+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Mt(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=$i(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,i=[],a=[],o=Math.floor(t/qi(t,n));let l,c,d,u,h,m,p,f,g,x,y,b=0,v=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=m=h.string,p=s[m]=s[m]||{data:{},gc:[]},f=h.lineHeight,g=x=0,Mt(u)||Ot(u)){if(Ot(u))for(c=0,d=u.length;c<d;++c)y=u[c],Mt(y)||Ot(y)||(g=tr(r,p.data,p.gc,g,y),x+=f)}else g=tr(r,p.data,p.gc,g,u),x=f;i.push(g),a.push(x),b=Math.max(g,b),v=Math.max(x,v)}!function(e,t){Ft(e,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(s,t);const w=i.indexOf(b),j=a.indexOf(v),N=e=>({width:i[e]||0,height:a[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(j),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return jn(this._alignToPixels?rr(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Sr(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Sr(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=pn(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),i=e.autoSkipPadding||0,a=s?s.widest.width+i:0,o=s?s.highest.height+i:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:i,border:a}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=Qi(s),u=[],h=a.setContext(this.getContext()),m=h.display?h.width:0,p=m/2,f=function(e){return rr(n,e,m)};let g,x,y,b,v,w,j,N,k,_,S,C;if("top"===i)g=f(this.bottom),w=this.bottom-d,N=g-p,_=f(e.top)+p,C=e.bottom;else if("bottom"===i)g=f(this.top),_=e.top,C=f(e.bottom)-p,w=g+p,N=this.top+d;else if("left"===i)g=f(this.right),v=this.right-d,j=g-p,k=f(e.left)+p,S=e.right;else if("right"===i)g=f(this.left),k=e.left,S=f(e.right)-p,v=g+p,j=this.left+d;else if("x"===t){if("center"===i)g=f((e.top+e.bottom)/2+.5);else if(Tt(i)){const e=Object.keys(i)[0],t=i[e];g=f(this.chart.scales[e].getPixelForValue(t))}_=e.top,C=e.bottom,w=g+p,N=w+d}else if("y"===t){if("center"===i)g=f((e.left+e.right)/2);else if(Tt(i)){const e=Object.keys(i)[0],t=i[e];g=f(this.chart.scales[e].getPixelForValue(t))}v=g-p,j=v-d,k=e.left,S=e.right}const A=Rt(r.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/A));for(x=0;x<c;x+=P){const e=this.getContext(x),t=s.setContext(e),r=a.setContext(e),i=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,m=t.tickWidth,p=t.tickColor,f=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=Yi(this,x,o),void 0!==y&&(b=rr(n,y,i),l?v=j=k=S=b:w=N=_=C=b,u.push({tx1:v,ty1:w,tx2:j,ty2:N,x1:k,y1:_,x2:S,y2:C,width:i,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:p,tickBorderDash:f,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=s,u=Qi(n.grid),h=u+c,m=d?-c:h,p=-pn(this.labelRotation),f=[];let g,x,y,b,v,w,j,N,k,_,S,C,A="middle";if("top"===r)w=this.bottom-m,j=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+m,j=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,v=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,v=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(Tt(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}j=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)v=(e.left+e.right)/2-h;else if(Tt(r)){const e=Object.keys(r)[0],t=r[e];v=this.chart.scales[e].getPixelForValue(t)}j=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?A="top":"end"===o&&(A="bottom"));const P=this._getLabelSizes();for(g=0,x=a.length;g<x;++g){y=a[g],b=y.label;const e=s.setContext(this.getContext(g));N=this.getPixelForTick(g)+s.labelOffset,k=this._resolveTickFontOptions(g),_=k.lineHeight,S=Ot(b)?b.length:1;const t=S/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=j;if(i?(v=N,"inner"===j&&(h=g===x-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===r?"near"===l||0!==p?-S*_+_/2:"center"===l?-P.highest.height/2-t*_+_:-P.highest.height+_/2:"near"===l||0!==p?_/2:"center"===l?P.highest.height/2-t*_:P.highest.height-S*_,d&&(C*=-1),0===p||e.showLabelBackdrop||(v+=_/2*Math.sin(p))):(w=N,C=(1-S)*_/2),e.showLabelBackdrop){const t=Nr(e.backdropPadding),n=P.heights[g],r=P.widths[g];let s=C-t.top,i=0-t.left;switch(A){case"middle":s-=n/2;break;case"bottom":s-=n}switch(j){case"center":i-=r/2;break;case"right":i-=r;break;case"inner":g===x-1?i-=r:g>0&&(i-=r/2)}u={left:i,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}f.push({label:b,font:k,textOffset:C,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:A,translation:[v,w],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-pn(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,i=e+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,i;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,i=r.length;s<i;++s){const e=r[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),i=n.display?s.width:0;if(!i)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=rr(e,this.left,i)-i/2,c=rr(e,this.right,a)+a/2,d=u=o):(d=rr(e,this.top,i)-i/2,u=rr(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&lr(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;pr(t,s.label,0,s.textOffset,n,e)}n&&cr(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=kr(n.font),i=Nr(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||Tt(t)?(o+=i.bottom,Ot(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,p=0;const f=a-s,g=o-i;if(e.isHorizontal()){if(h=Tn(r,i,o),Tt(n)){const e=Object.keys(n)[0],r=n[e];m=d[e].getPixelForValue(r)+f-t}else m="center"===n?(c.bottom+c.top)/2+f-t:Hi(e,n,t);u=o-i}else{if(Tt(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:Hi(e,n,t);m=Tn(r,a,s),p="left"===n?-sn:sn}return{titleX:h,titleY:m,maxWidth:u,rotation:p}}(this,o,t,a);pr(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:u,textAlign:Xi(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Rt(e.grid&&e.grid.z,-1),r=Rt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Ji.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,i;for(s=0,i=t.length;s<i;++s){const i=t[s];i[n]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return kr(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gi{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,i=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=Ht(Object.create(null),[n?er.get(n):{},er.get(t),e.defaults]);er.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");er.route(i,s,l,o)})}(t,e.defaultRoutes);e.descriptors&&er.describe(t,e.descriptors)}(e,i,n),this.override&&er.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in er[r]&&(delete er[r][n],this.override&&delete Kn[n])}}class Zi{constructor(){this.controllers=new Gi(zs,"datasets",!0),this.elements=new Gi(Vi,"elements"),this.plugins=new Gi(Object,"plugins"),this.scales=new Gi(Ji,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Ft(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=Kt(e);zt(n["before"+r],[],n),t[e](n),zt(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ea=new Zi;class ta{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===zt(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){Mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=Rt(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(ea.plugins.items);for(let i=0;i<r.length;i++)n.push(ea.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const e=s[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:i}=t;const a=[],o=e.getContext();for(const l of s){const t=l.id,s=na(n[t],r);null!==s&&a.push({plugin:l,options:ra(e.config,{plugin:l,local:i[t]},s,o)})}return a}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function na(e,t){return t||!1!==e?!0===e?{}:e:null}function ra(e,t,n,r){let{plugin:s,local:i}=t;const a=e.pluginScopeKeys(s),o=e.getOptionScopes(n,a);return i&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sa(e,t){const n=er.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ia(e){if("x"===e||"y"===e||"r"===e)return e}function aa(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function oa(e){if(ia(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||aa(s.position)||e.length>1&&ia(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function la(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function ca(e,t){const n=Kn[e.type]||{scales:{}},r=t.scales||{},s=sa(e.type,t),i=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!Tt(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=oa(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return la(e,"x",n[0])||la(e,"y",n[0])}return{}}(t,e),er.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};i[t]=qt(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,a=n.indexAxis||sa(s,t),o=(Kn[s]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;i[s]=i[s]||Object.create(null),qt(i[s],[{axis:t},r[s],o[e]])})}),Object.keys(i).forEach(e=>{const t=i[e];qt(t,[er.scales[t.type],er.scale])}),i}function da(e){const t=e.options||(e.options={});t.plugins=Rt(t.plugins,{}),t.scales=ca(e,t)}function ua(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const ha=new Map,ma=new Set;function pa(e,t){let n=ha.get(e);return n||(n=t(),ha.set(e,n),ma.add(n)),n}const fa=(e,t,n)=>{const r=Qt(t,n);void 0!==r&&e.add(r)};class ga{constructor(e){this._config=function(e){return(e=e||{}).data=ua(e.data),da(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ua(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),da(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return pa(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return pa("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return pa("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return pa("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>fa(o,e,t))),t.forEach(e=>fa(o,r,e)),t.forEach(e=>fa(o,Kn[s]||{},e)),t.forEach(e=>fa(o,er,e)),t.forEach(e=>fa(o,Xn,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),ma.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Kn[t]||{},er.datasets[t]||{},{type:t},er,Xn]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:i,subPrefixes:a}=xa(this._resolverCache,e,r);let o=i;if(function(e,t){const{isScriptable:n,isIndexable:r}=Pr(e);for(const s of t){const t=n(s),i=r(s),a=(i||t)&&e[s];if(t&&(Jt(a)||ya(a))||i&&Ot(a))return!0}return!1}(i,t)){s.$shared=!1;o=Ar(i,n=Jt(n)?n():n,this.createResolver(e,n,a))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=xa(this._resolverCache,e,n);return Tt(t)?Ar(s,t,void 0,r):s}}function xa(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);if(!i){i={resolver:Cr(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(s,i)}return i}const ya=e=>Tt(e)&&Object.getOwnPropertyNames(e).some(t=>Jt(e[t]));const ba=["top","bottom","left","right","chartArea"];function va(e,t){return"top"===e||"bottom"===e||-1===ba.indexOf(e)&&"x"===t}function wa(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function ja(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),zt(n&&n.onComplete,[e],t)}function Na(e){const t=e.chart,n=t.options.animation;zt(n&&n.onProgress,[e],t)}function ka(e){return Qr()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const _a={},Sa=e=>{const t=ka(e);return Object.values(_a).filter(e=>e.canvas===t).pop()};function Ca(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const i=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=i)}}}class Aa{static register(){ea.add(...arguments),Pa()}static unregister(){ea.remove(...arguments),Pa()}constructor(e,t){const n=this.config=new ga(t),r=ka(e),s=Sa(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Qr()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?_i:Bi}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Et(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ta,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),i.resizeDelay||0),this._dataChanges=[],_a[this.id]=this,a&&o?(js.listen(this,"complete",ja),js.listen(this,"progress",Na),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return Mt(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ea}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rs(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sr(this.canvas,this.ctx),this}stop(){return js.stop(this),this}resize(e,t){js.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,rs(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),zt(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Ft(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],r=oa(e,n),s="r"===r,i="x"===r;return{options:n,dposition:s?"chartArea":i?"bottom":"left",dtype:s?"radialLinear":i?"category":"linear"}}))),Ft(s,t=>{const s=t.options,i=s.id,a=oa(i,s),o=Rt(s.type,t.dtype);void 0!==s.position&&va(s.position,a)===va(t.dposition)||(s.position=t.dposition),r[i]=!0;let l=null;if(i in n&&n[i].type===o)l=n[i];else{l=new(ea.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)}),Ft(r,(e,t)=>{e||delete n[t]}),Ft(n,e=>{Ni.configure(this,e,e.options),Ni.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(wa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const i=r.type||this.config.type;if(s.type&&s.type!==i&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=i,s.indexAxis=r.indexAxis||sa(i,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=ea.getController(i),{datasetElementType:r,dataElementType:a}=er.datasets[i];Object.assign(t,{dataElementType:ea.getElement(a),datasetElementType:r&&ea.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Ft(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||Ft(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wa("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ft(this.scales,e=>{Ni.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Gt(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){Ca(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!Gt(r,n(s)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ni.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Ft(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Jt(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(js.has(this)?this.attached&&!js.running(this)&&js.start(this):(this.draw(),ja({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=vs(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&lr(t,r),e.controller.draw(),r&&cr(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return or(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=di.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Sr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),i=s.controller._resolveAnimations(void 0,r);Xt(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),js.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sr(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete _a[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Ft(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",i)};i=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){Ft(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ft(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,i,a,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[r+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!Bt(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),i=s(t,e),a=n?e:s(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,i=t,a=this._getActiveElements(e,r,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,zt(s.onHover,[e,a,this],this),o&&zt(s.onClick,[e,a,this],this));const c=!Bt(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function Pa(){return Ft(Aa.instances,e=>e._plugins.invalidate())}function Ea(e,t,n,r){const s=vr(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const i=(n-t)/2,a=Math.min(i,r*t/2),o=e=>{const t=(n-Math.min(i,e))*r/2;return jn(e,0,Math.min(i,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:jn(s.innerStart,0,a),innerEnd:jn(s.innerEnd,0,a)}}function Ma(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Oa(e,t,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let m=0;const p=s-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;m=(p-(0!==e?p*e/(e+r):p))/2}const f=(p-Math.max(.001,p*u-n/Zt)/u)/2,g=l+f+m,x=s-f-m,{outerStart:y,outerEnd:b,innerStart:v,innerEnd:w}=Ea(t,h,u,x-g),j=u-y,N=u-b,k=g+y/j,_=x-b/N,S=h+v,C=h+w,A=g+v/S,P=x-w/C;if(e.beginPath(),i){const t=(k+_)/2;if(e.arc(a,o,u,k,t),e.arc(a,o,u,t,_),b>0){const t=Ma(N,_,a,o);e.arc(t.x,t.y,b,_,x+sn)}const n=Ma(C,x,a,o);if(e.lineTo(n.x,n.y),w>0){const t=Ma(C,P,a,o);e.arc(t.x,t.y,w,x+sn,P+Math.PI)}const r=(x-w/h+(g+v/h))/2;if(e.arc(a,o,h,x-w/h,r,!0),e.arc(a,o,h,r,g+v/h,!0),v>0){const t=Ma(S,A,a,o);e.arc(t.x,t.y,v,A+Math.PI,g-sn)}const s=Ma(j,g,a,o);if(e.lineTo(s.x,s.y),y>0){const t=Ma(j,k,a,o);e.arc(t.x,t.y,y,g-sn,k)}}else{e.moveTo(a,o);const t=Math.cos(k)*u+a,n=Math.sin(k)*u+o;e.lineTo(t,n);const r=Math.cos(_)*u+a,s=Math.sin(_)*u+o;e.lineTo(r,s)}e.closePath()}function Ta(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:m}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(i){Oa(e,t,n,r,f,s);for(let t=0;t<i;++t)e.stroke();isNaN(o)||(f=a+(o%en||en))}p&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(i,a,o,r-c,n+c),l>s?(c=s/l,e.arc(i,a,l,n+c,r-c,!0)):e.arc(i,a,s,n+sn,r-sn),e.closePath(),e.clip()}(e,t,f),l.selfJoin&&f-a>=Zt&&0===m&&"miter"!==d&&function(e,t,n){const{startAngle:r,x:s,y:i,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/a,vn(r-n));if(e.beginPath(),e.arc(s,i,a-c/2,r+u/2,n-u/2),o>0){const t=Math.min(c/o,vn(r-n));e.arc(s,i,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*vn(r-n));if("round"===d)e.arc(s,i,t,n-Zt/2,r+Zt/2,!0);else if("bevel"===d){const a=2*t*t,o=-a*Math.cos(n+Zt/2)+s,l=-a*Math.sin(n+Zt/2)+i,c=a*Math.cos(r+Zt/2)+s,d=a*Math.sin(r+Zt/2)+i;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,f),i||(Oa(e,t,n,r,f,s),e.stroke())}(0,Ke.A)(Aa,"defaults",er),(0,Ke.A)(Aa,"instances",_a),(0,Ke.A)(Aa,"overrides",Kn),(0,Ke.A)(Aa,"registry",ea),(0,Ke.A)(Aa,"version","4.5.0"),(0,Ke.A)(Aa,"getChart",Sa);class La extends Vi{constructor(e){super(),(0,Ke.A)(this,"circumference",void 0),(0,Ke.A)(this,"endAngle",void 0),(0,Ke.A)(this,"fullCircles",void 0),(0,Ke.A)(this,"innerRadius",void 0),(0,Ke.A)(this,"outerRadius",void 0),(0,Ke.A)(this,"pixelMargin",void 0),(0,Ke.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:i}=xn(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=Rt(d,o-a),m=wn(s,a,o)&&a!==o,p=h>=en||m,f=Nn(i,l+u,c+u);return p&&f}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,d=(i+a+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>en?Math.floor(n/en):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(Zt,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=t;let l=t.endAngle;if(i){Oa(e,t,n,r,l,s);for(let t=0;t<i;++t)e.fill();isNaN(o)||(l=a+(o%en||en))}Oa(e,t,n,r,l,s),e.fill()}(e,this,o,s,i),Ta(e,this,o,s,i),e.restore()}}function Da(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Rt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Rt(n.borderDash,t.borderDash)),e.lineDashOffset=Rt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Rt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Rt(n.borderWidth,t.borderWidth),e.strokeStyle=Rt(n.borderColor,t.borderColor)}function Ra(e,t,n){e.lineTo(n.x,n.y)}function Ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=t,l=Math.max(s,a),c=Math.min(i,o),d=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function za(e,t,n,r){const{points:s,options:i}=t,{count:a,start:o,loop:l,ilen:c}=Ia(s,n,r),d=function(e){return e.stepped?dr:e.tension||"monotone"===e.cubicInterpolationMode?ur:Ra}(i);let u,h,m,{move:p=!0,reverse:f}=r||{};for(u=0;u<=c;++u)h=s[(o+(f?c-u:u))%a],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,f,i.stepped),m=h);return l&&(h=s[(o+(f?c:0))%a],d(e,m,h,f,i.stepped)),!!l}function Fa(e,t,n,r){const s=t.points,{count:i,start:a,ilen:o}=Ia(s,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,m,p,f,g=0,x=0;const y=e=>(a+(c?o-e:e))%i,b=()=>{m!==p&&(e.lineTo(g,p),e.lineTo(g,m),e.lineTo(g,f))};for(l&&(u=s[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=s[y(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<m?m=n:n>p&&(p=n),g=(x*g+t)/++x):(b(),e.lineTo(t,n),h=r,x=0,m=p=n),f=n}b()}function Ba(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Fa:za}(0,Ke.A)(La,"id","arc"),(0,Ke.A)(La,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Ke.A)(La,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Ke.A)(La,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Va="function"===typeof Path2D;function Wa(e,t,n,r){Va&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),Da(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:i}=t,a=Ba(t);for(const o of s)Da(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Ua extends Vi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Yr(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}(n,s,i,r);return gs(e,!0===r?[{start:a,end:o,loop:i}]:function(e,t,n,r){const s=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(r=!1,i.push({start:t%s,end:(a-1)%s,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%s,end:o%s,loop:r}),i}(n,a,o<a?o+s:o,!!e._fullLoop&&0===a&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,i=fs(this,{property:t,start:r,end:r});if(!i.length)return;const a=[],o=function(e){return e.stepped?os:e.tension||"monotone"===e.cubicInterpolationMode?ls:as}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:d}=i[l],u=s[c],h=s[d];if(u===h){a.push(u);continue}const m=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);m[t]=e[t],a.push(m)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Ba(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=Ba(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)i&=s(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Wa(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ha(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}(0,Ke.A)(Ua,"id","line"),(0,Ke.A)(Ua,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Ke.A)(Ua,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Ke.A)(Ua,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class qa extends Vi{constructor(e){super(),(0,Ke.A)(this,"parsed",void 0),(0,Ke.A)(this,"skip",void 0),(0,Ke.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:i}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-i,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Ha(this,e,"x",t)}inYRange(e,t){return Ha(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!or(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,ir(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function $a(e,t){const{x:n,y:r,base:s,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=a/2,o=Math.min(n,s),l=Math.max(n,s),c=r-u,d=r+u):(u=i/2,o=n-u,l=n+u,c=Math.min(r,s),d=Math.max(r,s)),{left:o,top:c,right:l,bottom:d}}function Ya(e,t,n,r){return e?0:jn(t,n,r)}function Qa(e){const t=$a(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=wr(r);return{t:Ya(s.top,i.top,0,n),r:Ya(s.right,i.right,0,t),b:Ya(s.bottom,i.bottom,0,n),l:Ya(s.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=jr(s),a=Math.min(t,n),o=e.borderSkipped,l=r||Tt(s);return{topLeft:Ya(!l||o.top||o.left,i.topLeft,0,a),topRight:Ya(!l||o.top||o.right,i.topRight,0,a),bottomLeft:Ya(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:Ya(!l||o.bottom||o.right,i.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Ka(e,t,n,r){const s=null===t,i=null===n,a=e&&!(s&&i)&&$a(e,r);return a&&(s||Nn(t,a.left,a.right))&&(i||Nn(n,a.top,a.bottom))}function Xa(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ja(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+a,radius:e.radius}}(0,Ke.A)(qa,"id","point"),(0,Ke.A)(qa,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Ke.A)(qa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Ga extends Vi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:i}=Qa(this),a=(o=i.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?fr:Xa;var o;e.save(),i.w===s.w&&i.h===s.h||(e.beginPath(),a(e,Ja(i,t,s)),e.clip(),a(e,Ja(s,-t,i)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Ja(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Ka(this,e,t,n)}inXRange(e,t){return Ka(this,e,null,t)}inYRange(e,t){return Ka(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Ke.A)(Ga,"id","bar"),(0,Ke.A)(Ga,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Ke.A)(Ga,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Za=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class eo extends Vi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=zt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=kr(n.font),s=r.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Za(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const p=n+t/2+s.measureText(e.text).width;(0===m||l[l.length-1]+p+2*a>i)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),o[m]={left:0,top:h,row:u,width:p,height:r},l[l.length-1]+=p+a}),d}_fitCols(e,t,n,r){const{ctx:s,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let d=a,u=0,h=0,m=0,p=0;return this.legendItems.forEach((e,i)=>{const{itemWidth:f,itemHeight:g}=function(e,t,n,r,s){const i=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(s).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=to(t,n));return r}(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,s,e,r);i>0&&h+g+2*a>c&&(d+=u+a,l.push({width:u,height:h}),m+=u+a,p++,u=h=0),o[i]={left:m,top:h,col:p,width:f,height:g},u=Math.max(u,f),h+=g+a}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,i=cs(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=Tn(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,a=Tn(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+r}else{let s=0,a=Tn(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,a=Tn(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+r,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;lr(e,this),this._draw(),cr(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:i}=e,a=er.color,o=cs(e.rtl,this.left,this.width),l=kr(i.font),{padding:c}=i,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:m,boxHeight:p,itemHeight:f}=Za(i,d),g=this.isHorizontal(),x=this._computeTitleHeight();h=g?{x:Tn(s,this.left+c,this.right-n[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:Tn(s,this.top+x+c,this.bottom-t[0].height),line:0},ds(this.ctx,e.textDirection);const y=f+c;this.legendItems.forEach((b,v)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,j=o.textAlign(b.textAlign||(b.textAlign=i.textAlign)),N=m+u+w;let k=h.x,_=h.y;o.setWidth(this.width),g?v>0&&k+N+c>this.right&&(_=h.y+=y,h.line++,k=h.x=Tn(s,this.left+c,this.right-n[h.line])):v>0&&_+y>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,_=h.y=Tn(s,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;r.save();const s=Rt(n.lineWidth,1);if(r.fillStyle=Rt(n.fillStyle,a),r.lineCap=Rt(n.lineCap,"butt"),r.lineDashOffset=Rt(n.lineDashOffset,0),r.lineJoin=Rt(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=Rt(n.strokeStyle,a),r.setLineDash(Rt(n.lineDash,[])),i.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,m/2);ar(r,a,l,t+u,i.pointStyleWidth&&m)}else{const i=t+Math.max((d-p)/2,0),a=o.leftForLtr(e,m),l=jr(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?fr(r,{x:a,y:i,w:m,h:p,radius:l}):r.rect(a,i,m,p),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(k),_,b),k=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(j,k+m+u,g?k+N:this.right,e.rtl),function(e,t,n){pr(r,n.text,e,t+f/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(k),_,b),g)h.x+=N+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=to(b,e)+c}else h.y+=y}),us(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=kr(t.font),r=Nr(t.padding);if(!t.display)return;const s=cs(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Tn(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+Tn(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Tn(a,d,d+u);i.textAlign=s.textAlign(On(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,pr(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=kr(e.font),n=Nr(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(Nn(e,this.left,this.right)&&Nn(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],Nn(e,r.left,r.left+r.width)&&Nn(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,a=(s=n,null!==(r=i)&&null!==s&&r.datasetIndex===s.datasetIndex&&r.index===s.index);i&&!a&&zt(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&zt(t.onHover,[e,n,this],this)}else n&&zt(t.onClick,[e,n,this],this);var r,s}}function to(e,t){return t*(e.text?e.text.length:0)}var no={id:"legend",_element:eo,start(e,t,n){const r=e.legend=new eo({ctx:e.ctx,options:n,chart:e});Ni.configure(e,r,n),Ni.addBox(e,r)},stop(e){Ni.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Ni.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=Nr(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ro extends Vi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=Ot(n.text)?n.text.length:1;this._padding=Nr(n.padding);const s=r*kr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:i}=this,a=i.align;let o,l,c,d=0;return this.isHorizontal()?(l=Tn(a,n,s),c=t+e,o=s-n):("left"===i.position?(l=n+e,c=Tn(a,r,t),d=-.5*Zt):(l=s-e,c=Tn(a,t,r),d=.5*Zt),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=kr(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(r);pr(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:On(t.align),textBaseline:"middle",translation:[s,i]})}}var so={id:"title",_element:ro,start(e,t,n){!function(e,t){const n=new ro({ctx:e.ctx,options:t,chart:e});Ni.configure(e,n,t),Ni.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Ni.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Ni.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const io={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++i}}if(0===i||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n,r,s,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=yn(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function ao(e,t){return t&&(Ot(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function oo(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function lo(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function co(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=kr(t.bodyFont),c=kr(t.titleFont),d=kr(t.footerFont),u=i.length,h=s.length,m=r.length,p=Nr(t.padding);let f=p.height,g=0,x=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){f+=m*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,Ft(e.title,b),n.font=l.string,Ft(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?a+2+t.boxPadding:0,Ft(r,e=>{Ft(e.before,b),Ft(e.lines,b),Ft(e.after,b)}),y=0,n.font=d.string,Ft(e.footer,b),n.restore(),g+=p.width,{width:g,height:f}}function uo(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),function(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;return"left"===e&&s+i+a>t.width||"right"===e&&s-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function ho(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||uo(e,t,n,r),yAlign:r}}function mo(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=jr(a);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const f=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+s:"right"===o&&(p+=Math.max(u,m)+s),{x:jn(p,0,r.width-t.width),y:jn(f,0,r.height-t.height)}}function po(e,t,n){const r=Nr(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function fo(e){return ao([],oo(e))}function go(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const xo={beforeTitle:Pt,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Pt,beforeBody:Pt,beforeLabel:Pt,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Mt(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pt,afterBody:Pt,beforeFooter:Pt,footer:Pt,afterFooter:Pt};function yo(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?xo[t].call(n,r):s}class bo extends Vi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new Ss(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Sr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=yo(n,"beforeTitle",this,e),s=yo(n,"title",this,e),i=yo(n,"afterTitle",this,e);let a=[];return a=ao(a,oo(r)),a=ao(a,oo(s)),a=ao(a,oo(i)),a}getBeforeBody(e,t){return fo(yo(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Ft(e,e=>{const t={before:[],lines:[],after:[]},s=go(n,e);ao(t.before,oo(yo(s,"beforeLabel",this,e))),ao(t.lines,yo(s,"label",this,e)),ao(t.after,oo(yo(s,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return fo(yo(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=yo(n,"beforeFooter",this,e),s=yo(n,"footer",this,e),i=yo(n,"afterFooter",this,e);let a=[];return a=ao(a,oo(r)),a=ao(a,oo(s)),a=ao(a,oo(i)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(lo(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,s)=>e.filter(t,r,s,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),Ft(l,t=>{const n=go(e.callbacks,t);r.push(yo(n,"labelColor",this,t)),s.push(yo(n,"labelPointStyle",this,t)),i.push(yo(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,i=[];if(r.length){const e=io[n.position].call(this,r,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=co(this,n),a=Object.assign({},e,t),o=ho(this.chart,n,a),l=mo(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=i,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=jr(a),{x:u,y:h}=e,{width:m,height:p}=t;let f,g,x,y,b,v;return"center"===s?(b=h+p/2,"left"===r?(f=u,g=f-i,y=b+i,v=b-i):(f=u+m,g=f+i,y=b-i,v=b+i),x=f):(g="left"===r?u+Math.max(o,c)+i:"right"===r?u+m-Math.max(l,d)-i:this.caretX,"top"===s?(y=h,b=y-i,f=g-i,x=g+i):(y=h+p,b=y+i,f=g+i,x=g-i),v=y),{x1:f,x2:g,x3:x,y1:y,y2:b,y3:v}}drawTitle(e,t,n){const r=this.title,s=r.length;let i,a,o;if(s){const l=cs(n.rtl,this.x,this.width);for(e.x=po(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=kr(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,s){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=kr(s.bodyFont),d=po(this,"left",s),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,m=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=m+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,ir(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,ir(e,t,n,c)}else{e.lineWidth=Tt(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),a=jr(i.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,fr(e,{x:t,y:m,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),fr(e,{x:n,y:m+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,m,l,o),e.strokeRect(t,m,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,m+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=kr(n.bodyFont);let u=d.lineHeight,h=0;const m=cs(n.rtl,this.x,this.width),p=function(n){t.fillText(n,m.x(e.x+h),e.y+u/2),e.y+=u+s},f=m.textAlign(i);let g,x,y,b,v,w,j;for(t.textAlign=i,t.textBaseline="middle",t.font=d.string,e.x=po(this,f,n),t.fillStyle=n.bodyColor,Ft(this.beforeBody,p),h=a&&"right"!==f?"center"===i?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(g=r[b],x=this.labelTextColors[b],t.fillStyle=x,Ft(g.before,p),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,b,m,n),u=Math.max(d.lineHeight,o)),v=0,j=y.length;v<j;++v)p(y[v]),u=d.lineHeight;Ft(g.after,p)}h=0,u=d.lineHeight,Ft(this.afterBody,p),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let i,a;if(s){const o=cs(n.rtl,this.x,this.width);for(e.x=po(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=kr(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<s;++a)t.fillText(r[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=jr(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+d,o),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l-u,o),t.quadraticCurveTo(a+l,o,a+l,o+u),"center"===i&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-m),t.quadraticCurveTo(a+l,o+c,a+l-m,o+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(a,o+d),t.quadraticCurveTo(a,o,a+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=io[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=co(this,e),a=Object.assign({},n,this._size),o=ho(t,e,a),l=mo(e,a,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=Nr(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),ds(e,t.textDirection),s.y+=i.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),us(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),s=!Bt(n,r),i=this._positionChanged(r,t);(s||i)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],i=this._getActiveElements(e,s,t,n),a=this._positionChanged(i,e),o=t||!Bt(i,s)||a;return o&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const i=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,i=io[s.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}(0,Ke.A)(bo,"positioners",io);var vo={id:"tooltip",_element:bo,positioners:io,afterInit(e,t,n){n&&(e.tooltip=new bo({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,o.A)((0,o.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xo},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function wo(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function jo(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class No extends Ji{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Mt(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:jn(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:wo(n,e,Rt(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){return jo.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ko(e,t){const n=[],{bounds:r,step:s,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=s||1,m=c-1,{min:p,max:f}=t,g=!Mt(i),x=!Mt(a),y=!Mt(l),b=(f-p)/(d+1);let v,w,j,N,k=un((f-p)/m/h)*h;if(k<1e-14&&!g&&!x)return[{value:p},{value:f}];N=Math.ceil(f/k)-Math.floor(p/k),N>m&&(k=un(N*k/m/h)*h),Mt(o)||(v=Math.pow(10,o),k=Math.ceil(k*v)/v),"ticks"===r?(w=Math.floor(p/k)*k,j=Math.ceil(f/k)*k):(w=p,j=f),g&&x&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/s,k/1e3)?(N=Math.round(Math.min((a-i)/k,c)),k=(a-i)/N,w=i,j=a):y?(w=g?i:w,j=x?a:j,N=l-1,k=(j-w)/N):(N=(j-w)/k,N=dn(N,Math.round(N),k/1e3)?Math.round(N):Math.ceil(N));const _=Math.max(gn(k),gn(w));v=Math.pow(10,Mt(o)?_:o),w=Math.round(w*v)/v,j=Math.round(j*v)/v;let S=0;for(g&&(u&&w!==i?(n.push({value:i}),w<i&&S++,dn(Math.round((w+S*k)*v)/v,i,_o(i,b,e))&&S++):w<i&&S++);S<N;++S){const e=Math.round((w+S*k)*v)/v;if(x&&e>a)break;n.push({value:e})}return x&&u&&j!==a?n.length&&dn(n[n.length-1].value,a,_o(a,b,e))?n[n.length-1].value=a:n.push({value:a}):x&&j!==a||n.push({value:j}),n}function _o(e,t,n){let{horizontal:r,minRotation:s}=n;const i=pn(s),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,Ke.A)(No,"id","category"),(0,Ke.A)(No,"defaults",{ticks:{callback:jo}});class So extends Ji{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Mt(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const i=e=>r=t?r:e,a=e=>s=n?s:e;if(e){const e=cn(r),t=cn(s);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||i(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=ko({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&mn(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return $n(e,this.chart.options.locale,this.options.ticks.format)}}class Co extends So{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Lt(e)?e:0,this.max=Lt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=pn(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Ke.A)(Co,"id","linear"),(0,Ke.A)(Co,"defaults",{ticks:{callback:Qn.formatters.numeric}});const Ao=e=>Math.floor(ln(e)),Po=(e,t)=>Math.pow(10,Ao(e)+t);function Eo(e){return 1===e/Math.pow(10,Ao(e))}function Mo(e,t,n){const r=Math.pow(10,n),s=Math.floor(e/r);return Math.ceil(t/r)-s}function Oo(e,t){let{min:n,max:r}=t;n=Dt(e.min,n);const s=[],i=Ao(n);let a=function(e,t){let n=Ao(t-e);for(;Mo(e,t,n)>10;)n++;for(;Mo(e,t,n)<10;)n--;return Math.min(n,Ao(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=i>a?Math.pow(10,i):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,a)),m=Dt(e.min,Math.round((c+u+h*Math.pow(10,a))*o)/o);for(;m<r;)s.push({value:m,major:Eo(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),m=Math.round((c+u+h*Math.pow(10,a))*o)/o;const p=Dt(e.max,m);return s.push({value:p,major:Eo(p),significand:h}),s}class To extends Ji{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=So.prototype.parse.apply(this,[e,t]);if(0!==n)return Lt(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Lt(e)?Math.max(0,e):null,this.max=Lt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Lt(this._userMin)&&(this.min=e===Po(this.min,0)?Po(this.min,-1):Po(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=t=>n=e?n:t,i=e=>r=t?r:e;n===r&&(n<=0?(s(1),i(10)):(s(Po(n,-1)),i(Po(r,1)))),n<=0&&s(Po(r,-1)),r<=0&&i(Po(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=Oo({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&mn(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":$n(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ln(e),this._valueRange=ln(this.max)-ln(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ln(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Lo(e){const t=e.ticks;if(t.display&&e.display){const e=Nr(t.backdropPadding);return Rt(t.font&&t.font.size,er.font.size)+e.height}return 0}function Do(e,t,n){return n=Ot(n)?n:[n],{w:nr(e,t.string,n),h:n.length*t.lineHeight}}function Ro(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function Io(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],i=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Zt/i:0;for(let l=0;l<i;l++){const i=a.setContext(e.getPointLabelContext(l));s[l]=i.padding;const c=e.getPointPosition(l,e.drawingArea+s[l],o),d=kr(i.font),u=Do(e.ctx,d,e._pointLabels[l]);r[l]=u;const h=vn(e.getIndexAngle(l)+o),m=Math.round(fn(h));zo(n,t,h,Ro(m,c.x,u.w,0,180),Ro(m,c.y,u.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],s=e._pointLabels.length,i=e.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:Lo(i)/2,additionalAngle:a?Zt/s:0};let c;for(let d=0;d<s;d++){l.padding=n[d],l.size=t[d];const s=Fo(e,d,l);r.push(s),"auto"===o&&(s.visible=Bo(s,c),s.visible&&(c=s))}return r}(e,r,s)}function zo(e,t,n,r,s){const i=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/a,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function Fo(e,t,n){const r=e.drawingArea,{extra:s,additionalAngle:i,padding:a,size:o}=n,l=e.getPointPosition(t,r+s+a,i),c=Math.round(fn(vn(l.angle+sn))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function Bo(e,t){if(!t)return!0;const{left:n,top:r,right:s,bottom:i}=e;return!(or({x:n,y:r},t)||or({x:n,y:i},t)||or({x:s,y:r},t)||or({x:s,y:i},t))}function Vo(e,t,n){const{left:r,top:s,right:i,bottom:a}=n,{backdropColor:o}=t;if(!Mt(o)){const n=jr(t.borderRadius),l=Nr(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=s-l.top,u=i-r+l.width,h=a-s+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),fr(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function Wo(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,en);else{let n=e.getPointPosition(0,t);s.moveTo(n.x,n.y);for(let i=1;i<r;i++)n=e.getPointPosition(i,t),s.lineTo(n.x,n.y)}}(0,Ke.A)(To,"id","logarithmic"),(0,Ke.A)(To,"defaults",{ticks:{callback:Qn.formatters.logarithmic,major:{enabled:!0}}});class Uo extends So{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Nr(Lo(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Lt(e)&&!isNaN(e)?e:0,this.max=Lt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Lo(this.options))}generateTickLabels(e){So.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=zt(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?Io(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return vn(e*(en/(this._pointLabels.length||1))+pn(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Mt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Mt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Sr(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-sn+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Wo(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,i=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const t=e._pointLabelItems[s];if(!t.visible)continue;const i=r.setContext(e.getPointLabelContext(s));Vo(n,i,t);const a=kr(i.font),{x:o,y:l,textAlign:c}=t;pr(n,e._pointLabels[s],o,l+a.lineHeight/2,a,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=s.setContext(n);!function(e,t,n,r,s){const i=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),Wo(e,n,a,r),i.closePath(),i.stroke(),i.restore())}(this,a,o,i,l)}}),n.display){for(e.save(),a=i-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:s,lineWidth:i}=r;i&&s&&(e.lineWidth=i,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=kr(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,i=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=Nr(o.backdropPadding);e.fillRect(-i/2-t.left,-s-l.size/2-t.top,i+t.width,l.size+t.height)}pr(e,r.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,Ke.A)(Uo,"id","radialLinear"),(0,Ke.A)(Uo,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Ke.A)(Uo,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Ke.A)(Uo,"descriptors",{angleLines:{_fallback:"grid"}});const Ho={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qo=Object.keys(Ho);function $o(e,t){return e-t}function Yo(e,t){if(Mt(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),Lt(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(s&&(a="week"!==s||!hn(i)&&!0!==i?n.startOf(a,s):n.startOf(a,"isoWeek",i)),+a)}function Qo(e,t,n,r){const s=qo.length;for(let i=qo.indexOf(e);i<s-1;++i){const e=Ho[qo[i]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return qo[i]}return qo[s-1]}function Ko(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=kn(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function Xo(e,t,n){const r=[],s={},i=t.length;let a,o;for(a=0;a<i;++a)o=t[a],s[o]=a,r.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class Jo extends Ji{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new ri(e.adapters.date);r.init(t),qt(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Yo(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(s=Math.max(s,e.max))}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=Lt(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=Lt(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,i=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?Qo(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let i=qo.length-1;i>=qo.indexOf(n);i--){const n=qo[i];if(Ho[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return qo[n?qo.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=qo.indexOf(e)+1,n=qo.length;t<n;++t)if(Ho[qo[t]].common)return qo[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),Xo(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),s=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const i=n.length<3?.5:.25;r=jn(r,0,i),s=jn(s,0,i),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,i=s.unit||Qo(s.minUnit,t,n,this._getLabelCapacity(t)),a=Rt(r.ticks.stepSize,1),o="week"===i&&s.isoWeekday,l=hn(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const m="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,a,i),u++)Ko(c,d,m);return d!==n&&"ticks"!==r.bounds&&1!==u||Ko(c,d,m),Object.keys(c).sort($o).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,i=s.ticks.callback;if(i)return zt(i,[e,t,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],d=l&&a[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=pn(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),i=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*i,h:n*i+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,Xo(this,[e],this._majorUnit),r),i=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Yo(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Pn(e.sort($o))}}function Go(e,t,n){let r,s,i,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=_n(e,"pos",t)),({pos:r,time:i}=e[o]),({pos:s,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=_n(e,"time",t)),({time:r,pos:i}=e[o]),({time:s,pos:a}=e[l]));const c=s-r;return c?i+(a-i)*(t-r)/c:i}(0,Ke.A)(Jo,"id","time"),(0,Ke.A)(Jo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Zo extends Jo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Go(t,this.min),this._tableRange=Go(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let i,a,o,l,c;for(i=0,a=e.length;i<a;++i)l=e[i],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(i=0,a=r.length;i<a;++i)c=r[i+1],o=r[i-1],l=r[i],Math.round((c+o)/2)!==l&&s.push({time:l,pos:i/(a-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Go(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Go(this._table,n*this._tableRange+this._minPos,!0)}}(0,Ke.A)(Zo,"id","timeseries"),(0,Ke.A)(Zo,"defaults",Jo.defaults);Aa.register(No,Co,Ga,so,vo,no,La);const el=()=>{const{user:e,isAuthenticated:t}=(0,b.A)(),n=(0,a.Zp)(),[s,i]=(0,r.useState)({totalProducts:0,totalCategories:0,totalOrders:0,totalUsers:0,lowStockProducts:0,totalRevenue:0}),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{t&&null!==e&&void 0!==e&&e.isAdmin&&u()},[t,e]),!t||null===e||void 0===e||!e.isAdmin)return(0,v.jsx)(a.C5,{to:"/login",replace:!0});const u=async()=>{try{var e,t;d(!0);const n=localStorage.getItem("token"),r={Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},[s,a,o,c,u]=await Promise.all([fetch("/api/products",{headers:r}),fetch("/api/categories",{headers:r}),fetch("/api/orders",{headers:r}),fetch("/api/reports/inventory",{headers:r}),fetch("/api/reports/users",{headers:r})]),h=await s.json(),m=await a.json(),p=await o.json(),f=await c.json(),g=await u.json(),x=p.orders||p,y=Array.isArray(x)?x.length:0,b=Array.isArray(x)?x.reduce((e,t)=>e+(t.totalPrice||0),0):0;i({totalProducts:h.totalProducts||(null===(e=h.products)||void 0===e?void 0:e.length)||0,totalCategories:m.length||0,totalOrders:y,totalUsers:g.totalUsers||0,lowStockProducts:(null===(t=f.lowStock)||void 0===t?void 0:t.length)||0,totalRevenue:b});const v=[];(Array.isArray(x)?x:[]).slice(0,10).forEach(e=>{e.orderItems.forEach(t=>{v.push({orderId:e._id,productName:t.name,quantity:t.quantity})})}),l(v)}catch(n){console.error("Error fetching dashboard stats:",n)}finally{d(!1)}},h=e=>{let{title:t,value:n,icon:r,color:s}=e;return(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 ".concat(s),children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:t}),(0,v.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:n})]}),(0,v.jsx)("div",{className:"text-4xl",children:r})]})})};if(console.log("stats:",s),console.log("recentOrderedItems:",o),c)return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,v.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})});const m=e=>"number"===typeof e?e:Number(e)||0;m(s.totalProducts),m(s.totalCategories),m(s.totalOrders),m(s.totalUsers),m(s.lowStockProducts),m(s.totalProducts),m(s.totalCategories),m(s.totalOrders),m(s.totalUsers),m(s.lowStockProducts);return(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,v.jsx)("div",{className:"bg-white shadow-sm",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,v.jsxs)("div",{className:"text-sm text-gray-600",children:["Welcome, ",null===e||void 0===e?void 0:e.username]})]})})}),(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:[(0,v.jsx)(h,{title:"Total Products",value:s.totalProducts,icon:"\ud83d\udce6",color:"border-l-blue-500 text-blue-500"}),(0,v.jsx)(h,{title:"Categories",value:s.totalCategories,icon:"\ud83d\udccb",color:"border-l-green-500 text-green-500"}),(0,v.jsx)(h,{title:"Total Orders",value:s.totalOrders,icon:"\ud83d\uded2",color:"border-l-yellow-500 text-yellow-500"}),(0,v.jsx)(h,{title:"Low Stock Items",value:s.lowStockProducts,icon:"\u26a0\ufe0f",color:"border-l-red-500 text-red-500"}),(0,v.jsx)(h,{title:"Total Users",value:s.totalUsers,icon:"\ud83d\udc64",color:"border-l-purple-500 text-purple-500"})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Management"}),(0,v.jsx)("div",{className:"space-y-2",children:(0,v.jsx)("button",{onClick:()=>n("/admin/orders"),className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors",children:"Manage Orders"})})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Management"}),(0,v.jsx)("div",{className:"space-y-2",children:(0,v.jsx)("button",{onClick:()=>n("/admin/users"),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors",children:"Manage Users"})})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Management"}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("button",{onClick:()=>n("/admin/products/new"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Add New Product"}),(0,v.jsx)("button",{onClick:()=>n("/admin/products"),className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors",children:"Manage Products"})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category Management"}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("button",{onClick:()=>n("/admin/categories/new"),className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",children:"Add New Category"}),(0,v.jsx)("button",{onClick:()=>n("/admin/categories"),className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors",children:"Manage Categories"})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Inventory Management"}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("button",{onClick:()=>n("/admin/inventory"),className:"w-full bg-yellow-600 text-white py-2 px-4 rounded-md hover:bg-yellow-700 transition-colors",children:"Manage Inventory"}),(0,v.jsx)("button",{onClick:()=>n("/admin/inventory/low-stock"),className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors",children:"Low Stock Alert"})]})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recently Ordered Items"}),0===o.length?(0,v.jsx)("div",{className:"text-gray-500",children:"No recent orders found."}):(0,v.jsxs)("table",{className:"min-w-full text-sm",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"text-left py-2 px-4",children:"Order ID"}),(0,v.jsx)("th",{className:"text-left py-2 px-4",children:"Product Name"}),(0,v.jsx)("th",{className:"text-left py-2 px-4",children:"Quantity"})]})}),(0,v.jsx)("tbody",{children:o.map((e,t)=>(0,v.jsxs)("tr",{className:"border-b",children:[(0,v.jsx)("td",{className:"py-2 px-4",children:String(e.orderId)}),(0,v.jsx)("td",{className:"py-2 px-4",children:String(e.productName)}),(0,v.jsx)("td",{className:"py-2 px-4",children:String(e.quantity)})]},t))})]})]})]})]})},tl=()=>{const{user:e,isAuthenticated:t}=(0,b.A)(),[n,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)("all"),[p,f]=(0,r.useState)([]),[g,x]=(0,r.useState)(1),[y,w]=(0,r.useState)(1),[j,N]=(0,r.useState)(null),[k,_]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{t&&null!==e&&void 0!==e&&e.isAdmin&&(S(),C())},[g,d,h,t,e]),!t||null===e||void 0===e||!e.isAdmin)return(0,v.jsx)(a.C5,{to:"/login",replace:!0});const S=async()=>{try{c(!0);const e=localStorage.getItem("token"),t=new URLSearchParams((0,o.A)((0,o.A)({pageNumber:g.toString()},d&&{keyword:d}),"all"!==h&&{category:h})),n=await fetch("/api/products?".concat(t),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(n.ok){const e=await n.json();s(e.products||[]),w(e.pages||1)}else console.error("Failed to fetch products"),s([])}catch(e){console.error("Error fetching products:",e),s([])}finally{c(!1)}},C=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/categories/admin/all",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();f(e.map(e=>({_id:e._id,name:e.name})))}}catch(e){console.error("Error fetching categories:",e)}},A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),P=e=>0===e?"Out of Stock":e<10?"Low Stock":"In Stock";return l?(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,v.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]})}):(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,v.jsx)("div",{className:"bg-white shadow-sm",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)(i.N_,{to:"/admin",className:"text-blue-600 hover:text-blue-800",children:"\u2190 Dashboard"}),(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsx)("button",{onClick:()=>_(!0),className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Clear All Products"}),(0,v.jsx)(i.N_,{to:"/admin/products/new",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Add New Product"})]})]})})}),(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products"}),(0,v.jsx)("input",{type:"text",value:d,onChange:e=>{u(e.target.value),x(1)},placeholder:"Search by name or description...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Category"}),(0,v.jsxs)("select",{value:h,onChange:e=>{m(e.target.value),x(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,v.jsx)("option",{value:"all",children:"All Categories"}),p.map(e=>(0,v.jsx)("option",{value:e.name,children:e.name},e._id))]})]}),(0,v.jsx)("div",{className:"flex items-end",children:(0,v.jsx)("button",{onClick:()=>{u(""),m("all"),x(1)},className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Clear Filters"})})]})}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,v.jsx)("thead",{className:"bg-gray-50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{return(0,v.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:(0,v.jsx)("img",{className:"h-12 w-12 rounded-md object-cover",src:e.images[0],alt:e.name})}),(0,v.jsxs)("div",{className:"ml-4",children:[(0,v.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:e.name}),(0,v.jsx)("div",{className:"text-sm text-gray-500",children:e.brand})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-medium",children:A(e.price)}),e.originalPrice&&e.originalPrice>e.price&&(0,v.jsx)("div",{className:"text-xs text-gray-500 line-through",children:A(e.originalPrice)})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.countInStock}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((t=e.countInStock,0===t?"bg-red-100 text-red-800":t<10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800")),children:P(e.countInStock)})}),(0,v.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,v.jsx)(i.N_,{to:"/admin/products/edit/".concat(e._id),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,v.jsx)("button",{onClick:()=>N(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"}),(0,v.jsx)(i.N_,{to:"/product/".concat(e._id),className:"text-gray-600 hover:text-gray-900",target:"_blank",rel:"noopener noreferrer",children:"View"})]})]},e._id);var t})})]})}),y>1&&(0,v.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("button",{onClick:()=>x(e=>Math.max(e-1,1)),disabled:1===g,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,v.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",g," of ",y]}),(0,v.jsx)("button",{onClick:()=>x(e=>Math.min(e+1,y)),disabled:g===y,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}),0===n.length&&(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)("div",{className:"text-gray-500 text-lg",children:"No products found"}),(0,v.jsx)("p",{className:"text-gray-400 mt-2",children:"Try adjusting your search criteria or add some products."})]})]}),j&&(0,v.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,v.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Product"}),(0,v.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this product? This action cannot be undone."}),(0,v.jsxs)("div",{className:"flex space-x-3",children:[(0,v.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");(await fetch("/api/products/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok?(s(n.filter(t=>t._id!==e)),N(null)):console.error("Failed to delete product")}catch(t){console.error("Error deleting product:",t)}})(j),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",children:"Delete"}),(0,v.jsx)("button",{onClick:()=>N(null),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),k&&(0,v.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,v.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-4",children:"\u26a0\ufe0f Clear All Products"}),(0,v.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",(0,v.jsx)("strong",{children:"ALL"})," products? This will permanently remove every product from the database and cannot be undone."]}),(0,v.jsxs)("div",{className:"flex space-x-3",children:[(0,v.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/admin/products/clear",{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();console.log("Cleared products:",e.message),s([]),_(!1),alert("Successfully deleted ".concat(e.deletedCount," products"))}else console.error("Failed to clear products"),alert("Failed to clear products")}catch(e){console.error("Error clearing products:",e),alert("Error clearing products")}},className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",children:"Yes, Clear All"}),(0,v.jsx)("button",{onClick:()=>_(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})},nl=()=>{const{user:e,isAuthenticated:t,isAuthLoading:n}=(0,b.A)(),s=(0,a.Zp)(),{id:l}=(0,a.g)(),c=Boolean(l),[d,u]=(0,r.useState)({name:"",price:0,originalPrice:0,description:"",images:[""],brand:"",category:"",countInStock:0,features:[""],specifications:{},tags:[""],weight:"",dimensions:"",warranty:""}),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(""),[k,_]=(0,r.useState)("");if((0,r.useEffect)(()=>{t&&null!==e&&void 0!==e&&e.isAdmin&&(S(),c&&l&&C(l))},[c,l,t,e]),n)return(0,v.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,v.jsx)("span",{children:"Loading..."})});if(!t||null===e||void 0===e||!e.isAdmin)return(0,v.jsx)(a.C5,{to:"/login",replace:!0});const S=async()=>{try{const e=localStorage.getItem("token"),[t,n]=await Promise.all([fetch("/api/categories/admin/all",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),fetch("/api/products/brands")]);if(t.ok){const e=await t.json();m(e.map(e=>({_id:e._id,name:e.name})))}if(n.ok){const e=await n.json();f(e)}}catch(e){console.error("Error fetching dropdown data:",e)}},C=async e=>{try{x(!0);const s=localStorage.getItem("token"),i=await fetch("/api/products/".concat(e),{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});if(i.ok){var t,n,r;const e=await i.json();u({name:e.name||"",price:e.price||0,originalPrice:e.originalPrice||0,description:e.description||"",images:null!==(t=e.images)&&void 0!==t&&t.length?e.images:[""],brand:e.brand||"",category:e.category||"",countInStock:e.countInStock||0,features:null!==(n=e.features)&&void 0!==n&&n.length?e.features:[""],specifications:e.specifications||{},tags:null!==(r=e.tags)&&void 0!==r&&r.length?e.tags:[""],weight:e.weight||"",dimensions:e.dimensions||"",warranty:e.warranty||""})}}catch(s){console.error("Error fetching product:",s)}finally{x(!1)}},A=(e,t,n)=>{u(r=>(0,o.A)((0,o.A)({},r),{},{[e]:r[e].map((e,r)=>r===t?n:e)}))},P=e=>{u(t=>(0,o.A)((0,o.A)({},t),{},{[e]:[...t[e],""]}))},E=(e,t)=>{d[e].length>1&&u(n=>(0,o.A)((0,o.A)({},n),{},{[e]:n[e].filter((e,n)=>n!==t)}))};return g?(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,v.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading product..."})]})}):(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,v.jsx)("div",{className:"bg-white shadow-sm",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)(i.N_,{to:"/admin/products",className:"text-blue-600 hover:text-blue-800",children:"\u2190 Back to Products"}),(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:c?"Edit Product":"Add New Product"})]})})})}),(0,v.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),w(!0);if([d.name,d.brand,d.category,d.description,d.price,d.countInStock].some(e=>""===e||void 0===e||null===e))return alert("Please fill in all required fields."),void w(!1);const t=d.images.filter(e=>""!==e.trim());0===t.length&&t.push("https://via.placeholder.com/650x650");const n=(0,o.A)((0,o.A)({},d),{},{images:t,features:d.features.filter(e=>""!==e.trim()),tags:d.tags.filter(e=>""!==e.trim()),price:Number(d.price),originalPrice:Number(d.originalPrice),countInStock:Number(d.countInStock)}),r=c?"/api/products/".concat(l):"/api/products",i=c?"PUT":"POST",a=localStorage.getItem("token");try{const e=await fetch(r,{method:i,headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(n)});if(e.ok)s("/admin/products");else{const t=await e.json();alert(t.message||"Failed to save product")}}catch(u){console.error("Error saving product:",u),alert("Failed to save product")}finally{w(!1)}},className:"space-y-8",children:[(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),(0,v.jsx)("input",{type:"text",value:d.name,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand *"}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("input",{type:"text",list:"brands-list",value:d.brand,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{brand:e.target.value})),placeholder:"Type or select a brand",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,v.jsx)("datalist",{id:"brands-list",children:p.map(e=>(0,v.jsx)("option",{value:e},e))})]}),(0,v.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Type a new brand name or select from existing brands"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,v.jsxs)("select",{value:d.category,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,v.jsx)("option",{value:"",children:"Select Category"}),h.map(e=>(0,v.jsx)("option",{value:e.name,children:e.name},e._id))]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Quantity *"}),(0,v.jsx)("input",{type:"number",min:"0",value:d.countInStock,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{countInStock:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,v.jsxs)("div",{className:"mt-6",children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,v.jsx)("textarea",{value:d.description,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{description:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Price *"}),(0,v.jsx)("input",{type:"number",step:"0.01",min:"0",value:d.price,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{price:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Original Price"}),(0,v.jsx)("input",{type:"number",step:"0.01",min:"0",value:d.originalPrice,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{originalPrice:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Images"}),d.images.map((e,t)=>(0,v.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,v.jsx)("input",{type:"url",placeholder:"Image URL",value:e,onChange:e=>A("images",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.images.length>1&&(0,v.jsx)("button",{type:"button",onClick:()=>E("images",t),className:"px-3 py-2 bg-red-100 text-red-600 rounded-md hover:bg-red-200",children:"Remove"})]},t)),(0,v.jsx)("button",{type:"button",onClick:()=>P("images"),className:"mt-2 px-4 py-2 bg-blue-100 text-blue-600 rounded-md hover:bg-blue-200",children:"Add Image"})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Features"}),d.features.map((e,t)=>(0,v.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,v.jsx)("input",{type:"text",placeholder:"Feature",value:e,onChange:e=>A("features",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.features.length>1&&(0,v.jsx)("button",{type:"button",onClick:()=>E("features",t),className:"px-3 py-2 bg-red-100 text-red-600 rounded-md hover:bg-red-200",children:"Remove"})]},t)),(0,v.jsx)("button",{type:"button",onClick:()=>P("features"),className:"mt-2 px-4 py-2 bg-blue-100 text-blue-600 rounded-md hover:bg-blue-200",children:"Add Feature"})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Specifications"}),(0,v.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,v.jsx)("input",{type:"text",placeholder:"Specification name",value:j,onChange:e=>N(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,v.jsx)("input",{type:"text",placeholder:"Specification value",value:k,onChange:e=>_(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,v.jsx)("button",{type:"button",onClick:()=>{j.trim()&&k.trim()&&(u(e=>(0,o.A)((0,o.A)({},e),{},{specifications:(0,o.A)((0,o.A)({},e.specifications),{},{[j.trim()]:k.trim()})})),N(""),_(""))},className:"px-4 py-2 bg-green-100 text-green-600 rounded-md hover:bg-green-200",children:"Add"})]}),Object.entries(d.specifications).map(e=>{let[t,n]=e;return(0,v.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsxs)("span",{className:"font-medium",children:[t,":"]})," ",n]}),(0,v.jsx)("button",{type:"button",onClick:()=>(e=>{const t=(0,o.A)({},d.specifications);delete t[e],u(e=>(0,o.A)((0,o.A)({},e),{},{specifications:t}))})(t),className:"px-3 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 text-sm",children:"Remove"})]},t)})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Details"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),(0,v.jsx)("input",{type:"text",placeholder:"e.g., 1.5kg",value:d.weight,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{weight:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensions"}),(0,v.jsx)("input",{type:"text",placeholder:"e.g., 10x15x20 cm",value:d.dimensions,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{dimensions:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty"}),(0,v.jsx)("input",{type:"text",placeholder:"e.g., 1 year",value:d.warranty,onChange:e=>u(t=>(0,o.A)((0,o.A)({},t),{},{warranty:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tags"}),d.tags.map((e,t)=>(0,v.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,v.jsx)("input",{type:"text",placeholder:"Tag",value:e,onChange:e=>A("tags",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.tags.length>1&&(0,v.jsx)("button",{type:"button",onClick:()=>E("tags",t),className:"px-3 py-2 bg-red-100 text-red-600 rounded-md hover:bg-red-200",children:"Remove"})]},t)),(0,v.jsx)("button",{type:"button",onClick:()=>P("tags"),className:"mt-2 px-4 py-2 bg-blue-100 text-blue-600 rounded-md hover:bg-blue-200",children:"Add Tag"})]}),(0,v.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,v.jsx)(i.N_,{to:"/admin/products",className:"px-6 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,v.jsx)("button",{type:"submit",disabled:y,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Saving...":c?"Update Product":"Create Product"})]})]})})]})},rl=()=>{const{user:e,isAuthenticated:t}=(0,b.A)(),[n,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[g,x]=(0,r.useState)({name:"",description:"",image:"",parent:"",isActive:!0,sortOrder:0,seoTitle:"",seoDescription:""});if((0,r.useEffect)(()=>{t&&null!==e&&void 0!==e&&e.isAdmin&&y()},[t,e]),!t||null===e||void 0===e||!e.isAdmin)return(0,v.jsx)(a.C5,{to:"/login",replace:!0});const y=async()=>{try{c(!0);const e=localStorage.getItem("token"),t=await fetch("/api/categories/admin/all",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();s(e)}else console.error("Failed to fetch categories")}catch(e){console.error("Error fetching categories:",e)}finally{c(!1)}},w=()=>{x({name:"",description:"",image:"",parent:"",isActive:!0,sortOrder:0,seoTitle:"",seoDescription:""})};return l?(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,v.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading categories..."})]})}):(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,v.jsx)("div",{className:"bg-white shadow-sm",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)(i.N_,{to:"/admin",className:"text-blue-600 hover:text-blue-800",children:"\u2190 Dashboard"}),(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Category Management"})]}),(0,v.jsxs)("div",{className:"flex space-x-2",children:[(0,v.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");(await fetch("/api/categories/update-counts",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok?(await y(),alert("Product counts updated successfully")):alert("Failed to update product counts")}catch(e){console.error("Error updating product counts:",e),alert("Failed to update product counts")}},className:"bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition-colors",children:"Update Counts"}),(0,v.jsx)("button",{onClick:()=>{w(),m(null),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Add Category"})]})]})})}),(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,v.jsx)("thead",{className:"bg-gray-50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sort Order"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,v.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,v.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.image,alt:e.name})}),(0,v.jsxs)("div",{className:"ml-4",children:[(0,v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,v.jsx)("div",{className:"text-sm text-gray-500",children:e.slug})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.parent?e.parent.name:"-"}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.productCount}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sortOrder}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,v.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,v.jsx)("button",{onClick:()=>(e=>{var t;x({name:e.name,description:e.description,image:e.image,parent:(null===(t=e.parent)||void 0===t?void 0:t._id)||"",isActive:e.isActive,sortOrder:e.sortOrder,seoTitle:e.seoTitle||"",seoDescription:e.seoDescription||""}),m(e),u(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,v.jsx)("button",{onClick:()=>f(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id))})]})})}),0===n.length&&(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)("div",{className:"text-gray-500 text-lg",children:"No categories found"}),(0,v.jsx)("p",{className:"text-gray-400 mt-2",children:"Add your first category to get started."})]})]}),d&&(0,v.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,v.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:h?"Edit Category":"Add New Category"}),(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=h?"/api/categories/".concat(h._id):"/api/categories",n=h?"PUT":"POST",r=await fetch(t,{method:n,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify((0,o.A)((0,o.A)({},g),{},{parent:g.parent||null}))});if(r.ok)await y(),u(!1),w(),m(null);else{const e=await r.json();alert(e.message||"Failed to save category")}}catch(t){console.error("Error saving category:",t),alert("Failed to save category")}},className:"space-y-4",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,v.jsx)("input",{type:"text",value:g.name,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),(0,v.jsxs)("select",{value:g.parent,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{parent:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,v.jsx)("option",{value:"",children:"None (Top Level)"}),n.filter(e=>e._id!==(null===h||void 0===h?void 0:h._id)).map(e=>(0,v.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,v.jsx)("textarea",{value:g.description,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL"}),(0,v.jsx)("input",{type:"url",value:g.image,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{image:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),(0,v.jsx)("input",{type:"number",value:g.sortOrder,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{sortOrder:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{className:"flex items-center pt-6",children:[(0,v.jsx)("input",{type:"checkbox",id:"isActive",checked:g.isActive,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{isActive:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,v.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Active"})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SEO Title"}),(0,v.jsx)("input",{type:"text",value:g.seoTitle,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{seoTitle:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SEO Description"}),(0,v.jsx)("input",{type:"text",value:g.seoDescription,onChange:e=>x(t=>(0,o.A)((0,o.A)({},t),{},{seoDescription:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,v.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,v.jsx)("button",{type:"button",onClick:()=>{u(!1),m(null),w()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,v.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:h?"Update":"Create"})]})]})]})}),p&&(0,v.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,v.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Category"}),(0,v.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this category? This action cannot be undone and may affect products using this category."}),(0,v.jsxs)("div",{className:"flex space-x-3",children:[(0,v.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),r=await fetch("/api/categories/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(r.ok)s(n.filter(t=>t._id!==e)),f(null);else{const e=await r.json();alert(e.message||"Failed to delete category")}}catch(t){console.error("Error deleting category:",t),alert("Failed to delete category")}})(p),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",children:"Delete"}),(0,v.jsx)("button",{onClick:()=>f(null),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})},sl=()=>{const{user:e,isAuthenticated:t}=(0,b.A)(),[n,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)("all"),[h,m]=(0,r.useState)(""),[p,f]=(0,r.useState)(10),[g,x]=(0,r.useState)(new Map),[y,w]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{t&&null!==e&&void 0!==e&&e.isAdmin&&j()},[t,e]),!t||null===e||void 0===e||!e.isAdmin)return(0,v.jsx)(a.C5,{to:"/login",replace:!0});const j=async()=>{try{c(!0);const e=localStorage.getItem("token"),t=await fetch("/api/products?pageNumber=1&limit=1000",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();s(e.products||[])}else console.error("Failed to fetch products"),s([])}catch(e){console.error("Error fetching products:",e),s([])}finally{c(!1)}},N=n.filter(e=>{if(!(e.name.toLowerCase().includes(h.toLowerCase())||e.brand.toLowerCase().includes(h.toLowerCase())||e.category.toLowerCase().includes(h.toLowerCase())))return!1;switch(d){case"low":return e.countInStock<=p&&e.countInStock>0;case"out":return 0===e.countInStock;default:return!0}}),k=e=>0===e?"Out of Stock":e<=p?"Low Stock":"In Stock";if(l)return(0,v.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,v.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading inventory..."})]})});const _=(()=>{const e=n.filter(e=>e.countInStock<=p&&e.countInStock>0),t=n.filter(e=>0===e.countInStock);return{lowStock:e,outOfStock:t,total:e.length+t.length}})();return(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,v.jsx)("div",{className:"bg-white shadow-sm",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)(i.N_,{to:"/admin",className:"text-blue-600 hover:text-blue-800",children:"\u2190 Dashboard"}),(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"})]}),(0,v.jsx)("div",{className:"flex space-x-2",children:(0,v.jsx)("button",{onClick:()=>w(!y),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:y?"Cancel Bulk":"Bulk Update"})})]})})}),(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,v.jsx)("div",{className:"text-sm text-gray-600",children:"Total Products"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,v.jsx)("div",{className:"text-sm text-gray-600",children:"Low Stock Items"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:_.lowStock.length})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,v.jsx)("div",{className:"text-sm text-gray-600",children:"Out of Stock"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-red-600",children:_.outOfStock.length})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,v.jsx)("div",{className:"text-sm text-gray-600",children:"Needs Attention"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:_.total})]})]}),(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products"}),(0,v.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Search by name, brand, or category...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Stock Level"}),(0,v.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,v.jsx)("option",{value:"all",children:"All Products"}),(0,v.jsx)("option",{value:"low",children:"Low Stock Only"}),(0,v.jsx)("option",{value:"out",children:"Out of Stock Only"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Threshold"}),(0,v.jsx)("input",{type:"number",min:"1",value:p,onChange:e=>f(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y&&g.size>0&&(0,v.jsx)("div",{className:"flex items-end",children:(0,v.jsxs)("button",{onClick:async()=>{if(0!==g.size)try{const e=localStorage.getItem("token"),t=Array.from(g.entries()),n=t.map(t=>{let[n,r]=t;return fetch("/api/products/".concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({countInStock:r})})}),r=(await Promise.all(n)).filter(e=>e.ok).length;r===t.length?(s(e=>e.map(e=>{const t=g.get(e._id);return void 0!==t?(0,o.A)((0,o.A)({},e),{},{countInStock:t,inStock:t>0}):e})),x(new Map),w(!1),alert("Successfully updated ".concat(r," products"))):alert("Updated ".concat(r," out of ").concat(t.length," products. Some updates failed."))}catch(e){console.error("Error applying bulk updates:",e),alert("Failed to apply bulk updates")}},className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Apply Updates (",g.size,")"]})})]})}),(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,v.jsx)("thead",{className:"bg-gray-50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y?"New Stock":"Actions"})]})}),(0,v.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>{return(0,v.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:(0,v.jsx)("img",{className:"h-12 w-12 rounded-md object-cover",src:e.images[0],alt:e.name})}),(0,v.jsxs)("div",{className:"ml-4",children:[(0,v.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:e.name}),(0,v.jsx)("div",{className:"text-sm text-gray-500",children:e.brand})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,v.jsx)("div",{className:"font-medium",children:e.countInStock})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((t=e.countInStock,0===t?"bg-red-100 text-red-800":t<=p?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800")),children:k(e.countInStock)})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:y?(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)("input",{type:"number",min:"0",defaultValue:e.countInStock,onChange:t=>{return n=e._id,r=Number(t.target.value),void x(e=>{const t=new Map(e);return r<0||t.set(n,r),t});var n,r},className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"}),g.has(e._id)&&(0,v.jsx)("span",{className:"text-xs text-blue-600",children:"Modified"})]}):(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)("input",{type:"number",min:"0",value:e.countInStock,onChange:t=>(async(e,t)=>{try{const n=localStorage.getItem("token");(await fetch("/api/products/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({countInStock:t})})).ok?s(n=>n.map(n=>n._id===e?(0,o.A)((0,o.A)({},n),{},{countInStock:t,inStock:t>0}):n)):alert("Failed to update stock")}catch(n){console.error("Error updating stock:",n),alert("Failed to update stock")}})(e._id,Number(t.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,v.jsx)(i.N_,{to:"/admin/products/edit/".concat(e._id),className:"text-blue-600 hover:text-blue-900",children:"Edit"})]})})]},e._id);var t})})]})})}),0===N.length&&(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)("div",{className:"text-gray-500 text-lg",children:"No products found"}),(0,v.jsx)("p",{className:"text-gray-400 mt-2",children:"Try adjusting your search or filter criteria."})]}),(_.lowStock.length>0||_.outOfStock.length>0)&&(0,v.jsxs)("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:"\u26a0\ufe0f Inventory Alerts"}),(0,v.jsxs)("div",{className:"space-y-2 text-sm text-yellow-700",children:[_.outOfStock.length>0&&(0,v.jsxs)("p",{children:["\ud83d\udd34 ",(0,v.jsx)("strong",{children:_.outOfStock.length})," products are completely out of stock"]}),_.lowStock.length>0&&(0,v.jsxs)("p",{children:["\ud83d\udfe1 ",(0,v.jsx)("strong",{children:_.lowStock.length})," products are running low (\u2264",p," items)"]})]}),(0,v.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,v.jsx)("button",{onClick:()=>u("out"),className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-700 transition-colors",children:"View Out of Stock"}),(0,v.jsx)("button",{onClick:()=>u("low"),className:"bg-yellow-600 text-white px-4 py-2 rounded-md text-sm hover:bg-yellow-700 transition-colors",children:"View Low Stock"})]})]})]})]})};const il=function(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=setTimeout(()=>{t(!0)},100);return()=>clearTimeout(e)},[]),(0,v.jsx)(i.Kd,{children:(0,v.jsx)(b.O,{children:(0,v.jsx)(k,{children:(0,v.jsx)(P,{children:(0,v.jsx)(Pe.SearchProvider,{children:(0,v.jsxs)("div",{className:"min-h-screen flex flex-col ".concat(e?"page-load":"opacity-0"),children:[(0,v.jsx)(O,{}),(0,v.jsx)("main",{className:"flex-grow",children:(0,v.jsxs)(a.BV,{children:[(0,v.jsx)(a.qh,{path:"/request-reset",element:r.createElement(n(582).A)}),(0,v.jsx)(a.qh,{path:"/reset-password/:token",element:r.createElement(n(141).A)}),(0,v.jsx)(a.qh,{path:"/request-email-verification",element:r.createElement(n(679).A)}),(0,v.jsx)(a.qh,{path:"/verify-email/:token",element:r.createElement(n(618).A)}),(0,v.jsx)(a.qh,{path:"/",element:(0,v.jsx)(Q,{})}),(0,v.jsx)(a.qh,{path:"/products",element:(0,v.jsx)(K,{})}),(0,v.jsx)(a.qh,{path:"/products/:id",element:(0,v.jsx)(J,{})}),(0,v.jsx)(a.qh,{path:"/product/:id",element:(0,v.jsx)(J,{})}),(0,v.jsx)(a.qh,{path:"/cart",element:(0,v.jsx)(re,{})}),(0,v.jsx)(a.qh,{path:"/checkout",element:(0,v.jsx)(ke,{})}),(0,v.jsx)(a.qh,{path:"/login",element:(0,v.jsx)(Te,{})}),(0,v.jsx)(a.qh,{path:"/signup",element:(0,v.jsx)(Le,{})}),(0,v.jsx)(a.qh,{path:"/profile",element:(0,v.jsx)($e,{})}),(0,v.jsx)(a.qh,{path:"/orders",element:(0,v.jsx)(Ye,{})}),(0,v.jsx)(a.qh,{path:"/orders/:orderId",element:(0,v.jsx)(Qe,{})}),(0,v.jsx)(a.qh,{path:"/track/:trackingNumber",element:(0,v.jsx)(Ae,{})}),(0,v.jsx)(a.qh,{path:"/admin",element:(0,v.jsx)(el,{})}),(0,v.jsx)(a.qh,{path:"/admin/products",element:(0,v.jsx)(tl,{})}),(0,v.jsx)(a.qh,{path:"/admin/products/new",element:(0,v.jsx)(nl,{})}),(0,v.jsx)(a.qh,{path:"/admin/products/edit/:id",element:(0,v.jsx)(nl,{})}),(0,v.jsx)(a.qh,{path:"/admin/categories",element:(0,v.jsx)(rl,{})}),(0,v.jsx)(a.qh,{path:"/admin/categories/new",element:(0,v.jsx)(rl,{})}),(0,v.jsx)(a.qh,{path:"/admin/inventory",element:(0,v.jsx)(sl,{})}),(0,v.jsx)(a.qh,{path:"/admin/inventory/low-stock",element:(0,v.jsx)(sl,{})}),(0,v.jsx)(a.qh,{path:"/admin/users",element:r.createElement(n(548).A)}),(0,v.jsx)(a.qh,{path:"/admin/orders",element:r.createElement(n(615).A)})]})}),(0,v.jsx)(F,{})]})})})})})})};s.createRoot(document.getElementById("root")).render((0,v.jsx)(r.StrictMode,{children:(0,v.jsx)(il,{})}))})();
//# sourceMappingURL=main.6c7cd7c4.js.map